"use strict";(()=>{var zi=Object.create;var Tn=Object.defineProperty;var Xi=Object.getOwnPropertyDescriptor;var $i=Object.getOwnPropertyNames;var qi=Object.getPrototypeOf,ji=Object.prototype.hasOwnProperty;var Nr=(a=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(a,{get:(f,h)=>(typeof require<"u"?require:f)[h]}):a)(function(a){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+a+'" is not supported')});var Fe=(a,f)=>()=>(f||a((f={exports:{}}).exports,f),f.exports);var Gi=(a,f,h,m)=>{if(f&&typeof f=="object"||typeof f=="function")for(let _ of $i(f))!ji.call(a,_)&&_!==h&&Tn(a,_,{get:()=>f[_],enumerable:!(m=Xi(f,_))||m.enumerable});return a};var Cn=(a,f,h)=>(h=a!=null?zi(qi(a)):{},Gi(f||!a||!a.__esModule?Tn(h,"default",{value:a,enumerable:!0}):h,a));var Or=Fe(()=>{});var Ir=Fe(()=>{});var Nn=Fe(()=>{});var Gr=Fe(()=>{});var Kr=Fe((ps,On)=>{"use strict";On.exports=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}});var In=Fe(()=>{});var Wn=Fe((dr,Vr)=>{"use strict";var Yr=(()=>{var a=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return typeof __filename<"u"&&(a=a||__filename),function(f={}){function h(){return ne.buffer!=ve.buffer&&ye(),ve}function m(){return ne.buffer!=ve.buffer&&ye(),tt}function _(){return ne.buffer!=ve.buffer&&ye(),nt}function p(){return ne.buffer!=ve.buffer&&ye(),ot}function d(){return ne.buffer!=ve.buffer&&ye(),at}function b(){return ne.buffer!=ve.buffer&&ye(),it}function v(){return ne.buffer!=ve.buffer&&ye(),st}var s=typeof f<"u"?f:{},E,M;s.ready=new Promise((e,r)=>{E=e,M=r});var ee=Object.assign({},s),B=[],oe="./this.program",ue=(e,r)=>{throw r},de=typeof window=="object",ce=typeof importScripts=="function",Y=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",x=s.ENVIRONMENT_IS_PTHREAD||!1,ae="";function xe(e){return s.locateFile?s.locateFile(e,ae):ae+e}var De,He,Ee,I;if(Y){var te=Ir(),le=Nn();ce?ae=le.dirname(ae)+"/":ae=__dirname+"/",De=(r,t)=>(r=bt(r)?new URL(r):le.normalize(r),te.readFileSync(r,t?void 0:"utf8")),Ee=r=>{var t=De(r,!0);return t.buffer||(t=new Uint8Array(t)),t},He=(r,t,n,i=!0)=>{r=bt(r)?new URL(r):le.normalize(r),te.readFile(r,i?void 0:"utf8",(u,l)=>{u?n(u):t(i?l.buffer:l)})},!s.thisProgram&&process.argv.length>1&&(oe=process.argv[1].replace(/\\/g,"/")),B=process.argv.slice(2),ue=(r,t)=>{throw process.exitCode=r,t},s.inspect=()=>"[Emscripten Module object]";let e;try{e=Or()}catch(r){throw console.error('The "worker_threads" module is not supported in this node.js build - perhaps a newer version is needed?'),r}global.Worker=e.Worker}else(de||ce)&&(ce?ae=self.location.href:typeof document<"u"&&document.currentScript&&(ae=document.currentScript.src),a&&(ae=a),ae.indexOf("blob:")!==0?ae=ae.substr(0,ae.replace(/[?#].*/,"").lastIndexOf("/")+1):ae="",Y||(De=e=>{var r=new XMLHttpRequest;return r.open("GET",e,!1),r.send(null),r.responseText},ce&&(Ee=e=>{var r=new XMLHttpRequest;return r.open("GET",e,!1),r.responseType="arraybuffer",r.send(null),new Uint8Array(r.response)}),He=(e,r,t)=>{var n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="arraybuffer",n.onload=()=>{if(n.status==200||n.status==0&&n.response){r(n.response);return}t()},n.onerror=t,n.send(null)}),I=e=>document.title=e);Y&&typeof performance>"u"&&(global.performance=Gr().performance);var fe=console.log.bind(console),ie=console.error.bind(console);Y&&(fe=(...e)=>te.writeSync(1,e.join(" ")+"\n"),ie=(...e)=>te.writeSync(2,e.join(" ")+"\n"));var re=s.print||fe,S=s.printErr||ie;Object.assign(s,ee),ee=null,s.arguments&&(B=s.arguments),s.thisProgram&&(oe=s.thisProgram),s.quit&&(ue=s.quit);var se;s.wasmBinary&&(se=s.wasmBinary);var Ae=s.noExitRuntime||!0;typeof WebAssembly!="object"&&X("no native wasm support detected");var ne,rt,qe=!1,Re;function Te(e,r){e||X(r)}var ve,tt,nt,ot,at,it,Jn,st;function ye(){var e=ne.buffer;s.HEAP8=ve=new Int8Array(e),s.HEAP16=nt=new Int16Array(e),s.HEAP32=at=new Int32Array(e),s.HEAPU8=tt=new Uint8Array(e),s.HEAPU16=ot=new Uint16Array(e),s.HEAPU32=it=new Uint32Array(e),s.HEAPF32=Jn=new Float32Array(e),s.HEAPF64=st=new Float64Array(e)}var je=s.INITIAL_MEMORY||16777216;if(Te(je>=65536,"INITIAL_MEMORY should be larger than STACK_SIZE, was "+je+"! (STACK_SIZE=65536)"),x)ne=s.wasmMemory;else if(s.wasmMemory)ne=s.wasmMemory;else if(ne=new WebAssembly.Memory({initial:je/65536,maximum:65536,shared:!0}),!(ne.buffer instanceof SharedArrayBuffer))throw S("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),Y&&S("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and/or recent version)"),Error("bad memory");ye(),je=ne.buffer.byteLength;var ut,lt=[],ft=[],Zn=[],ct=[],dt=!1,_t=0;function Ge(){return Ae||_t>0}function Qn(){if(s.preRun)for(typeof s.preRun=="function"&&(s.preRun=[s.preRun]);s.preRun.length;)mt(s.preRun.shift());Je(lt)}function ht(){dt=!0,!x&&(!s.noFSInit&&!o.init.initialized&&o.init(),o.ignorePermissions=!1,ke.init(),G.root=o.mount(G,{},null),Je(ft))}function eo(){x||Je(Zn)}function ro(){if(!x){if(s.postRun)for(typeof s.postRun=="function"&&(s.postRun=[s.postRun]);s.postRun.length;)no(s.postRun.shift());Je(ct)}}function mt(e){lt.unshift(e)}function to(e){ft.unshift(e)}function no(e){ct.unshift(e)}var Me=0,vr=null,Le=null;function os(e){return e}function Ke(e){Me++,s.monitorRunDependencies&&s.monitorRunDependencies(Me)}function Ne(e){if(Me--,s.monitorRunDependencies&&s.monitorRunDependencies(Me),Me==0&&(vr!==null&&(clearInterval(vr),vr=null),Le)){var r=Le;Le=null,r()}}function X(e){s.onAbort&&s.onAbort(e),e="Aborted("+e+")",S(e),qe=!0,Re=1,e+=". Build with -sASSERTIONS for more info.",dt&&An();var r=new WebAssembly.RuntimeError(e);throw M(r),r}var oo="data:application/octet-stream;base64,";function pt(e){return e.startsWith(oo)}function bt(e){return e.startsWith("file://")}var Ce;Ce="./duckdb-coi.wasm",pt(Ce)||(Ce=xe(Ce));function wt(e){try{if(e==Ce&&se)return new Uint8Array(se);if(Ee)return Ee(e);throw"both async and sync fetching of the wasm failed"}catch(r){X(r)}}function ao(e){return!se&&(de||ce)&&typeof fetch=="function"?fetch(e,{credentials:"same-origin"}).then(r=>{if(!r.ok)throw"failed to load wasm binary file at '"+e+"'";return r.arrayBuffer()}).catch(()=>wt(e)):Promise.resolve().then(()=>wt(e))}function vt(e,r,t){return ao(e).then(n=>WebAssembly.instantiate(n,r)).then(n=>n).then(t,n=>{S("failed to asynchronously prepare wasm: "+n),X(n)})}function io(e,r,t,n){return!e&&typeof WebAssembly.instantiateStreaming=="function"&&!pt(r)&&!Y&&typeof fetch=="function"?fetch(r,{credentials:"same-origin"}).then(i=>{var u=WebAssembly.instantiateStreaming(i,t);return u.then(n,function(l){return S("wasm streaming compile failed: "+l),S("falling back to ArrayBuffer instantiation"),vt(r,t,n)})}):vt(r,t,n)}function so(){var e={a:Ga};function r(n,i){var u=n.exports;return s.asm=u,go(s.asm.Eb),ut=s.asm.Ta,to(s.asm.Ra),rt=i,Ne("wasm-instantiate"),u}Ke("wasm-instantiate");function t(n){r(n.instance,n.module)}if(s.instantiateWasm)try{return s.instantiateWasm(e,r)}catch(n){S("Module.instantiateWasm callback failed with error: "+n),M(n)}return io(se,Ce,e,t).catch(M),{}}var A,$;function yr(e){this.name="ExitStatus",this.message="Program terminated with exit(".concat(e,")"),this.status=e}function gr(e){e.terminate(),e.onmessage=r=>{}}function uo(e){var r=P.pthreads[e];delete P.pthreads[e],gr(r),Ur(e),P.runningWorkers.splice(P.runningWorkers.indexOf(r),1),r.pthread_ptr=0}function lo(e){var r=P.pthreads[e];r.postMessage({cmd:"cancel"})}function yt(e){var r=P.pthreads[e];Te(r),P.returnWorkerToPool(r)}function Er(e,r){return m().fill(0,e,e+r),e}function gt(e){var r=P.getNewWorker();if(!r)return 6;P.runningWorkers.push(r),P.pthreads[e.pthread_ptr]=r,r.pthread_ptr=e.pthread_ptr;var t={cmd:"run",start_routine:e.startRoutine,arg:e.arg,pthread_ptr:e.pthread_ptr};return Y&&r.unref(),r.postMessage(t,e.transferList),0}var q={isAbs:e=>e.charAt(0)==="/",splitPath:e=>{var r=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;return r.exec(e).slice(1)},normalizeArray:(e,r)=>{for(var t=0,n=e.length-1;n>=0;n--){var i=e[n];i==="."?e.splice(n,1):i===".."?(e.splice(n,1),t++):t&&(e.splice(n,1),t--)}if(r)for(;t;t--)e.unshift("..");return e},normalize:e=>{var r=q.isAbs(e),t=e.substr(-1)==="/";return e=q.normalizeArray(e.split("/").filter(n=>!!n),!r).join("/"),!e&&!r&&(e="."),e&&t&&(e+="/"),(r?"/":"")+e},dirname:e=>{var r=q.splitPath(e),t=r[0],n=r[1];return!t&&!n?".":(n&&(n=n.substr(0,n.length-1)),t+n)},basename:e=>{if(e==="/")return"/";e=q.normalize(e),e=e.replace(/\/$/,"");var r=e.lastIndexOf("/");return r===-1?e:e.substr(r+1)},join:function(){var e=Array.prototype.slice.call(arguments);return q.normalize(e.join("/"))},join2:(e,r)=>q.normalize(e+"/"+r)};function fo(){if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function")return n=>(n.set(crypto.getRandomValues(new Uint8Array(n.byteLength))),n);if(Y)try{var e=Nr("crypto"),r=e.randomFillSync;if(r)return n=>e.randomFillSync(n);var t=e.randomBytes;return n=>(n.set(t(n.byteLength)),n)}catch(n){}X("initRandomDevice")}function kr(e){return(kr=fo())(e)}var ge={resolve:function(){for(var e="",r=!1,t=arguments.length-1;t>=-1&&!r;t--){var n=t>=0?arguments[t]:o.cwd();if(typeof n!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!n)return"";e=n+"/"+e,r=q.isAbs(n)}return e=q.normalizeArray(e.split("/").filter(i=>!!i),!r).join("/"),(r?"/":"")+e||"."},relative:(e,r)=>{e=ge.resolve(e).substr(1),r=ge.resolve(r).substr(1);function t(g){for(var k=0;k<g.length&&g[k]==="";k++);for(var T=g.length-1;T>=0&&g[T]==="";T--);return k>T?[]:g.slice(k,T-k+1)}for(var n=t(e.split("/")),i=t(r.split("/")),u=Math.min(n.length,i.length),l=u,c=0;c<u;c++)if(n[c]!==i[c]){l=c;break}for(var w=[],c=l;c<n.length;c++)w.push("..");return w=w.concat(i.slice(l)),w.join("/")}};function Ye(e){for(var r=0,t=0;t<e.length;++t){var n=e.charCodeAt(t);n<=127?r++:n<=2047?r+=2:n>=55296&&n<=57343?(r+=4,++t):r+=3}return r}function Fr(e,r,t,n){if(t>>>=0,!(n>0))return 0;for(var i=t,u=t+n-1,l=0;l<e.length;++l){var c=e.charCodeAt(l);if(c>=55296&&c<=57343){var w=e.charCodeAt(++l);c=65536+((c&1023)<<10)|w&1023}if(c<=127){if(t>=u)break;r[t++>>>0]=c}else if(c<=2047){if(t+1>=u)break;r[t++>>>0]=192|c>>6,r[t++>>>0]=128|c&63}else if(c<=65535){if(t+2>=u)break;r[t++>>>0]=224|c>>12,r[t++>>>0]=128|c>>6&63,r[t++>>>0]=128|c&63}else{if(t+3>=u)break;r[t++>>>0]=240|c>>18,r[t++>>>0]=128|c>>12&63,r[t++>>>0]=128|c>>6&63,r[t++>>>0]=128|c&63}}return r[t>>>0]=0,t-i}function Ve(e,r,t){var n=t>0?t:Ye(e)+1,i=new Array(n),u=Fr(e,i,0,i.length);return r&&(i.length=u),i}var Et=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function Pe(e,r,t){r>>>=0;for(var n=r+t,i=r;e[i]&&!(i>=n);)++i;if(i-r>16&&e.buffer&&Et)return Et.decode(e.buffer instanceof SharedArrayBuffer?e.slice(r,i):e.subarray(r,i));for(var u="";r<i;){var l=e[r++];if(!(l&128)){u+=String.fromCharCode(l);continue}var c=e[r++]&63;if((l&224)==192){u+=String.fromCharCode((l&31)<<6|c);continue}var w=e[r++]&63;if((l&240)==224?l=(l&15)<<12|c<<6|w:l=(l&7)<<18|c<<12|w<<6|e[r++]&63,l<65536)u+=String.fromCharCode(l);else{var g=l-65536;u+=String.fromCharCode(55296|g>>10,56320|g&1023)}}return u}var ke={ttys:[],init:function(){},shutdown:function(){},register:function(e,r){ke.ttys[e]={input:[],output:[],ops:r},o.registerDevice(e,ke.stream_ops)},stream_ops:{open:function(e){var r=ke.ttys[e.node.rdev];if(!r)throw new o.ErrnoError(43);e.tty=r,e.seekable=!1},close:function(e){e.tty.ops.fsync(e.tty)},fsync:function(e){e.tty.ops.fsync(e.tty)},read:function(e,r,t,n,i){if(!e.tty||!e.tty.ops.get_char)throw new o.ErrnoError(60);for(var u=0,l=0;l<n;l++){var c;try{c=e.tty.ops.get_char(e.tty)}catch(w){throw new o.ErrnoError(29)}if(c===void 0&&u===0)throw new o.ErrnoError(6);if(c==null)break;u++,r[t+l]=c}return u&&(e.node.timestamp=Date.now()),u},write:function(e,r,t,n,i){if(!e.tty||!e.tty.ops.put_char)throw new o.ErrnoError(60);try{for(var u=0;u<n;u++)e.tty.ops.put_char(e.tty,r[t+u])}catch(l){throw new o.ErrnoError(29)}return n&&(e.node.timestamp=Date.now()),u}},default_tty_ops:{get_char:function(e){if(!e.input.length){var r=null;if(Y){var t=256,n=Buffer.alloc(t),i=0;try{i=te.readSync(process.stdin.fd,n,0,t,-1)}catch(u){if(u.toString().includes("EOF"))i=0;else throw u}i>0?r=n.slice(0,i).toString("utf-8"):r=null}else typeof window<"u"&&typeof window.prompt=="function"?(r=window.prompt("Input: "),r!==null&&(r+="\n")):typeof readline=="function"&&(r=readline(),r!==null&&(r+="\n"));if(!r)return null;e.input=Ve(r,!0)}return e.input.shift()},put_char:function(e,r){r===null||r===10?(re(Pe(e.output,0)),e.output=[]):r!=0&&e.output.push(r)},fsync:function(e){e.output&&e.output.length>0&&(re(Pe(e.output,0)),e.output=[])}},default_tty1_ops:{put_char:function(e,r){r===null||r===10?(S(Pe(e.output,0)),e.output=[]):r!=0&&e.output.push(r)},fsync:function(e){e.output&&e.output.length>0&&(S(Pe(e.output,0)),e.output=[])}}};function co(e,r){return Math.ceil(e/r)*r}function kt(e){e=co(e,65536);var r=En(65536,e);return r?Er(r,e):0}var U={ops_table:null,mount:function(e){return U.createNode(null,"/",16895,0)},createNode:function(e,r,t,n){if(o.isBlkdev(t)||o.isFIFO(t))throw new o.ErrnoError(63);U.ops_table||(U.ops_table={dir:{node:{getattr:U.node_ops.getattr,setattr:U.node_ops.setattr,lookup:U.node_ops.lookup,mknod:U.node_ops.mknod,rename:U.node_ops.rename,unlink:U.node_ops.unlink,rmdir:U.node_ops.rmdir,readdir:U.node_ops.readdir,symlink:U.node_ops.symlink},stream:{llseek:U.stream_ops.llseek}},file:{node:{getattr:U.node_ops.getattr,setattr:U.node_ops.setattr},stream:{llseek:U.stream_ops.llseek,read:U.stream_ops.read,write:U.stream_ops.write,allocate:U.stream_ops.allocate,mmap:U.stream_ops.mmap,msync:U.stream_ops.msync}},link:{node:{getattr:U.node_ops.getattr,setattr:U.node_ops.setattr,readlink:U.node_ops.readlink},stream:{}},chrdev:{node:{getattr:U.node_ops.getattr,setattr:U.node_ops.setattr},stream:o.chrdev_stream_ops}});var i=o.createNode(e,r,t,n);return o.isDir(i.mode)?(i.node_ops=U.ops_table.dir.node,i.stream_ops=U.ops_table.dir.stream,i.contents={}):o.isFile(i.mode)?(i.node_ops=U.ops_table.file.node,i.stream_ops=U.ops_table.file.stream,i.usedBytes=0,i.contents=null):o.isLink(i.mode)?(i.node_ops=U.ops_table.link.node,i.stream_ops=U.ops_table.link.stream):o.isChrdev(i.mode)&&(i.node_ops=U.ops_table.chrdev.node,i.stream_ops=U.ops_table.chrdev.stream),i.timestamp=Date.now(),e&&(e.contents[r]=i,e.timestamp=i.timestamp),i},getFileDataAsTypedArray:function(e){return e.contents?e.contents.subarray?e.contents.subarray(0,e.usedBytes):new Uint8Array(e.contents):new Uint8Array(0)},expandFileStorage:function(e,r){r>>>=0;var t=e.contents?e.contents.length:0;if(!(t>=r)){var n=1024*1024;r=Math.max(r,t*(t<n?2:1.125)>>>0),t!=0&&(r=Math.max(r,256));var i=e.contents;e.contents=new Uint8Array(r),e.usedBytes>0&&e.contents.set(i.subarray(0,e.usedBytes),0)}},resizeFileStorage:function(e,r){if(r>>>=0,e.usedBytes!=r)if(r==0)e.contents=null,e.usedBytes=0;else{var t=e.contents;e.contents=new Uint8Array(r),t&&e.contents.set(t.subarray(0,Math.min(r,e.usedBytes))),e.usedBytes=r}},node_ops:{getattr:function(e){var r={};return r.dev=o.isChrdev(e.mode)?e.id:1,r.ino=e.id,r.mode=e.mode,r.nlink=1,r.uid=0,r.gid=0,r.rdev=e.rdev,o.isDir(e.mode)?r.size=4096:o.isFile(e.mode)?r.size=e.usedBytes:o.isLink(e.mode)?r.size=e.link.length:r.size=0,r.atime=new Date(e.timestamp),r.mtime=new Date(e.timestamp),r.ctime=new Date(e.timestamp),r.blksize=4096,r.blocks=Math.ceil(r.size/r.blksize),r},setattr:function(e,r){r.mode!==void 0&&(e.mode=r.mode),r.timestamp!==void 0&&(e.timestamp=r.timestamp),r.size!==void 0&&U.resizeFileStorage(e,r.size)},lookup:function(e,r){throw o.genericErrors[44]},mknod:function(e,r,t,n){return U.createNode(e,r,t,n)},rename:function(e,r,t){if(o.isDir(e.mode)){var n;try{n=o.lookupNode(r,t)}catch(u){}if(n)for(var i in n.contents)throw new o.ErrnoError(55)}delete e.parent.contents[e.name],e.parent.timestamp=Date.now(),e.name=t,r.contents[t]=e,r.timestamp=e.parent.timestamp,e.parent=r},unlink:function(e,r){delete e.contents[r],e.timestamp=Date.now()},rmdir:function(e,r){var t=o.lookupNode(e,r);for(var n in t.contents)throw new o.ErrnoError(55);delete e.contents[r],e.timestamp=Date.now()},readdir:function(e){var r=[".",".."];for(var t in e.contents)e.contents.hasOwnProperty(t)&&r.push(t);return r},symlink:function(e,r,t){var n=U.createNode(e,r,41471,0);return n.link=t,n},readlink:function(e){if(!o.isLink(e.mode))throw new o.ErrnoError(28);return e.link}},stream_ops:{read:function(e,r,t,n,i){var u=e.node.contents;if(i>=e.node.usedBytes)return 0;var l=Math.min(e.node.usedBytes-i,n);if(l>8&&u.subarray)r.set(u.subarray(i,i+l),t);else for(var c=0;c<l;c++)r[t+c]=u[i+c];return l},write:function(e,r,t,n,i,u){if(r.buffer===h().buffer&&(u=!1),!n)return 0;var l=e.node;if(l.timestamp=Date.now(),r.subarray&&(!l.contents||l.contents.subarray)){if(u)return l.contents=r.subarray(t,t+n),l.usedBytes=n,n;if(l.usedBytes===0&&i===0)return l.contents=r.slice(t,t+n),l.usedBytes=n,n;if(i+n<=l.usedBytes)return l.contents.set(r.subarray(t,t+n),i),n}if(U.expandFileStorage(l,i+n),l.contents.subarray&&r.subarray)l.contents.set(r.subarray(t,t+n),i);else for(var c=0;c<n;c++)l.contents[i+c]=r[t+c];return l.usedBytes=Math.max(l.usedBytes,i+n),n},llseek:function(e,r,t){var n=r;if(t===1?n+=e.position:t===2&&o.isFile(e.node.mode)&&(n+=e.node.usedBytes),n<0)throw new o.ErrnoError(28);return n},allocate:function(e,r,t){U.expandFileStorage(e.node,r+t),e.node.usedBytes=Math.max(e.node.usedBytes,r+t)},mmap:function(e,r,t,n,i){if(!o.isFile(e.node.mode))throw new o.ErrnoError(43);var u,l,c=e.node.contents;if(!(i&2)&&c.buffer===h().buffer)l=!1,u=c.byteOffset;else{if((t>0||t+r<c.length)&&(c.subarray?c=c.subarray(t,t+r):c=Array.prototype.slice.call(c,t,t+r)),l=!0,u=kt(r),!u)throw new o.ErrnoError(48);u>>>=0,h().set(c,u>>>0)}return{ptr:u,allocated:l}},msync:function(e,r,t,n,i){return U.stream_ops.write(e,r,0,n,t,!1),0}}};function _o(e,r,t,n){var i=n?"":"al ".concat(e);He(e,u=>{Te(u,'Loading data file "'.concat(e,'" failed (no arrayBuffer).')),r(new Uint8Array(u)),i&&Ne(i)},u=>{if(t)t();else throw'Loading data file "'.concat(e,'" failed.')}),i&&Ke(i)}var ho=s.preloadPlugins||[];function mo(e,r,t,n){typeof Browser<"u"&&Browser.init();var i=!1;return ho.forEach(function(u){i||u.canHandle(r)&&(u.handle(e,r,t,n),i=!0)}),i}function po(e,r,t,n,i,u,l,c,w,g){var k=r?ge.resolve(q.join2(e,r)):e,T="cp ".concat(k);function F(D){function H(z){g&&g(),c||o.createDataFile(e,r,z,n,i,w),u&&u(),Ne(T)}mo(D,k,H,()=>{l&&l(),Ne(T)})||H(D)}Ke(T),typeof t=="string"?_o(t,D=>F(D),l):F(t)}function bo(e){var r={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090},t=r[e];if(typeof t>"u")throw new Error("Unknown file open mode: ".concat(e));return t}function Sr(e,r){var t=0;return e&&(t|=365),r&&(t|=146),t}var o={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,ErrnoError:null,genericErrors:{},filesystems:null,syncFSRequests:0,lookupPath:(e,r={})=>{if(e=ge.resolve(e),!e)return{path:"",node:null};var t={follow_mount:!0,recurse_count:0};if(r=Object.assign(t,r),r.recurse_count>8)throw new o.ErrnoError(32);for(var n=e.split("/").filter(T=>!!T),i=o.root,u="/",l=0;l<n.length;l++){var c=l===n.length-1;if(c&&r.parent)break;if(i=o.lookupNode(i,n[l]),u=q.join2(u,n[l]),o.isMountpoint(i)&&(!c||c&&r.follow_mount)&&(i=i.mounted.root),!c||r.follow)for(var w=0;o.isLink(i.mode);){var g=o.readlink(u);u=ge.resolve(q.dirname(u),g);var k=o.lookupPath(u,{recurse_count:r.recurse_count+1});if(i=k.node,w++>40)throw new o.ErrnoError(32)}}return{path:u,node:i}},getPath:e=>{for(var r;;){if(o.isRoot(e)){var t=e.mount.mountpoint;return r?t[t.length-1]!=="/"?"".concat(t,"/").concat(r):t+r:t}r=r?"".concat(e.name,"/").concat(r):e.name,e=e.parent}},hashName:(e,r)=>{for(var t=0,n=0;n<r.length;n++)t=(t<<5)-t+r.charCodeAt(n)|0;return(e+t>>>0)%o.nameTable.length},hashAddNode:e=>{var r=o.hashName(e.parent.id,e.name);e.name_next=o.nameTable[r],o.nameTable[r]=e},hashRemoveNode:e=>{var r=o.hashName(e.parent.id,e.name);if(o.nameTable[r]===e)o.nameTable[r]=e.name_next;else for(var t=o.nameTable[r];t;){if(t.name_next===e){t.name_next=e.name_next;break}t=t.name_next}},lookupNode:(e,r)=>{var t=o.mayLookup(e);if(t)throw new o.ErrnoError(t,e);for(var n=o.hashName(e.id,r),i=o.nameTable[n];i;i=i.name_next){var u=i.name;if(i.parent.id===e.id&&u===r)return i}return o.lookup(e,r)},createNode:(e,r,t,n)=>{var i=new o.FSNode(e,r,t,n);return o.hashAddNode(i),i},destroyNode:e=>{o.hashRemoveNode(e)},isRoot:e=>e===e.parent,isMountpoint:e=>!!e.mounted,isFile:e=>(e&61440)===32768,isDir:e=>(e&61440)===16384,isLink:e=>(e&61440)===40960,isChrdev:e=>(e&61440)===8192,isBlkdev:e=>(e&61440)===24576,isFIFO:e=>(e&61440)===4096,isSocket:e=>(e&49152)===49152,flagsToPermissionString:e=>{var r=["r","w","rw"][e&3];return e&512&&(r+="w"),r},nodePermissions:(e,r)=>o.ignorePermissions?0:r.includes("r")&&!(e.mode&292)||r.includes("w")&&!(e.mode&146)||r.includes("x")&&!(e.mode&73)?2:0,mayLookup:e=>{var r=o.nodePermissions(e,"x");return r||(e.node_ops.lookup?0:2)},mayCreate:(e,r)=>{try{var t=o.lookupNode(e,r);return 20}catch(n){}return o.nodePermissions(e,"wx")},mayDelete:(e,r,t)=>{var n;try{n=o.lookupNode(e,r)}catch(u){return u.errno}var i=o.nodePermissions(e,"wx");if(i)return i;if(t){if(!o.isDir(n.mode))return 54;if(o.isRoot(n)||o.getPath(n)===o.cwd())return 10}else if(o.isDir(n.mode))return 31;return 0},mayOpen:(e,r)=>e?o.isLink(e.mode)?32:o.isDir(e.mode)&&(o.flagsToPermissionString(r)!=="r"||r&512)?31:o.nodePermissions(e,o.flagsToPermissionString(r)):44,MAX_OPEN_FDS:4096,nextfd:()=>{for(var e=0;e<=o.MAX_OPEN_FDS;e++)if(!o.streams[e])return e;throw new o.ErrnoError(33)},getStream:e=>o.streams[e],createStream:(e,r=-1)=>(o.FSStream||(o.FSStream=function(){this.shared={}},o.FSStream.prototype={},Object.defineProperties(o.FSStream.prototype,{object:{get:function(){return this.node},set:function(t){this.node=t}},isRead:{get:function(){return(this.flags&2097155)!==1}},isWrite:{get:function(){return(this.flags&2097155)!==0}},isAppend:{get:function(){return this.flags&1024}},flags:{get:function(){return this.shared.flags},set:function(t){this.shared.flags=t}},position:{get:function(){return this.shared.position},set:function(t){this.shared.position=t}}})),e=Object.assign(new o.FSStream,e),r==-1&&(r=o.nextfd()),e.fd=r,o.streams[r]=e,e),closeStream:e=>{o.streams[e]=null},chrdev_stream_ops:{open:e=>{var r=o.getDevice(e.node.rdev);e.stream_ops=r.stream_ops,e.stream_ops.open&&e.stream_ops.open(e)},llseek:()=>{throw new o.ErrnoError(70)}},major:e=>e>>8,minor:e=>e&255,makedev:(e,r)=>e<<8|r,registerDevice:(e,r)=>{o.devices[e]={stream_ops:r}},getDevice:e=>o.devices[e],getMounts:e=>{for(var r=[],t=[e];t.length;){var n=t.pop();r.push(n),t.push.apply(t,n.mounts)}return r},syncfs:(e,r)=>{typeof e=="function"&&(r=e,e=!1),o.syncFSRequests++,o.syncFSRequests>1&&S("warning: ".concat(o.syncFSRequests," FS.syncfs operations in flight at once, probably just doing extra work"));var t=o.getMounts(o.root.mount),n=0;function i(l){return o.syncFSRequests--,r(l)}function u(l){if(l)return u.errored?void 0:(u.errored=!0,i(l));++n>=t.length&&i(null)}t.forEach(l=>{if(!l.type.syncfs)return u(null);l.type.syncfs(l,e,u)})},mount:(e,r,t)=>{var n=t==="/",i=!t,u;if(n&&o.root)throw new o.ErrnoError(10);if(!n&&!i){var l=o.lookupPath(t,{follow_mount:!1});if(t=l.path,u=l.node,o.isMountpoint(u))throw new o.ErrnoError(10);if(!o.isDir(u.mode))throw new o.ErrnoError(54)}var c={type:e,opts:r,mountpoint:t,mounts:[]},w=e.mount(c);return w.mount=c,c.root=w,n?o.root=w:u&&(u.mounted=c,u.mount&&u.mount.mounts.push(c)),w},unmount:e=>{var r=o.lookupPath(e,{follow_mount:!1});if(!o.isMountpoint(r.node))throw new o.ErrnoError(28);var t=r.node,n=t.mounted,i=o.getMounts(n);Object.keys(o.nameTable).forEach(l=>{for(var c=o.nameTable[l];c;){var w=c.name_next;i.includes(c.mount)&&o.destroyNode(c),c=w}}),t.mounted=null;var u=t.mount.mounts.indexOf(n);t.mount.mounts.splice(u,1)},lookup:(e,r)=>e.node_ops.lookup(e,r),mknod:(e,r,t)=>{var n=o.lookupPath(e,{parent:!0}),i=n.node,u=q.basename(e);if(!u||u==="."||u==="..")throw new o.ErrnoError(28);var l=o.mayCreate(i,u);if(l)throw new o.ErrnoError(l);if(!i.node_ops.mknod)throw new o.ErrnoError(63);return i.node_ops.mknod(i,u,r,t)},create:(e,r)=>(r=r!==void 0?r:438,r&=4095,r|=32768,o.mknod(e,r,0)),mkdir:(e,r)=>(r=r!==void 0?r:511,r&=1023,r|=16384,o.mknod(e,r,0)),mkdirTree:(e,r)=>{for(var t=e.split("/"),n="",i=0;i<t.length;++i)if(t[i]){n+="/"+t[i];try{o.mkdir(n,r)}catch(u){if(u.errno!=20)throw u}}},mkdev:(e,r,t)=>(typeof t>"u"&&(t=r,r=438),r|=8192,o.mknod(e,r,t)),symlink:(e,r)=>{if(!ge.resolve(e))throw new o.ErrnoError(44);var t=o.lookupPath(r,{parent:!0}),n=t.node;if(!n)throw new o.ErrnoError(44);var i=q.basename(r),u=o.mayCreate(n,i);if(u)throw new o.ErrnoError(u);if(!n.node_ops.symlink)throw new o.ErrnoError(63);return n.node_ops.symlink(n,i,e)},rename:(e,r)=>{var t=q.dirname(e),n=q.dirname(r),i=q.basename(e),u=q.basename(r),l,c,w;if(l=o.lookupPath(e,{parent:!0}),c=l.node,l=o.lookupPath(r,{parent:!0}),w=l.node,!c||!w)throw new o.ErrnoError(44);if(c.mount!==w.mount)throw new o.ErrnoError(75);var g=o.lookupNode(c,i),k=ge.relative(e,n);if(k.charAt(0)!==".")throw new o.ErrnoError(28);if(k=ge.relative(r,t),k.charAt(0)!==".")throw new o.ErrnoError(55);var T;try{T=o.lookupNode(w,u)}catch(H){}if(g!==T){var F=o.isDir(g.mode),D=o.mayDelete(c,i,F);if(D)throw new o.ErrnoError(D);if(D=T?o.mayDelete(w,u,F):o.mayCreate(w,u),D)throw new o.ErrnoError(D);if(!c.node_ops.rename)throw new o.ErrnoError(63);if(o.isMountpoint(g)||T&&o.isMountpoint(T))throw new o.ErrnoError(10);if(w!==c&&(D=o.nodePermissions(c,"w"),D))throw new o.ErrnoError(D);o.hashRemoveNode(g);try{c.node_ops.rename(g,w,u)}catch(H){throw H}finally{o.hashAddNode(g)}}},rmdir:e=>{var r=o.lookupPath(e,{parent:!0}),t=r.node,n=q.basename(e),i=o.lookupNode(t,n),u=o.mayDelete(t,n,!0);if(u)throw new o.ErrnoError(u);if(!t.node_ops.rmdir)throw new o.ErrnoError(63);if(o.isMountpoint(i))throw new o.ErrnoError(10);t.node_ops.rmdir(t,n),o.destroyNode(i)},readdir:e=>{var r=o.lookupPath(e,{follow:!0}),t=r.node;if(!t.node_ops.readdir)throw new o.ErrnoError(54);return t.node_ops.readdir(t)},unlink:e=>{var r=o.lookupPath(e,{parent:!0}),t=r.node;if(!t)throw new o.ErrnoError(44);var n=q.basename(e),i=o.lookupNode(t,n),u=o.mayDelete(t,n,!1);if(u)throw new o.ErrnoError(u);if(!t.node_ops.unlink)throw new o.ErrnoError(63);if(o.isMountpoint(i))throw new o.ErrnoError(10);t.node_ops.unlink(t,n),o.destroyNode(i)},readlink:e=>{var r=o.lookupPath(e),t=r.node;if(!t)throw new o.ErrnoError(44);if(!t.node_ops.readlink)throw new o.ErrnoError(28);return ge.resolve(o.getPath(t.parent),t.node_ops.readlink(t))},stat:(e,r)=>{var t=o.lookupPath(e,{follow:!r}),n=t.node;if(!n)throw new o.ErrnoError(44);if(!n.node_ops.getattr)throw new o.ErrnoError(63);return n.node_ops.getattr(n)},lstat:e=>o.stat(e,!0),chmod:(e,r,t)=>{var n;if(typeof e=="string"){var i=o.lookupPath(e,{follow:!t});n=i.node}else n=e;if(!n.node_ops.setattr)throw new o.ErrnoError(63);n.node_ops.setattr(n,{mode:r&4095|n.mode&-4096,timestamp:Date.now()})},lchmod:(e,r)=>{o.chmod(e,r,!0)},fchmod:(e,r)=>{var t=o.getStream(e);if(!t)throw new o.ErrnoError(8);o.chmod(t.node,r)},chown:(e,r,t,n)=>{var i;if(typeof e=="string"){var u=o.lookupPath(e,{follow:!n});i=u.node}else i=e;if(!i.node_ops.setattr)throw new o.ErrnoError(63);i.node_ops.setattr(i,{timestamp:Date.now()})},lchown:(e,r,t)=>{o.chown(e,r,t,!0)},fchown:(e,r,t)=>{var n=o.getStream(e);if(!n)throw new o.ErrnoError(8);o.chown(n.node,r,t)},truncate:(e,r)=>{if(r<0)throw new o.ErrnoError(28);var t;if(typeof e=="string"){var n=o.lookupPath(e,{follow:!0});t=n.node}else t=e;if(!t.node_ops.setattr)throw new o.ErrnoError(63);if(o.isDir(t.mode))throw new o.ErrnoError(31);if(!o.isFile(t.mode))throw new o.ErrnoError(28);var i=o.nodePermissions(t,"w");if(i)throw new o.ErrnoError(i);t.node_ops.setattr(t,{size:r,timestamp:Date.now()})},ftruncate:(e,r)=>{var t=o.getStream(e);if(!t)throw new o.ErrnoError(8);if(!(t.flags&2097155))throw new o.ErrnoError(28);o.truncate(t.node,r)},utime:(e,r,t)=>{var n=o.lookupPath(e,{follow:!0}),i=n.node;i.node_ops.setattr(i,{timestamp:Math.max(r,t)})},open:(e,r,t)=>{if(e==="")throw new o.ErrnoError(44);r=typeof r=="string"?bo(r):r,t=typeof t>"u"?438:t,r&64?t=t&4095|32768:t=0;var n;if(typeof e=="object")n=e;else{e=q.normalize(e);try{var i=o.lookupPath(e,{follow:!(r&131072)});n=i.node}catch(w){}}var u=!1;if(r&64)if(n){if(r&128)throw new o.ErrnoError(20)}else n=o.mknod(e,t,0),u=!0;if(!n)throw new o.ErrnoError(44);if(o.isChrdev(n.mode)&&(r&=-513),r&65536&&!o.isDir(n.mode))throw new o.ErrnoError(54);if(!u){var l=o.mayOpen(n,r);if(l)throw new o.ErrnoError(l)}r&512&&!u&&o.truncate(n,0),r&=-131713;var c=o.createStream({node:n,path:o.getPath(n),flags:r,seekable:!0,position:0,stream_ops:n.stream_ops,ungotten:[],error:!1});return c.stream_ops.open&&c.stream_ops.open(c),s.logReadFiles&&!(r&1)&&(o.readFiles||(o.readFiles={}),e in o.readFiles||(o.readFiles[e]=1)),c},close:e=>{if(o.isClosed(e))throw new o.ErrnoError(8);e.getdents&&(e.getdents=null);try{e.stream_ops.close&&e.stream_ops.close(e)}catch(r){throw r}finally{o.closeStream(e.fd)}e.fd=null},isClosed:e=>e.fd===null,llseek:(e,r,t)=>{if(o.isClosed(e))throw new o.ErrnoError(8);if(!e.seekable||!e.stream_ops.llseek)throw new o.ErrnoError(70);if(t!=0&&t!=1&&t!=2)throw new o.ErrnoError(28);return e.position=e.stream_ops.llseek(e,r,t),e.ungotten=[],e.position},read:(e,r,t,n,i)=>{if(t>>>=0,n<0||i<0)throw new o.ErrnoError(28);if(o.isClosed(e))throw new o.ErrnoError(8);if((e.flags&2097155)===1)throw new o.ErrnoError(8);if(o.isDir(e.node.mode))throw new o.ErrnoError(31);if(!e.stream_ops.read)throw new o.ErrnoError(28);var u=typeof i<"u";if(!u)i=e.position;else if(!e.seekable)throw new o.ErrnoError(70);var l=e.stream_ops.read(e,r,t,n,i);return u||(e.position+=l),l},write:(e,r,t,n,i,u)=>{if(t>>>=0,n<0||i<0)throw new o.ErrnoError(28);if(o.isClosed(e))throw new o.ErrnoError(8);if(!(e.flags&2097155))throw new o.ErrnoError(8);if(o.isDir(e.node.mode))throw new o.ErrnoError(31);if(!e.stream_ops.write)throw new o.ErrnoError(28);e.seekable&&e.flags&1024&&o.llseek(e,0,2);var l=typeof i<"u";if(!l)i=e.position;else if(!e.seekable)throw new o.ErrnoError(70);var c=e.stream_ops.write(e,r,t,n,i,u);return l||(e.position+=c),c},allocate:(e,r,t)=>{if(o.isClosed(e))throw new o.ErrnoError(8);if(r<0||t<=0)throw new o.ErrnoError(28);if(!(e.flags&2097155))throw new o.ErrnoError(8);if(!o.isFile(e.node.mode)&&!o.isDir(e.node.mode))throw new o.ErrnoError(43);if(!e.stream_ops.allocate)throw new o.ErrnoError(138);e.stream_ops.allocate(e,r,t)},mmap:(e,r,t,n,i)=>{if(n&2&&!(i&2)&&(e.flags&2097155)!==2)throw new o.ErrnoError(2);if((e.flags&2097155)===1)throw new o.ErrnoError(2);if(!e.stream_ops.mmap)throw new o.ErrnoError(43);return e.stream_ops.mmap(e,r,t,n,i)},msync:(e,r,t,n,i)=>(t>>>=0,e.stream_ops.msync?e.stream_ops.msync(e,r,t,n,i):0),munmap:e=>0,ioctl:(e,r,t)=>{if(!e.stream_ops.ioctl)throw new o.ErrnoError(59);return e.stream_ops.ioctl(e,r,t)},readFile:(e,r={})=>{if(r.flags=r.flags||0,r.encoding=r.encoding||"binary",r.encoding!=="utf8"&&r.encoding!=="binary")throw new Error('Invalid encoding type "'.concat(r.encoding,'"'));var t,n=o.open(e,r.flags),i=o.stat(e),u=i.size,l=new Uint8Array(u);return o.read(n,l,0,u,0),r.encoding==="utf8"?t=Pe(l,0):r.encoding==="binary"&&(t=l),o.close(n),t},writeFile:(e,r,t={})=>{t.flags=t.flags||577;var n=o.open(e,t.flags,t.mode);if(typeof r=="string"){var i=new Uint8Array(Ye(r)+1),u=Fr(r,i,0,i.length);o.write(n,i,0,u,void 0,t.canOwn)}else if(ArrayBuffer.isView(r))o.write(n,r,0,r.byteLength,void 0,t.canOwn);else throw new Error("Unsupported data type");o.close(n)},cwd:()=>o.currentPath,chdir:e=>{var r=o.lookupPath(e,{follow:!0});if(r.node===null)throw new o.ErrnoError(44);if(!o.isDir(r.node.mode))throw new o.ErrnoError(54);var t=o.nodePermissions(r.node,"x");if(t)throw new o.ErrnoError(t);o.currentPath=r.path},createDefaultDirectories:()=>{o.mkdir("/tmp"),o.mkdir("/home"),o.mkdir("/home/web_user")},createDefaultDevices:()=>{o.mkdir("/dev"),o.registerDevice(o.makedev(1,3),{read:()=>0,write:(n,i,u,l,c)=>l}),o.mkdev("/dev/null",o.makedev(1,3)),ke.register(o.makedev(5,0),ke.default_tty_ops),ke.register(o.makedev(6,0),ke.default_tty1_ops),o.mkdev("/dev/tty",o.makedev(5,0)),o.mkdev("/dev/tty1",o.makedev(6,0));var e=new Uint8Array(1024),r=0,t=()=>(r===0&&(r=kr(e).byteLength),e[--r]);o.createDevice("/dev","random",t),o.createDevice("/dev","urandom",t),o.mkdir("/dev/shm"),o.mkdir("/dev/shm/tmp")},createSpecialDirectories:()=>{o.mkdir("/proc");var e=o.mkdir("/proc/self");o.mkdir("/proc/self/fd"),o.mount({mount:()=>{var r=o.createNode(e,"fd",16895,73);return r.node_ops={lookup:(t,n)=>{var i=+n,u=o.getStream(i);if(!u)throw new o.ErrnoError(8);var l={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:()=>u.path}};return l.parent=l,l}},r}},{},"/proc/self/fd")},createStandardStreams:()=>{s.stdin?o.createDevice("/dev","stdin",s.stdin):o.symlink("/dev/tty","/dev/stdin"),s.stdout?o.createDevice("/dev","stdout",null,s.stdout):o.symlink("/dev/tty","/dev/stdout"),s.stderr?o.createDevice("/dev","stderr",null,s.stderr):o.symlink("/dev/tty1","/dev/stderr");var e=o.open("/dev/stdin",0),r=o.open("/dev/stdout",1),t=o.open("/dev/stderr",1)},ensureErrnoError:()=>{o.ErrnoError||(o.ErrnoError=function(r,t){this.name="ErrnoError",this.node=t,this.setErrno=function(n){this.errno=n},this.setErrno(r),this.message="FS error"},o.ErrnoError.prototype=new Error,o.ErrnoError.prototype.constructor=o.ErrnoError,[44].forEach(e=>{o.genericErrors[e]=new o.ErrnoError(e),o.genericErrors[e].stack="<generic error, no stack>"}))},staticInit:()=>{o.ensureErrnoError(),o.nameTable=new Array(4096),o.mount(U,{},"/"),o.createDefaultDirectories(),o.createDefaultDevices(),o.createSpecialDirectories(),o.filesystems={MEMFS:U}},init:(e,r,t)=>{o.init.initialized=!0,o.ensureErrnoError(),s.stdin=e||s.stdin,s.stdout=r||s.stdout,s.stderr=t||s.stderr,o.createStandardStreams()},quit:()=>{o.init.initialized=!1;for(var e=0;e<o.streams.length;e++){var r=o.streams[e];r&&o.close(r)}},findObject:(e,r)=>{var t=o.analyzePath(e,r);return t.exists?t.object:null},analyzePath:(e,r)=>{try{var t=o.lookupPath(e,{follow:!r});e=t.path}catch(i){}var n={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var t=o.lookupPath(e,{parent:!0});n.parentExists=!0,n.parentPath=t.path,n.parentObject=t.node,n.name=q.basename(e),t=o.lookupPath(e,{follow:!r}),n.exists=!0,n.path=t.path,n.object=t.node,n.name=t.node.name,n.isRoot=t.path==="/"}catch(i){n.error=i.errno}return n},createPath:(e,r,t,n)=>{e=typeof e=="string"?e:o.getPath(e);for(var i=r.split("/").reverse();i.length;){var u=i.pop();if(u){var l=q.join2(e,u);try{o.mkdir(l)}catch(c){}e=l}}return l},createFile:(e,r,t,n,i)=>{var u=q.join2(typeof e=="string"?e:o.getPath(e),r),l=Sr(n,i);return o.create(u,l)},createDataFile:(e,r,t,n,i,u)=>{var l=r;e&&(e=typeof e=="string"?e:o.getPath(e),l=r?q.join2(e,r):e);var c=Sr(n,i),w=o.create(l,c);if(t){if(typeof t=="string"){for(var g=new Array(t.length),k=0,T=t.length;k<T;++k)g[k]=t.charCodeAt(k);t=g}o.chmod(w,c|146);var F=o.open(w,577);o.write(F,t,0,t.length,0,u),o.close(F),o.chmod(w,c)}return w},createDevice:(e,r,t,n)=>{var i=q.join2(typeof e=="string"?e:o.getPath(e),r),u=Sr(!!t,!!n);o.createDevice.major||(o.createDevice.major=64);var l=o.makedev(o.createDevice.major++,0);return o.registerDevice(l,{open:c=>{c.seekable=!1},close:c=>{n&&n.buffer&&n.buffer.length&&n(10)},read:(c,w,g,k,T)=>{for(var F=0,D=0;D<k;D++){var H;try{H=t()}catch(z){throw new o.ErrnoError(29)}if(H===void 0&&F===0)throw new o.ErrnoError(6);if(H==null)break;F++,w[g+D]=H}return F&&(c.node.timestamp=Date.now()),F},write:(c,w,g,k,T)=>{for(var F=0;F<k;F++)try{n(w[g+F])}catch(D){throw new o.ErrnoError(29)}return k&&(c.node.timestamp=Date.now()),F}}),o.mkdev(i,u,l)},forceLoadFile:e=>{if(e.isDevice||e.isFolder||e.link||e.contents)return!0;if(typeof XMLHttpRequest<"u")throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");if(De)try{e.contents=Ve(De(e.url),!0),e.usedBytes=e.contents.length}catch(r){throw new o.ErrnoError(29)}else throw new Error("Cannot load without read() or XMLHttpRequest.")},createLazyFile:(e,r,t,n,i)=>{function u(){this.lengthKnown=!1,this.chunks=[]}if(u.prototype.get=function(D){if(!(D>this.length-1||D<0)){var H=D%this.chunkSize,z=D/this.chunkSize|0;return this.getter(z)[H]}},u.prototype.setDataGetter=function(D){this.getter=D},u.prototype.cacheLength=function(){var D=new XMLHttpRequest;if(D.open("HEAD",t,!1),D.send(null),!(D.status>=200&&D.status<300||D.status===304))throw new Error("Couldn't load "+t+". Status: "+D.status);var H=Number(D.getResponseHeader("Content-length")),z,Z=(z=D.getResponseHeader("Accept-Ranges"))&&z==="bytes",Q=(z=D.getResponseHeader("Content-Encoding"))&&z==="gzip",y=1024*1024;Z||(y=H);var R=(L,J)=>{if(L>J)throw new Error("invalid range ("+L+", "+J+") or no bytes requested!");if(J>H-1)throw new Error("only "+H+" bytes available! programmer error!");var V=new XMLHttpRequest;if(V.open("GET",t,!1),H!==y&&V.setRequestHeader("Range","bytes="+L+"-"+J),V.responseType="arraybuffer",V.overrideMimeType&&V.overrideMimeType("text/plain; charset=x-user-defined"),V.send(null),!(V.status>=200&&V.status<300||V.status===304))throw new Error("Couldn't load "+t+". Status: "+V.status);return V.response!==void 0?new Uint8Array(V.response||[]):Ve(V.responseText||"",!0)},W=this;W.setDataGetter(L=>{var J=L*y,V=(L+1)*y-1;if(V=Math.min(V,H-1),typeof W.chunks[L]>"u"&&(W.chunks[L]=R(J,V)),typeof W.chunks[L]>"u")throw new Error("doXHR failed!");return W.chunks[L]}),(Q||!H)&&(y=H=1,H=this.getter(0).length,y=H,re("LazyFiles on gzip forces download of the whole file when length is accessed")),this._length=H,this._chunkSize=y,this.lengthKnown=!0},typeof XMLHttpRequest<"u"){if(!ce)throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";var l=new u;Object.defineProperties(l,{length:{get:function(){return this.lengthKnown||this.cacheLength(),this._length}},chunkSize:{get:function(){return this.lengthKnown||this.cacheLength(),this._chunkSize}}});var c={isDevice:!1,contents:l}}else var c={isDevice:!1,url:t};var w=o.createFile(e,r,c,n,i);c.contents?w.contents=c.contents:c.url&&(w.contents=null,w.url=c.url),Object.defineProperties(w,{usedBytes:{get:function(){return this.contents.length}}});var g={},k=Object.keys(w.stream_ops);k.forEach(F=>{var D=w.stream_ops[F];g[F]=function(){return o.forceLoadFile(w),D.apply(null,arguments)}});function T(F,D,H,z,Z){var Q=F.node.contents;if(Z>=Q.length)return 0;var y=Math.min(Q.length-Z,z);if(Q.slice)for(var R=0;R<y;R++)D[H+R]=Q[Z+R];else for(var R=0;R<y;R++)D[H+R]=Q.get(Z+R);return y}return g.read=(F,D,H,z,Z)=>(o.forceLoadFile(w),T(F,D,H,z,Z)),g.mmap=(F,D,H,z,Z)=>{o.forceLoadFile(w);var Q=kt(D);if(!Q)throw new o.ErrnoError(48);return T(F,h(),Q,D,H),{ptr:Q,allocated:!0}},w.stream_ops=g,w}};function Be(e,r){return e>>>=0,e?Pe(m(),e,r):""}var C={DEFAULT_POLLMASK:5,calculateAt:function(e,r,t){if(q.isAbs(r))return r;var n;if(e===-100)n=o.cwd();else{var i=C.getStreamFromFD(e);n=i.path}if(r.length==0){if(!t)throw new o.ErrnoError(44);return n}return q.join2(n,r)},doStat:function(e,r,t){try{var n=e(r)}catch(c){if(c&&c.node&&q.normalize(r)!==q.normalize(o.getPath(c.node)))return-54;throw c}d()[t>>>2]=n.dev,d()[t+8>>>2]=n.ino,d()[t+12>>>2]=n.mode,b()[t+16>>>2]=n.nlink,d()[t+20>>>2]=n.uid,d()[t+24>>>2]=n.gid,d()[t+28>>>2]=n.rdev,$=[n.size>>>0,(A=n.size,+Math.abs(A)>=1?A>0?+Math.floor(A/4294967296)>>>0:~~+Math.ceil((A-+(~~A>>>0))/4294967296)>>>0:0)],d()[t+40>>>2]=$[0],d()[t+44>>>2]=$[1],d()[t+48>>>2]=4096,d()[t+52>>>2]=n.blocks;var i=n.atime.getTime(),u=n.mtime.getTime(),l=n.ctime.getTime();return $=[Math.floor(i/1e3)>>>0,(A=Math.floor(i/1e3),+Math.abs(A)>=1?A>0?+Math.floor(A/4294967296)>>>0:~~+Math.ceil((A-+(~~A>>>0))/4294967296)>>>0:0)],d()[t+56>>>2]=$[0],d()[t+60>>>2]=$[1],b()[t+64>>>2]=i%1e3*1e3,$=[Math.floor(u/1e3)>>>0,(A=Math.floor(u/1e3),+Math.abs(A)>=1?A>0?+Math.floor(A/4294967296)>>>0:~~+Math.ceil((A-+(~~A>>>0))/4294967296)>>>0:0)],d()[t+72>>>2]=$[0],d()[t+76>>>2]=$[1],b()[t+80>>>2]=u%1e3*1e3,$=[Math.floor(l/1e3)>>>0,(A=Math.floor(l/1e3),+Math.abs(A)>=1?A>0?+Math.floor(A/4294967296)>>>0:~~+Math.ceil((A-+(~~A>>>0))/4294967296)>>>0:0)],d()[t+88>>>2]=$[0],d()[t+92>>>2]=$[1],b()[t+96>>>2]=l%1e3*1e3,$=[n.ino>>>0,(A=n.ino,+Math.abs(A)>=1?A>0?+Math.floor(A/4294967296)>>>0:~~+Math.ceil((A-+(~~A>>>0))/4294967296)>>>0:0)],d()[t+104>>>2]=$[0],d()[t+108>>>2]=$[1],0},doMsync:function(e,r,t,n,i){if(!o.isFile(r.node.mode))throw new o.ErrnoError(43);if(n&2)return 0;e>>>=0;var u=m().slice(e,e+t);o.msync(r,u,i,t,n)},varargs:void 0,get:function(){C.varargs+=4;var e=d()[C.varargs-4>>>2];return e},getStr:function(e){var r=Be(e);return r},getStreamFromFD:function(e){var r=o.getStream(e);if(!r)throw new o.ErrnoError(8);return r}};function Ft(e){if(x)return O(1,1,e);Re=e,Ge()||(P.terminateAllThreads(),s.onExit&&s.onExit(e),qe=!0),ue(e,new yr(e))}function St(e,r){if(Re=e,x)throw Dt(e),"unwind";Ft(e)}var Dr=St;function Ar(e){if(e instanceof yr||e=="unwind")return Re;ue(1,e)}var P={unusedWorkers:[],runningWorkers:[],tlsInitFunctions:[],pthreads:{},init:function(){x?P.initWorker():P.initMainThread()},initMainThread:function(){for(var e=4;e--;)P.allocateUnusedWorker();mt(()=>{Ke("loading-workers"),P.loadWasmModuleToAllWorkers(()=>Ne("loading-workers"))})},initWorker:function(){Ae=!1},setExitStatus:function(e){Re=e},terminateAllThreads__deps:["$terminateWorker"],terminateAllThreads:function(){for(var e of P.runningWorkers)gr(e);for(var e of P.unusedWorkers)gr(e);P.unusedWorkers=[],P.runningWorkers=[],P.pthreads=[]},returnWorkerToPool:function(e){var r=e.pthread_ptr;delete P.pthreads[r],P.unusedWorkers.push(e),P.runningWorkers.splice(P.runningWorkers.indexOf(e),1),e.pthread_ptr=0,Ur(r)},receiveObjectTransfer:function(e){},threadInitTLS:function(){P.tlsInitFunctions.forEach(e=>e())},loadWasmModuleToWorker:e=>new Promise(r=>{e.onmessage=u=>{var l=u.data,c=l.cmd;if(e.pthread_ptr&&(P.currentProxiedOperationCallerThread=e.pthread_ptr),l.targetThread&&l.targetThread!=ar()){var w=P.pthreads[l.targetThread];w?w.postMessage(l,l.transferList):S('Internal error! Worker sent a message "'+c+'" to target pthread '+l.targetThread+", but that thread no longer exists!"),P.currentProxiedOperationCallerThread=void 0;return}c==="checkMailbox"?tr():c==="spawnThread"?gt(l):c==="cleanupThread"?yt(l.thread):c==="killThread"?uo(l.thread):c==="cancelThread"?lo(l.thread):c==="loaded"?(e.loaded=!0,Y&&!e.pthread_ptr&&e.unref(),r(e)):c==="print"?re("Thread "+l.threadId+": "+l.text):c==="printErr"?S("Thread "+l.threadId+": "+l.text):c==="alert"?alert("Thread "+l.threadId+": "+l.text):l.target==="setimmediate"?e.postMessage(l):c==="callHandler"?s[l.handler](...l.args):c&&S("worker sent an unknown command "+c),P.currentProxiedOperationCallerThread=void 0},e.onerror=u=>{var l="worker sent an error!";throw S(l+" "+u.filename+":"+u.lineno+": "+u.message),u},Y&&(e.on("message",function(u){e.onmessage({data:u})}),e.on("error",function(u){e.onerror(u)}));var t=[],n=["onExit","onAbort","print","printErr"];for(var i of n)s.hasOwnProperty(i)&&t.push(i);e.postMessage({cmd:"load",handlers:t,urlOrBlob:s.mainScriptUrlOrBlob||a,wasmMemory:ne,wasmModule:rt})}),loadWasmModuleToAllWorkers:function(e){if(x)return e();Promise.all(P.unusedWorkers.map(P.loadWasmModuleToWorker)).then(e)},allocateUnusedWorker:function(){var e,r=xe("duckdb_wasm.worker.js");e=new Worker(r),P.unusedWorkers.push(e)},getNewWorker:function(){return P.unusedWorkers.length==0&&(P.allocateUnusedWorker(),P.loadWasmModuleToWorker(P.unusedWorkers[0])),P.unusedWorkers.pop()}};s.PThread=P;function Je(e){for(;e.length>0;)e.shift()(s)}function wo(){var e=ar(),r=d()[e+52>>>2],t=d()[e+56>>>2],n=r-t;Rn(r,n),ze(r)}s.establishStackSpace=wo;function Dt(e){if(x)return O(2,0,e);Dr(e)}var Ze=[];function vo(e){var r=Ze[e];return r||(e>=Ze.length&&(Ze.length=e+1),Ze[e]=r=ut.get(e)),r}function yo(e,r){var t=vo(e)(r);Ge()?P.setExitStatus(t):Lr(t)}s.invokeEntryPoint=yo;function go(e){P.tlsInitFunctions.push(e)}function Eo(){S("missing function: XML_GetBuffer"),X(-1)}function ko(){S("missing function: XML_GetErrorCode"),X(-1)}function Fo(){S("missing function: XML_Parse"),X(-1)}function So(){S("missing function: XML_ParseBuffer"),X(-1)}function Do(){S("missing function: XML_ParserCreate"),X(-1)}function Ao(){S("missing function: XML_ParserFree"),X(-1)}function Ro(){S("missing function: XML_ResumeParser"),X(-1)}function Mo(){S("missing function: XML_SetCharacterDataHandler"),X(-1)}function xo(){S("missing function: XML_SetElementHandler"),X(-1)}function Ho(){S("missing function: XML_SetUserData"),X(-1)}function To(){S("missing function: XML_StopParser"),X(-1)}var At="To use dlopen, you need enable dynamic linking, see https://emscripten.org/docs/compiling/Dynamic-Linking.html";function Co(e,r,t){X(At)}function Po(e){Fn(e,!ce,1,!de,65536),P.threadInitTLS()}function Bo(e){x?postMessage({cmd:"cleanupThread",thread:e}):yt(e)}function Rt(e,r,t,n){return x?O(3,1,e,r,t,n):Mt(e,r,t,n)}function Mt(e,r,t,n){if(typeof SharedArrayBuffer>"u")return S("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;var i=[],u=0;if(x&&(i.length===0||u))return Rt(e,r,t,n);if(u)return u;var l={startRoutine:t,pthread_ptr:e,arg:n,transferList:i};return x?(l.cmd="spawnThread",postMessage(l,i),0):gt(l)}function xt(e,r,t,n,i){if(x)return O(4,1,e,r,t,n,i);try{for(var u=0,l=r?d()[r>>>2]:0,c=r?d()[r+4>>>2]:0,w=t?d()[t>>>2]:0,g=t?d()[t+4>>>2]:0,k=n?d()[n>>>2]:0,T=n?d()[n+4>>>2]:0,F=0,D=0,H=0,z=0,Z=0,Q=0,y=(r?d()[r>>>2]:0)|(t?d()[t>>>2]:0)|(n?d()[n>>>2]:0),R=(r?d()[r+4>>>2]:0)|(t?d()[t+4>>>2]:0)|(n?d()[n+4>>>2]:0),W=function($e,Ii,Wi,Hn){return $e<32?Ii&Hn:Wi&Hn},L=0;L<e;L++){var J=1<<L%32;if(W(L,y,R,J)){var V=C.getStreamFromFD(L),cr=C.DEFAULT_POLLMASK;V.stream_ops.poll&&(cr=V.stream_ops.poll(V)),cr&1&&W(L,l,c,J)&&(L<32?F=F|J:D=D|J,u++),cr&4&&W(L,w,g,J)&&(L<32?H=H|J:z=z|J,u++),cr&2&&W(L,k,T,J)&&(L<32?Z=Z|J:Q=Q|J,u++)}}return r&&(d()[r>>>2]=F,d()[r+4>>>2]=D),t&&(d()[t>>>2]=H,d()[t+4>>>2]=z),n&&(d()[n>>>2]=Z,d()[n+4>>>2]=Q),u}catch($e){if(typeof o>"u"||$e.name!=="ErrnoError")throw $e;return-$e.errno}}var G={mount:function(e){return s.websocket=s.websocket&&typeof s.websocket=="object"?s.websocket:{},s.websocket._callbacks={},s.websocket.on=function(r,t){return typeof t=="function"&&(this._callbacks[r]=t),this},s.websocket.emit=function(r,t){typeof this._callbacks[r]=="function"&&this._callbacks[r].call(this,t)},o.createNode(null,"/",16895,0)},createSocket:function(e,r,t){r&=-526337;var n=r==1;if(n&&t&&t!=6)throw new o.ErrnoError(66);var i={family:e,type:r,protocol:t,server:null,error:null,peers:{},pending:[],recv_queue:[],sock_ops:G.websocket_sock_ops},u=G.nextname(),l=o.createNode(G.root,u,49152,0);l.sock=i;var c=o.createStream({path:u,node:l,flags:2,seekable:!1,stream_ops:G.stream_ops});return i.stream=c,i},getSocket:function(e){var r=o.getStream(e);return!r||!o.isSocket(r.node.mode)?null:r.node.sock},stream_ops:{poll:function(e){var r=e.node.sock;return r.sock_ops.poll(r)},ioctl:function(e,r,t){var n=e.node.sock;return n.sock_ops.ioctl(n,r,t)},read:function(e,r,t,n,i){var u=e.node.sock,l=u.sock_ops.recvmsg(u,n);return l?(r.set(l.buffer,t),l.buffer.length):0},write:function(e,r,t,n,i){var u=e.node.sock;return u.sock_ops.sendmsg(u,r,t,n)},close:function(e){var r=e.node.sock;r.sock_ops.close(r)}},nextname:function(){return G.nextname.current||(G.nextname.current=0),"socket["+G.nextname.current+++"]"},websocket_sock_ops:{createPeer:function(e,r,t){var n;if(typeof r=="object"&&(n=r,r=null,t=null),n)if(n._socket)r=n._socket.remoteAddress,t=n._socket.remotePort;else{var i=/ws[s]?:\/\/([^:]+):(\d+)/.exec(n.url);if(!i)throw new Error("WebSocket URL must be in the format ws(s)://address:port");r=i[1],t=parseInt(i[2],10)}else try{var u=s.websocket&&typeof s.websocket=="object",l="ws:#".replace("#","//");if(u&&typeof s.websocket.url=="string"&&(l=s.websocket.url),l==="ws://"||l==="wss://"){var c=r.split("/");l=l+c[0]+":"+t+"/"+c.slice(1).join("/")}var w="binary";u&&typeof s.websocket.subprotocol=="string"&&(w=s.websocket.subprotocol);var g=void 0;w!=="null"&&(w=w.replace(/^ +| +$/g,"").split(/ *, */),g=w),u&&s.websocket.subprotocol===null&&(w="null",g=void 0);var k;Y?k=Kr():k=WebSocket,n=new k(l,g),n.binaryType="arraybuffer"}catch(F){throw new o.ErrnoError(23)}var T={addr:r,port:t,socket:n,dgram_send_queue:[]};return G.websocket_sock_ops.addPeer(e,T),G.websocket_sock_ops.handlePeerEvents(e,T),e.type===2&&typeof e.sport<"u"&&T.dgram_send_queue.push(new Uint8Array([255,255,255,255,"p".charCodeAt(0),"o".charCodeAt(0),"r".charCodeAt(0),"t".charCodeAt(0),(e.sport&65280)>>8,e.sport&255])),T},getPeer:function(e,r,t){return e.peers[r+":"+t]},addPeer:function(e,r){e.peers[r.addr+":"+r.port]=r},removePeer:function(e,r){delete e.peers[r.addr+":"+r.port]},handlePeerEvents:function(e,r){var t=!0,n=function(){s.websocket.emit("open",e.stream.fd);try{for(var u=r.dgram_send_queue.shift();u;)r.socket.send(u),u=r.dgram_send_queue.shift()}catch(l){r.socket.close()}};function i(u){if(typeof u=="string"){var l=new TextEncoder;u=l.encode(u)}else{if(Te(u.byteLength!==void 0),u.byteLength==0)return;u=new Uint8Array(u)}var c=t;if(t=!1,c&&u.length===10&&u[0]===255&&u[1]===255&&u[2]===255&&u[3]===255&&u[4]==="p".charCodeAt(0)&&u[5]==="o".charCodeAt(0)&&u[6]==="r".charCodeAt(0)&&u[7]==="t".charCodeAt(0)){var w=u[8]<<8|u[9];G.websocket_sock_ops.removePeer(e,r),r.port=w,G.websocket_sock_ops.addPeer(e,r);return}e.recv_queue.push({addr:r.addr,port:r.port,data:u}),s.websocket.emit("message",e.stream.fd)}Y?(r.socket.on("open",n),r.socket.on("message",function(u,l){l&&i(new Uint8Array(u).buffer)}),r.socket.on("close",function(){s.websocket.emit("close",e.stream.fd)}),r.socket.on("error",function(u){e.error=14,s.websocket.emit("error",[e.stream.fd,e.error,"ECONNREFUSED: Connection refused"])})):(r.socket.onopen=n,r.socket.onclose=function(){s.websocket.emit("close",e.stream.fd)},r.socket.onmessage=function(l){i(l.data)},r.socket.onerror=function(u){e.error=14,s.websocket.emit("error",[e.stream.fd,e.error,"ECONNREFUSED: Connection refused"])})},poll:function(e){if(e.type===1&&e.server)return e.pending.length?65:0;var r=0,t=e.type===1?G.websocket_sock_ops.getPeer(e,e.daddr,e.dport):null;return(e.recv_queue.length||!t||t&&t.socket.readyState===t.socket.CLOSING||t&&t.socket.readyState===t.socket.CLOSED)&&(r|=65),(!t||t&&t.socket.readyState===t.socket.OPEN)&&(r|=4),(t&&t.socket.readyState===t.socket.CLOSING||t&&t.socket.readyState===t.socket.CLOSED)&&(r|=16),r},ioctl:function(e,r,t){switch(r){case 21531:var n=0;return e.recv_queue.length&&(n=e.recv_queue[0].data.length),d()[t>>>2]=n,0;default:return 28}},close:function(e){if(e.server){try{e.server.close()}catch(i){}e.server=null}for(var r=Object.keys(e.peers),t=0;t<r.length;t++){var n=e.peers[r[t]];try{n.socket.close()}catch(i){}G.websocket_sock_ops.removePeer(e,n)}return 0},bind:function(e,r,t){if(typeof e.saddr<"u"||typeof e.sport<"u")throw new o.ErrnoError(28);if(e.saddr=r,e.sport=t,e.type===2){e.server&&(e.server.close(),e.server=null);try{e.sock_ops.listen(e,0)}catch(n){if(n.name!=="ErrnoError"||n.errno!==138)throw n}}},connect:function(e,r,t){if(e.server)throw new o.ErrnoError(138);if(typeof e.daddr<"u"&&typeof e.dport<"u"){var n=G.websocket_sock_ops.getPeer(e,e.daddr,e.dport);if(n)throw n.socket.readyState===n.socket.CONNECTING?new o.ErrnoError(7):new o.ErrnoError(30)}var i=G.websocket_sock_ops.createPeer(e,r,t);throw e.daddr=i.addr,e.dport=i.port,new o.ErrnoError(26)},listen:function(e,r){if(!Y)throw new o.ErrnoError(138);if(e.server)throw new o.ErrnoError(28);var t=Kr().Server,n=e.saddr;e.server=new t({host:n,port:e.sport}),s.websocket.emit("listen",e.stream.fd),e.server.on("connection",function(i){if(e.type===1){var u=G.createSocket(e.family,e.type,e.protocol),l=G.websocket_sock_ops.createPeer(u,i);u.daddr=l.addr,u.dport=l.port,e.pending.push(u),s.websocket.emit("connection",u.stream.fd)}else G.websocket_sock_ops.createPeer(e,i),s.websocket.emit("connection",e.stream.fd)}),e.server.on("close",function(){s.websocket.emit("close",e.stream.fd),e.server=null}),e.server.on("error",function(i){e.error=23,s.websocket.emit("error",[e.stream.fd,e.error,"EHOSTUNREACH: Host is unreachable"])})},accept:function(e){if(!e.server||!e.pending.length)throw new o.ErrnoError(28);var r=e.pending.shift();return r.stream.flags=e.stream.flags,r},getname:function(e,r){var t,n;if(r){if(e.daddr===void 0||e.dport===void 0)throw new o.ErrnoError(53);t=e.daddr,n=e.dport}else t=e.saddr||0,n=e.sport||0;return{addr:t,port:n}},sendmsg:function(e,r,t,n,i,u){if(e.type===2){if((i===void 0||u===void 0)&&(i=e.daddr,u=e.dport),i===void 0||u===void 0)throw new o.ErrnoError(17)}else i=e.daddr,u=e.dport;var l=G.websocket_sock_ops.getPeer(e,i,u);if(e.type===1){if(!l||l.socket.readyState===l.socket.CLOSING||l.socket.readyState===l.socket.CLOSED)throw new o.ErrnoError(53);if(l.socket.readyState===l.socket.CONNECTING)throw new o.ErrnoError(6)}ArrayBuffer.isView(r)&&(t+=r.byteOffset,r=r.buffer);var c;if(r instanceof SharedArrayBuffer?c=new Uint8Array(new Uint8Array(r.slice(t,t+n))).buffer:c=r.slice(t,t+n),e.type===2&&(!l||l.socket.readyState!==l.socket.OPEN))return(!l||l.socket.readyState===l.socket.CLOSING||l.socket.readyState===l.socket.CLOSED)&&(l=G.websocket_sock_ops.createPeer(e,i,u)),l.dgram_send_queue.push(c),n;try{return l.socket.send(c),n}catch(w){throw new o.ErrnoError(28)}},recvmsg:function(e,r){if(e.type===1&&e.server)throw new o.ErrnoError(53);var t=e.recv_queue.shift();if(!t){if(e.type===1){var n=G.websocket_sock_ops.getPeer(e,e.daddr,e.dport);if(!n)throw new o.ErrnoError(53);if(n.socket.readyState===n.socket.CLOSING||n.socket.readyState===n.socket.CLOSED)return null;throw new o.ErrnoError(6)}throw new o.ErrnoError(6)}var i=t.data.byteLength||t.data.length,u=t.data.byteOffset||0,l=t.data.buffer||t.data,c=Math.min(r,i),w={buffer:new Uint8Array(l,u,c),addr:t.addr,port:t.port};if(e.type===1&&c<i){var g=i-c;t.data=new Uint8Array(l,u+c,g),e.recv_queue.unshift(t)}return w}}};function Ue(e){var r=G.getSocket(e);if(!r)throw new o.ErrnoError(8);return r}function Uo(e){return d()[kn()>>>2]=e,e}function Rr(e){return(e&255)+"."+(e>>8&255)+"."+(e>>16&255)+"."+(e>>24&255)}function Ht(e){var r="",t=0,n=0,i=0,u=0,l=0,c=0,w=[e[0]&65535,e[0]>>16,e[1]&65535,e[1]>>16,e[2]&65535,e[2]>>16,e[3]&65535,e[3]>>16],g=!0,k="";for(c=0;c<5;c++)if(w[c]!==0){g=!1;break}if(g){if(k=Rr(w[6]|w[7]<<16),w[5]===-1)return r="::ffff:",r+=k,r;if(w[5]===0)return r="::",k==="0.0.0.0"&&(k=""),k==="0.0.0.1"&&(k="1"),r+=k,r}for(t=0;t<8;t++)w[t]===0&&(t-i>1&&(l=0),i=t,l++),l>n&&(n=l,u=t-n+1);for(t=0;t<8;t++){if(n>1&&w[t]===0&&t>=u&&t<u+n){t===u&&(r+=":",u===0&&(r+=":"));continue}r+=Number(Br(w[t]&65535)).toString(16),r+=t<7?":":""}return r}function Tt(e,r){var t=_()[e>>>1],n=Br(p()[e+2>>>1]),i;switch(t){case 2:if(r!==16)return{errno:28};i=d()[e+4>>>2],i=Rr(i);break;case 10:if(r!==28)return{errno:28};i=[d()[e+8>>>2],d()[e+12>>>2],d()[e+16>>>2],d()[e+20>>>2]],i=Ht(i);break;default:return{errno:5}}return{family:t,addr:i,port:n}}function Qe(e){for(var r=e.split("."),t=0;t<4;t++){var n=Number(r[t]);if(isNaN(n))return null;r[t]=n}return(r[0]|r[1]<<8|r[2]<<16|r[3]<<24)>>>0}function er(e){return parseInt(e)}function Mr(e){var r,t,n,i,u=/^((?=.*::)(?!.*::.+::)(::)?([\dA-F]{1,4}:(:|\b)|){5}|([\dA-F]{1,4}:){6})((([\dA-F]{1,4}((?!\3)::|:\b|$))|(?!\2\3)){2}|(((2[0-4]|1\d|[1-9])?\d|25[0-5])\.?\b){4})$/i,l=[];if(!u.test(e))return null;if(e==="::")return[0,0,0,0,0,0,0,0];for(e.startsWith("::")?e=e.replace("::","Z:"):e=e.replace("::",":Z:"),e.indexOf(".")>0?(e=e.replace(new RegExp("[.]","g"),":"),r=e.split(":"),r[r.length-4]=er(r[r.length-4])+er(r[r.length-3])*256,r[r.length-3]=er(r[r.length-2])+er(r[r.length-1])*256,r=r.slice(0,r.length-2)):r=e.split(":"),n=0,i=0,t=0;t<r.length;t++)if(typeof r[t]=="string")if(r[t]==="Z"){for(i=0;i<8-r.length+1;i++)l[t+i]=0;n=i-1}else l[t+n]=sr(parseInt(r[t],16));else l[t+n]=r[t];return[l[1]<<16|l[0],l[3]<<16|l[2],l[5]<<16|l[4],l[7]<<16|l[6]]}var me={address_map:{id:1,addrs:{},names:{}},lookup_name:function(e){var r=Qe(e);if(r!==null||(r=Mr(e),r!==null))return e;var t;if(me.address_map.addrs[e])t=me.address_map.addrs[e];else{var n=me.address_map.id++;Te(n<65535,"exceeded max address mappings of 65535"),t="172.29."+(n&255)+"."+(n&65280),me.address_map.names[t]=e,me.address_map.addrs[e]=t}return t},lookup_addr:function(e){return me.address_map.names[e]?me.address_map.names[e]:null}};function xr(e,r,t){if(t&&e===0)return null;var n=Tt(e,r);if(n.errno)throw new o.ErrnoError(n.errno);return n.addr=me.lookup_addr(n.addr)||n.addr,n}function Ct(e,r,t,n,i,u){if(x)return O(5,1,e,r,t,n,i,u);try{var l=Ue(e),c=xr(r,t);return l.sock_ops.bind(l,c.addr,c.port),0}catch(w){if(typeof o>"u"||w.name!=="ErrnoError")throw w;return-w.errno}}function Pt(e,r,t,n,i,u){if(x)return O(6,1,e,r,t,n,i,u);try{var l=Ue(e),c=xr(r,t);return l.sock_ops.connect(l,c.addr,c.port),0}catch(w){if(typeof o>"u"||w.name!=="ErrnoError")throw w;return-w.errno}}function Bt(e,r,t,n){if(x)return O(7,1,e,r,t,n);try{if(r=C.getStr(r),r=C.calculateAt(e,r),t&-8)return-28;var i=o.lookupPath(r,{follow:!0}),u=i.node;if(!u)return-44;var l="";return t&4&&(l+="r"),t&2&&(l+="w"),t&1&&(l+="x"),l&&o.nodePermissions(u,l)?-2:0}catch(c){if(typeof o>"u"||c.name!=="ErrnoError")throw c;return-c.errno}}function Ut(e,r,t){if(x)return O(8,1,e,r,t);C.varargs=t;try{var n=C.getStreamFromFD(e);switch(r){case 0:{var i=C.get();if(i<0)return-28;var u;return u=o.createStream(n,i),u.fd}case 1:case 2:return 0;case 3:return n.flags;case 4:{var i=C.get();return n.flags|=i,0}case 5:{var i=C.get(),l=0;return _()[i+l>>>1]=2,0}case 6:case 7:return 0;case 16:case 8:return-28;case 9:return Uo(28),-1;default:return-28}}catch(c){if(typeof o>"u"||c.name!=="ErrnoError")throw c;return-c.errno}}function Lt(e,r){if(x)return O(9,1,e,r);try{var t=C.getStreamFromFD(e);return C.doStat(o.stat,t.path,r)}catch(n){if(typeof o>"u"||n.name!=="ErrnoError")throw n;return-n.errno}}function rr(e,r){return r+2097152>>>0<4194305-!!e?(e>>>0)+r*4294967296:NaN}function Nt(e,r,t){if(x)return O(10,1,e,r,t);try{var n=rr(r,t);return isNaN(n)?-61:(o.ftruncate(e,n),0)}catch(i){if(typeof o>"u"||i.name!=="ErrnoError")throw i;return-i.errno}}function Oe(e,r,t){return Fr(e,m(),r,t)}function Ot(e,r,t){if(x)return O(11,1,e,r,t);try{var n=C.getStreamFromFD(e);n.getdents||(n.getdents=o.readdir(n.path));for(var i=280,u=0,l=o.llseek(n,0,1),c=Math.floor(l/i);c<n.getdents.length&&u+i<=t;){var w,g,k=n.getdents[c];if(k===".")w=n.node.id,g=4;else if(k===".."){var T=o.lookupPath(n.path,{parent:!0});w=T.node.id,g=4}else{var F=o.lookupNode(n.node,k);w=F.id,g=o.isChrdev(F.mode)?2:o.isDir(F.mode)?4:o.isLink(F.mode)?10:8}$=[w>>>0,(A=w,+Math.abs(A)>=1?A>0?+Math.floor(A/4294967296)>>>0:~~+Math.ceil((A-+(~~A>>>0))/4294967296)>>>0:0)],d()[r+u>>>2]=$[0],d()[r+u+4>>>2]=$[1],$=[(c+1)*i>>>0,(A=(c+1)*i,+Math.abs(A)>=1?A>0?+Math.floor(A/4294967296)>>>0:~~+Math.ceil((A-+(~~A>>>0))/4294967296)>>>0:0)],d()[r+u+8>>>2]=$[0],d()[r+u+12>>>2]=$[1],_()[r+u+16>>>1]=280,h()[r+u+18>>>0]=g,Oe(k,r+u+19,256),u+=i,c+=1}return o.llseek(n,c*i,0),u}catch(D){if(typeof o>"u"||D.name!=="ErrnoError")throw D;return-D.errno}}function Hr(e,r,t,n,i){switch(r){case 2:t=Qe(t),Er(e,16),i&&(d()[i>>>2]=16),_()[e>>>1]=r,d()[e+4>>>2]=t,_()[e+2>>>1]=sr(n);break;case 10:t=Mr(t),Er(e,28),i&&(d()[i>>>2]=28),d()[e>>>2]=r,d()[e+8>>>2]=t[0],d()[e+12>>>2]=t[1],d()[e+16>>>2]=t[2],d()[e+20>>>2]=t[3],_()[e+2>>>1]=sr(n);break;default:return 5}return 0}function It(e,r,t,n,i,u){if(x)return O(12,1,e,r,t,n,i,u);try{var l=Ue(e);if(!l.daddr)return-53;var c=Hr(r,l.family,me.lookup_name(l.daddr),l.dport,t);return 0}catch(w){if(typeof o>"u"||w.name!=="ErrnoError")throw w;return-w.errno}}function Wt(e,r,t,n,i,u){if(x)return O(13,1,e,r,t,n,i,u);try{var l=Ue(e);return r===1&&t===4?(d()[n>>>2]=l.error,d()[i>>>2]=4,l.error=null,0):-50}catch(c){if(typeof o>"u"||c.name!=="ErrnoError")throw c;return-c.errno}}function zt(e,r,t){if(x)return O(14,1,e,r,t);C.varargs=t;try{var n=C.getStreamFromFD(e);switch(r){case 21509:case 21505:return n.tty?0:-59;case 21510:case 21511:case 21512:case 21506:case 21507:case 21508:return n.tty?0:-59;case 21519:{if(!n.tty)return-59;var i=C.get();return d()[i>>>2]=0,0}case 21520:return n.tty?-28:-59;case 21531:{var i=C.get();return o.ioctl(n,r,i)}case 21523:return n.tty?0:-59;case 21524:return n.tty?0:-59;default:return-28}}catch(u){if(typeof o>"u"||u.name!=="ErrnoError")throw u;return-u.errno}}function Xt(e,r){if(x)return O(15,1,e,r);try{return e=C.getStr(e),C.doStat(o.lstat,e,r)}catch(t){if(typeof o>"u"||t.name!=="ErrnoError")throw t;return-t.errno}}function $t(e,r,t){if(x)return O(16,1,e,r,t);try{return r=C.getStr(r),r=C.calculateAt(e,r),r=q.normalize(r),r[r.length-1]==="/"&&(r=r.substr(0,r.length-1)),o.mkdir(r,t,0),0}catch(n){if(typeof o>"u"||n.name!=="ErrnoError")throw n;return-n.errno}}function qt(e,r,t,n){if(x)return O(17,1,e,r,t,n);try{r=C.getStr(r);var i=n&256,u=n&4096;return n=n&-6401,r=C.calculateAt(e,r,u),C.doStat(i?o.lstat:o.stat,r,t)}catch(l){if(typeof o>"u"||l.name!=="ErrnoError")throw l;return-l.errno}}function jt(e,r,t,n){if(x)return O(18,1,e,r,t,n);C.varargs=n;try{r=C.getStr(r),r=C.calculateAt(e,r);var i=n?C.get():0;return o.open(r,t,i).fd}catch(u){if(typeof o>"u"||u.name!=="ErrnoError")throw u;return-u.errno}}function Gt(e,r,t,n,i,u){if(x)return O(19,1,e,r,t,n,i,u);try{var l=Ue(e),c=l.sock_ops.recvmsg(l,t);if(!c)return 0;if(i)var w=Hr(i,l.family,me.lookup_name(c.addr),c.port,u);return m().set(c.buffer,r>>>0),c.buffer.byteLength}catch(g){if(typeof o>"u"||g.name!=="ErrnoError")throw g;return-g.errno}}function Kt(e,r,t,n){if(x)return O(20,1,e,r,t,n);try{return r=C.getStr(r),n=C.getStr(n),r=C.calculateAt(e,r),n=C.calculateAt(t,n),o.rename(r,n),0}catch(i){if(typeof o>"u"||i.name!=="ErrnoError")throw i;return-i.errno}}function Yt(e){if(x)return O(21,1,e);try{return e=C.getStr(e),o.rmdir(e),0}catch(r){if(typeof o>"u"||r.name!=="ErrnoError")throw r;return-r.errno}}function Vt(e,r,t,n,i,u){if(x)return O(22,1,e,r,t,n,i,u);try{var l=Ue(e),c=xr(i,u,!0);return c?l.sock_ops.sendmsg(l,h(),r,t,c.addr,c.port):o.write(l.stream,h(),r,t)}catch(w){if(typeof o>"u"||w.name!=="ErrnoError")throw w;return-w.errno}}function Jt(e,r,t){if(x)return O(23,1,e,r,t);try{var n=G.createSocket(e,r,t);return n.stream.fd}catch(i){if(typeof o>"u"||i.name!=="ErrnoError")throw i;return-i.errno}}function Zt(e,r){if(x)return O(24,1,e,r);try{return e=C.getStr(e),C.doStat(o.stat,e,r)}catch(t){if(typeof o>"u"||t.name!=="ErrnoError")throw t;return-t.errno}}function Qt(e,r,t){if(x)return O(25,1,e,r,t);try{return r=C.getStr(r),r=C.calculateAt(e,r),t===0?o.unlink(r):t===512?o.rmdir(r):X("Invalid flags passed to unlinkat"),0}catch(n){if(typeof o>"u"||n.name!=="ErrnoError")throw n;return-n.errno}}var Lo=!0;function No(){return Lo}function Oo(){if(!Ge())try{x?Lr(Re):Dr(Re)}catch(e){Ar(e)}}function Io(e){if(!qe)try{e(),Oo()}catch(r){Ar(r)}}function Tr(e){if(typeof Atomics.waitAsync=="function"){var r=Atomics.waitAsync(d(),e>>2,e);r.value.then(tr);var t=e+128;Atomics.store(d(),t>>2,1)}}s.__emscripten_thread_mailbox_await=Tr;function tr(){var e=ar();e&&(Tr(e),Io(()=>Dn()))}s.checkMailbox=tr;function Wo(e,r,t){if(e==r)setTimeout(()=>tr());else if(x)postMessage({targetThread:e,cmd:"checkMailbox"});else{var n=P.pthreads[e];if(!n)return;n.postMessage({cmd:"checkMailbox"})}}function zo(e,r,t){return-1}function Xo(e){Y&&P.pthreads[e].ref()}function $o(e){return b()[e>>>2]+d()[e+4>>>2]*4294967296}function Ie(e){return e%4===0&&(e%100!==0||e%400===0)}var qo=[0,31,60,91,121,152,182,213,244,274,305,335],jo=[0,31,59,90,120,151,181,212,243,273,304,334];function Go(e){var r=Ie(e.getFullYear()),t=r?qo:jo,n=t[e.getMonth()]+e.getDate()-1;return n}function Ko(e,r){var t=new Date($o(e)*1e3);d()[r>>>2]=t.getSeconds(),d()[r+4>>>2]=t.getMinutes(),d()[r+8>>>2]=t.getHours(),d()[r+12>>>2]=t.getDate(),d()[r+16>>>2]=t.getMonth(),d()[r+20>>>2]=t.getFullYear()-1900,d()[r+24>>>2]=t.getDay();var n=Go(t)|0;d()[r+28>>>2]=n,d()[r+36>>>2]=-(t.getTimezoneOffset()*60);var i=new Date(t.getFullYear(),0,1),u=new Date(t.getFullYear(),6,1).getTimezoneOffset(),l=i.getTimezoneOffset(),c=(u!=l&&t.getTimezoneOffset()==Math.min(l,u))|0;d()[r+32>>>2]=c}function en(e){var r=Ye(e)+1,t=ur(r);return t&&Oe(e,t,r),t}function Yo(e,r,t){var n=new Date().getFullYear(),i=new Date(n,0,1),u=new Date(n,6,1),l=i.getTimezoneOffset(),c=u.getTimezoneOffset(),w=Math.max(l,c);b()[e>>>2]=w*60,d()[r>>>2]=+(l!=c);function g(H){var z=H.toTimeString().match(/\(([A-Za-z ]+)\)$/);return z?z[1]:"GMT"}var k=g(i),T=g(u),F=en(k),D=en(T);c<l?(b()[t>>>2]=F,b()[t+4>>>2]=D):(b()[t>>>2]=D,b()[t+4>>>2]=F)}function Vo(){X("")}function Jo(e,r){X(At)}function Zo(e,r){return globalThis.DUCKDB_RUNTIME.createDirectory(s,e,r)}function Qo(e,r){return globalThis.DUCKDB_RUNTIME.checkDirectory(s,e,r)}function ea(e,r){return globalThis.DUCKDB_RUNTIME.listDirectoryEntries(s,e,r)}function ra(e,r){return globalThis.DUCKDB_RUNTIME.removeDirectory(s,e,r)}function ta(e){return globalThis.DUCKDB_RUNTIME.closeFile(s,e)}function na(e,r,t,n){return globalThis.DUCKDB_RUNTIME.checkFile(s,e,r,t,n)}function oa(e){return globalThis.DUCKDB_RUNTIME.getLastFileModificationTime(s,e)}function aa(e,r,t,n){return globalThis.DUCKDB_RUNTIME.moveFile(s,e,r,t,n)}function ia(e,r){return globalThis.DUCKDB_RUNTIME.openFile(s,e,r)}function sa(e,r,t,n){return globalThis.DUCKDB_RUNTIME.readFile(s,e,r,t,n)}function ua(e,r){return globalThis.DUCKDB_RUNTIME.truncateFile(s,e,r)}function la(e,r,t,n){return globalThis.DUCKDB_RUNTIME.writeFile(s,e,r,t,n)}function fa(e){return globalThis.DUCKDB_RUNTIME.getDefaultDataProtocol(e)}function ca(e,r){return globalThis.DUCKDB_RUNTIME.glob(s,e,r)}function da(e){return globalThis.DUCKDB_RUNTIME.testPlatformFeature(s,e)}function _a(e,r,t,n,i,u){return globalThis.DUCKDB_RUNTIME.callScalarUDF(s,e,r,t,n,i,u)}function ha(){}function ma(){return Date.now()}function pa(){_t+=1}function ba(){throw pa(),"unwind"}function rn(){return 4294901760}function wa(){return rn()}var tn;Y&&(global.performance=Gr().performance),tn=()=>performance.timeOrigin+performance.now();function va(){return Y?In().cpus().length:navigator.hardwareConcurrency}function ya(e){var r=lr(),t=e();return ze(r),t}function O(e,r){var t=arguments.length-2,n=arguments;return ya(()=>{for(var i=t,u=Xe(i*8),l=u>>3,c=0;c<t;c++){var w=n[2+c];v()[l+c>>>0]=w}return Sn(e,i,u,r)})}var Cr=[];function ga(e,r,t){Cr.length=r;for(var n=t>>3,i=0;i<r;i++)Cr[i]=v()[n+i>>>0];var u=ja[e];return u.apply(null,Cr)}function Ea(e){var r=ne.buffer,t=e-r.byteLength+65535>>>16;try{return ne.grow(t),ye(),1}catch(n){}}function ka(e){var r=m().length;if(e=e>>>0,e<=r)return!1;var t=rn();if(e>t)return!1;for(var n=(w,g)=>w+(g-w%g)%g,i=1;i<=4;i*=2){var u=r*(1+.2/i);u=Math.min(u,e+100663296);var l=Math.min(t,n(Math.max(e,u),65536)),c=Ea(l);if(c)return!0}return!1}var Pr={};function Fa(){return oe||"./this.program"}function We(){if(!We.strings){var e=(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",r={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:e,_:Fa()};for(var t in Pr)Pr[t]===void 0?delete r[t]:r[t]=Pr[t];var n=[];for(var t in r)n.push("".concat(t,"=").concat(r[t]));We.strings=n}return We.strings}function Sa(e,r){for(var t=0;t<e.length;++t)h()[r++>>>0]=e.charCodeAt(t);h()[r>>>0]=0}function nn(e,r){if(x)return O(26,1,e,r);var t=0;return We().forEach(function(n,i){var u=r+t;b()[e+i*4>>>2]=u,Sa(n,u),t+=n.length+1}),0}function on(e,r){if(x)return O(27,1,e,r);var t=We();b()[e>>>2]=t.length;var n=0;return t.forEach(function(i){n+=i.length+1}),b()[r>>>2]=n,0}function an(e){if(x)return O(28,1,e);try{var r=C.getStreamFromFD(e);return o.close(r),0}catch(t){if(typeof o>"u"||t.name!=="ErrnoError")throw t;return t.errno}}function sn(e,r){if(x)return O(29,1,e,r);try{var t=0,n=0,i=0,u=C.getStreamFromFD(e),l=u.tty?2:o.isDir(u.mode)?3:o.isLink(u.mode)?7:4;return h()[r>>>0]=l,_()[r+2>>>1]=i,$=[t>>>0,(A=t,+Math.abs(A)>=1?A>0?+Math.floor(A/4294967296)>>>0:~~+Math.ceil((A-+(~~A>>>0))/4294967296)>>>0:0)],d()[r+8>>>2]=$[0],d()[r+12>>>2]=$[1],$=[n>>>0,(A=n,+Math.abs(A)>=1?A>0?+Math.floor(A/4294967296)>>>0:~~+Math.ceil((A-+(~~A>>>0))/4294967296)>>>0:0)],d()[r+16>>>2]=$[0],d()[r+20>>>2]=$[1],0}catch(c){if(typeof o>"u"||c.name!=="ErrnoError")throw c;return c.errno}}function un(e,r,t,n){for(var i=0,u=0;u<t;u++){var l=b()[r>>>2],c=b()[r+4>>>2];r+=8;var w=o.read(e,h(),l,c,n);if(w<0)return-1;if(i+=w,w<c)break;typeof n<"u"&&(n+=w)}return i}function ln(e,r,t,n,i,u){if(x)return O(30,1,e,r,t,n,i,u);try{var l=rr(n,i);if(isNaN(l))return 61;var c=C.getStreamFromFD(e),w=un(c,r,t,l);return b()[u>>>2]=w,0}catch(g){if(typeof o>"u"||g.name!=="ErrnoError")throw g;return g.errno}}function fn(e,r,t,n){for(var i=0,u=0;u<t;u++){var l=b()[r>>>2],c=b()[r+4>>>2];r+=8;var w=o.write(e,h(),l,c,n);if(w<0)return-1;i+=w,typeof n<"u"&&(n+=w)}return i}function cn(e,r,t,n,i,u){if(x)return O(31,1,e,r,t,n,i,u);try{var l=rr(n,i);if(isNaN(l))return 61;var c=C.getStreamFromFD(e),w=fn(c,r,t,l);return b()[u>>>2]=w,0}catch(g){if(typeof o>"u"||g.name!=="ErrnoError")throw g;return g.errno}}function dn(e,r,t,n){if(x)return O(32,1,e,r,t,n);try{var i=C.getStreamFromFD(e),u=un(i,r,t);return b()[n>>>2]=u,0}catch(l){if(typeof o>"u"||l.name!=="ErrnoError")throw l;return l.errno}}function _n(e,r,t,n,i){if(x)return O(33,1,e,r,t,n,i);try{var u=rr(r,t);if(isNaN(u))return 61;var l=C.getStreamFromFD(e);return o.llseek(l,u,n),$=[l.position>>>0,(A=l.position,+Math.abs(A)>=1?A>0?+Math.floor(A/4294967296)>>>0:~~+Math.ceil((A-+(~~A>>>0))/4294967296)>>>0:0)],d()[i>>>2]=$[0],d()[i+4>>>2]=$[1],l.getdents&&u===0&&n===0&&(l.getdents=null),0}catch(c){if(typeof o>"u"||c.name!=="ErrnoError")throw c;return c.errno}}function hn(e){if(x)return O(34,1,e);try{var r=C.getStreamFromFD(e);return r.stream_ops&&r.stream_ops.fsync?r.stream_ops.fsync(r):0}catch(t){if(typeof o>"u"||t.name!=="ErrnoError")throw t;return t.errno}}function mn(e,r,t,n){if(x)return O(35,1,e,r,t,n);try{var i=C.getStreamFromFD(e),u=fn(i,r,t);return b()[n>>>2]=u,0}catch(l){if(typeof o>"u"||l.name!=="ErrnoError")throw l;return l.errno}}function pn(e,r,t,n){if(x)return O(36,1,e,r,t,n);var i=0,u=0,l=0,c=0,w=0,g=0,k;function T(F,D,H,z,Z,Q){var y,R,W,L;return R=F===10?28:16,Z=F===10?Ht(Z):Rr(Z),y=ur(R),L=Hr(y,F,Z,Q),Te(!L),W=ur(32),d()[W+4>>>2]=F,d()[W+8>>>2]=D,d()[W+12>>>2]=H,b()[W+24>>>2]=z,b()[W+20>>>2]=y,F===10?d()[W+16>>>2]=28:d()[W+16>>>2]=16,d()[W+28>>>2]=0,W}if(t&&(l=d()[t>>>2],c=d()[t+4>>>2],w=d()[t+8>>>2],g=d()[t+12>>>2]),w&&!g&&(g=w===2?17:6),!w&&g&&(w=g===17?2:1),g===0&&(g=6),w===0&&(w=1),!e&&!r)return-2;if(l&-1088||t!==0&&d()[t>>>2]&2&&!e)return-1;if(l&32)return-2;if(w!==0&&w!==1&&w!==2)return-7;if(c!==0&&c!==2&&c!==10)return-6;if(r&&(r=Be(r),u=parseInt(r,10),isNaN(u)))return l&1024?-2:-8;if(!e)return c===0&&(c=2),l&1||(c===2?i=ir(2130706433):i=[0,0,0,1]),k=T(c,w,g,null,i,u),b()[n>>>2]=k,0;if(e=Be(e),i=Qe(e),i!==null)if(c===0||c===2)c=2;else if(c===10&&l&8)i=[0,0,ir(65535),i],c=10;else return-2;else if(i=Mr(e),i!==null)if(c===0||c===10)c=10;else return-2;return i!=null?(k=T(c,w,g,e,i,u),b()[n>>>2]=k,0):l&4?-2:(e=me.lookup_name(e),i=Qe(e),c===0?c=2:c===10&&(i=[0,0,ir(65535),i]),k=T(c,w,g,null,i,u),b()[n>>>2]=k,0)}function Da(e,r){return kr(m().subarray(e>>>0,e+r>>>0)),0}function Aa(e,r,t,n,i,u,l){var c=Tt(e,r);if(c.errno)return-6;var w=c.port,g=c.addr,k=!1;if(t&&n){var T;if(l&1||!(T=me.lookup_addr(g))){if(l&8)return-2}else g=T;var F=Oe(g,t,n);F+1>=n&&(k=!0)}if(i&&u){w=""+w;var F=Oe(w,i,u);F+1>=u&&(k=!0)}return k?-12:0}function Ra(e,r){for(var t=0,n=0;n<=r;t+=e[n++]);return t}var bn=[31,29,31,30,31,30,31,31,30,31,30,31],wn=[31,28,31,30,31,30,31,31,30,31,30,31];function Ma(e,r){for(var t=new Date(e.getTime());r>0;){var n=Ie(t.getFullYear()),i=t.getMonth(),u=(n?bn:wn)[i];if(r>u-t.getDate())r-=u-t.getDate()+1,t.setDate(1),i<11?t.setMonth(i+1):(t.setMonth(0),t.setFullYear(t.getFullYear()+1));else return t.setDate(t.getDate()+r),t}return t}function vn(e,r){h().set(e,r>>>0)}function xa(e,r,t,n){var i=d()[n+40>>>2],u={tm_sec:d()[n>>>2],tm_min:d()[n+4>>>2],tm_hour:d()[n+8>>>2],tm_mday:d()[n+12>>>2],tm_mon:d()[n+16>>>2],tm_year:d()[n+20>>>2],tm_wday:d()[n+24>>>2],tm_yday:d()[n+28>>>2],tm_isdst:d()[n+32>>>2],tm_gmtoff:d()[n+36>>>2],tm_zone:i?Be(i):""},l=Be(t),c={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var w in c)l=l.replace(new RegExp(w,"g"),c[w]);var g=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],k=["January","February","March","April","May","June","July","August","September","October","November","December"];function T(y,R,W){for(var L=typeof y=="number"?y.toString():y||"";L.length<R;)L=W[0]+L;return L}function F(y,R){return T(y,R,"0")}function D(y,R){function W(J){return J<0?-1:J>0?1:0}var L;return(L=W(y.getFullYear()-R.getFullYear()))===0&&(L=W(y.getMonth()-R.getMonth()))===0&&(L=W(y.getDate()-R.getDate())),L}function H(y){switch(y.getDay()){case 0:return new Date(y.getFullYear()-1,11,29);case 1:return y;case 2:return new Date(y.getFullYear(),0,3);case 3:return new Date(y.getFullYear(),0,2);case 4:return new Date(y.getFullYear(),0,1);case 5:return new Date(y.getFullYear()-1,11,31);case 6:return new Date(y.getFullYear()-1,11,30)}}function z(y){var R=Ma(new Date(y.tm_year+1900,0,1),y.tm_yday),W=new Date(R.getFullYear(),0,4),L=new Date(R.getFullYear()+1,0,4),J=H(W),V=H(L);return D(J,R)<=0?D(V,R)<=0?R.getFullYear()+1:R.getFullYear():R.getFullYear()-1}var Z={"%a":function(y){return g[y.tm_wday].substring(0,3)},"%A":function(y){return g[y.tm_wday]},"%b":function(y){return k[y.tm_mon].substring(0,3)},"%B":function(y){return k[y.tm_mon]},"%C":function(y){var R=y.tm_year+1900;return F(R/100|0,2)},"%d":function(y){return F(y.tm_mday,2)},"%e":function(y){return T(y.tm_mday,2," ")},"%g":function(y){return z(y).toString().substring(2)},"%G":function(y){return z(y)},"%H":function(y){return F(y.tm_hour,2)},"%I":function(y){var R=y.tm_hour;return R==0?R=12:R>12&&(R-=12),F(R,2)},"%j":function(y){return F(y.tm_mday+Ra(Ie(y.tm_year+1900)?bn:wn,y.tm_mon-1),3)},"%m":function(y){return F(y.tm_mon+1,2)},"%M":function(y){return F(y.tm_min,2)},"%n":function(){return"\n"},"%p":function(y){return y.tm_hour>=0&&y.tm_hour<12?"AM":"PM"},"%S":function(y){return F(y.tm_sec,2)},"%t":function(){return"	"},"%u":function(y){return y.tm_wday||7},"%U":function(y){var R=y.tm_yday+7-y.tm_wday;return F(Math.floor(R/7),2)},"%V":function(y){var R=Math.floor((y.tm_yday+7-(y.tm_wday+6)%7)/7);if((y.tm_wday+371-y.tm_yday-2)%7<=2&&R++,R){if(R==53){var L=(y.tm_wday+371-y.tm_yday)%7;L!=4&&(L!=3||!Ie(y.tm_year))&&(R=1)}}else{R=52;var W=(y.tm_wday+7-y.tm_yday-1)%7;(W==4||W==5&&Ie(y.tm_year%400-1))&&R++}return F(R,2)},"%w":function(y){return y.tm_wday},"%W":function(y){var R=y.tm_yday+7-(y.tm_wday+6)%7;return F(Math.floor(R/7),2)},"%y":function(y){return(y.tm_year+1900).toString().substring(2)},"%Y":function(y){return y.tm_year+1900},"%z":function(y){var R=y.tm_gmtoff,W=R>=0;return R=Math.abs(R)/60,R=R/60*100+R%60,(W?"+":"-")+("0000"+R).slice(-4)},"%Z":function(y){return y.tm_zone},"%%":function(){return"%"}};l=l.replace(/%%/g,"\0\0");for(var w in Z)l.includes(w)&&(l=l.replace(new RegExp(w,"g"),Z[w](u)));l=l.replace(/\0\0/g,"%");var Q=Ve(l,!1);return Q.length>r?0:(vn(Q,e),Q.length-1)}function Ha(e,r,t,n,i){return xa(e,r,t,n)}function Ta(){S("missing function: unzClose"),X(-1)}function Ca(){S("missing function: unzCloseCurrentFile"),X(-1)}function Pa(){S("missing function: unzGetCurrentFileInfo"),X(-1)}function Ba(){S("missing function: unzGetCurrentFileInfo64"),X(-1)}function Ua(){S("missing function: unzGetGlobalInfo"),X(-1)}function La(){S("missing function: unzGoToFirstFile"),X(-1)}function Na(){S("missing function: unzGoToNextFile"),X(-1)}function Oa(){S("missing function: unzLocateFile"),X(-1)}function Ia(){S("missing function: unzOpen2"),X(-1)}function Wa(){S("missing function: unzOpenCurrentFile"),X(-1)}function za(){S("missing function: unzReadCurrentFile"),X(-1)}function Xa(e){var r=s["_"+e];return r}function $a(e){var r=Ye(e)+1,t=Xe(r);return Oe(e,t,r),t}function qa(e,r,t,n,i){var u={string:H=>{var z=0;return H!=null&&H!==0&&(z=$a(H)),z},array:H=>{var z=Xe(H.length);return vn(H,z),z}};function l(H){return r==="string"?Be(H):r==="boolean"?!!H:H}var c=Xa(e),w=[],g=0;if(n)for(var k=0;k<n.length;k++){var T=u[t[k]];T?(g===0&&(g=lr()),w[k]=T(n[k])):w[k]=n[k]}var F=c.apply(null,w);function D(H){return g!==0&&ze(g),l(H)}return F=D(F),F}P.init();var yn=function(e,r,t,n){e||(e=this),this.parent=e,this.mount=e.mount,this.mounted=null,this.id=o.nextInode++,this.name=r,this.mode=t,this.node_ops={},this.stream_ops={},this.rdev=n},nr=365,or=146;Object.defineProperties(yn.prototype,{read:{get:function(){return(this.mode&nr)===nr},set:function(e){e?this.mode|=nr:this.mode&=~nr}},write:{get:function(){return(this.mode&or)===or},set:function(e){e?this.mode|=or:this.mode&=~or}},isFolder:{get:function(){return o.isDir(this.mode)}},isDevice:{get:function(){return o.isChrdev(this.mode)}}}),o.FSNode=yn,o.createPreloadedFile=po,o.staticInit();var ja=[null,Ft,Dt,Rt,xt,Ct,Pt,Bt,Ut,Lt,Nt,Ot,It,Wt,zt,Xt,$t,qt,jt,Gt,Kt,Yt,Vt,Jt,Zt,Qt,nn,on,an,sn,ln,cn,dn,_n,hn,mn,pn],Ga={h:Eo,U:ko,W:Fo,m:So,o:Do,d:Ao,A:Ro,g:Mo,b:xo,n:Ho,j:To,Ea:Co,X:Po,L:Bo,Ha:Mt,ya:xt,Ca:Ct,Ba:Pt,ua:Bt,e:Ut,ta:Lt,O:Nt,oa:Ot,wa:It,xa:Wt,J:zt,qa:Xt,pa:$t,ra:qt,K:jt,za:Gt,la:Kt,D:Yt,Aa:Vt,G:Jt,sa:Zt,E:Qt,Qa:No,Da:Wo,ma:zo,V:Tr,S:Xo,Y:Ko,Z:Yo,f:Vo,Fa:Jo,da:Zo,fa:Qo,ba:ea,ca:ra,C:ta,$:na,N:oa,aa,ha:ia,p:sa,ga:ua,u:la,ia:fa,_:ca,B:da,ja:_a,F:ha,M:ma,Pa:ba,Ia:wa,c:tn,Ja:va,ea:ga,Oa:ka,La:nn,Ma:on,Ga:Dr,k:an,Na:sn,Q:ln,P:cn,I:dn,R:_n,na:hn,v:mn,H:pn,ka:Da,va:Aa,a:ne||s.wasmMemory,Ka:Ha,i:Ta,t:Ca,y:Pa,q:Ba,T:Ua,z:La,x:Na,s:Oa,w:Ia,r:Wa,l:za},as=so(),Ka=function(){return(Ka=s.asm.Ra).apply(null,arguments)},gn=s._main=function(){return(gn=s._main=s.asm.Sa).apply(null,arguments)},Ya=s._duckdb_web_fs_glob_add_path=function(){return(Ya=s._duckdb_web_fs_glob_add_path=s.asm.Ua).apply(null,arguments)},Va=s._duckdb_web_clear_response=function(){return(Va=s._duckdb_web_clear_response=s.asm.Va).apply(null,arguments)},Ja=s._duckdb_web_fail_with=function(){return(Ja=s._duckdb_web_fail_with=s.asm.Wa).apply(null,arguments)},Za=s._duckdb_web_reset=function(){return(Za=s._duckdb_web_reset=s.asm.Xa).apply(null,arguments)},Qa=s._duckdb_web_connect=function(){return(Qa=s._duckdb_web_connect=s.asm.Ya).apply(null,arguments)},ei=s._duckdb_web_disconnect=function(){return(ei=s._duckdb_web_disconnect=s.asm.Za).apply(null,arguments)},ri=s._duckdb_web_flush_files=function(){return(ri=s._duckdb_web_flush_files=s.asm._a).apply(null,arguments)},ti=s._duckdb_web_flush_file=function(){return(ti=s._duckdb_web_flush_file=s.asm.$a).apply(null,arguments)},ni=s._duckdb_web_open=function(){return(ni=s._duckdb_web_open=s.asm.ab).apply(null,arguments)},oi=s._duckdb_web_get_global_file_info=function(){return(oi=s._duckdb_web_get_global_file_info=s.asm.bb).apply(null,arguments)},ai=s._duckdb_web_collect_file_stats=function(){return(ai=s._duckdb_web_collect_file_stats=s.asm.cb).apply(null,arguments)},ii=s._duckdb_web_export_file_stats=function(){return(ii=s._duckdb_web_export_file_stats=s.asm.db).apply(null,arguments)},si=s._duckdb_web_fs_drop_file=function(){return(si=s._duckdb_web_fs_drop_file=s.asm.eb).apply(null,arguments)},ui=s._duckdb_web_fs_drop_files=function(){return(ui=s._duckdb_web_fs_drop_files=s.asm.fb).apply(null,arguments)},li=s._duckdb_web_fs_glob_file_infos=function(){return(li=s._duckdb_web_fs_glob_file_infos=s.asm.gb).apply(null,arguments)},fi=s._duckdb_web_fs_get_file_info_by_id=function(){return(fi=s._duckdb_web_fs_get_file_info_by_id=s.asm.hb).apply(null,arguments)},ci=s._duckdb_web_fs_get_file_info_by_name=function(){return(ci=s._duckdb_web_fs_get_file_info_by_name=s.asm.ib).apply(null,arguments)},di=s._duckdb_web_fs_register_file_url=function(){return(di=s._duckdb_web_fs_register_file_url=s.asm.jb).apply(null,arguments)},_i=s._duckdb_web_fs_register_file_buffer=function(){return(_i=s._duckdb_web_fs_register_file_buffer=s.asm.kb).apply(null,arguments)},hi=s._duckdb_web_copy_file_to_buffer=function(){return(hi=s._duckdb_web_copy_file_to_buffer=s.asm.lb).apply(null,arguments)},mi=s._duckdb_web_copy_file_to_path=function(){return(mi=s._duckdb_web_copy_file_to_path=s.asm.mb).apply(null,arguments)},pi=s._duckdb_web_get_version=function(){return(pi=s._duckdb_web_get_version=s.asm.nb).apply(null,arguments)},bi=s._duckdb_web_get_feature_flags=function(){return(bi=s._duckdb_web_get_feature_flags=s.asm.ob).apply(null,arguments)},wi=s._duckdb_web_tokenize=function(){return(wi=s._duckdb_web_tokenize=s.asm.pb).apply(null,arguments)},vi=s._duckdb_web_udf_scalar_create=function(){return(vi=s._duckdb_web_udf_scalar_create=s.asm.qb).apply(null,arguments)},yi=s._duckdb_web_prepared_create=function(){return(yi=s._duckdb_web_prepared_create=s.asm.rb).apply(null,arguments)},gi=s._duckdb_web_prepared_close=function(){return(gi=s._duckdb_web_prepared_close=s.asm.sb).apply(null,arguments)},Ei=s._duckdb_web_prepared_run=function(){return(Ei=s._duckdb_web_prepared_run=s.asm.tb).apply(null,arguments)},ki=s._duckdb_web_prepared_send=function(){return(ki=s._duckdb_web_prepared_send=s.asm.ub).apply(null,arguments)},Fi=s._duckdb_web_query_run=function(){return(Fi=s._duckdb_web_query_run=s.asm.vb).apply(null,arguments)},Si=s._duckdb_web_pending_query_start=function(){return(Si=s._duckdb_web_pending_query_start=s.asm.wb).apply(null,arguments)},Di=s._duckdb_web_pending_query_poll=function(){return(Di=s._duckdb_web_pending_query_poll=s.asm.xb).apply(null,arguments)},Ai=s._duckdb_web_pending_query_cancel=function(){return(Ai=s._duckdb_web_pending_query_cancel=s.asm.yb).apply(null,arguments)},Ri=s._duckdb_web_query_fetch_results=function(){return(Ri=s._duckdb_web_query_fetch_results=s.asm.zb).apply(null,arguments)},Mi=s._duckdb_web_get_tablenames=function(){return(Mi=s._duckdb_web_get_tablenames=s.asm.Ab).apply(null,arguments)},xi=s._duckdb_web_insert_arrow_from_ipc_stream=function(){return(xi=s._duckdb_web_insert_arrow_from_ipc_stream=s.asm.Bb).apply(null,arguments)},Hi=s._duckdb_web_insert_csv_from_path=function(){return(Hi=s._duckdb_web_insert_csv_from_path=s.asm.Cb).apply(null,arguments)},Ti=s._duckdb_web_insert_json_from_path=function(){return(Ti=s._duckdb_web_insert_json_from_path=s.asm.Db).apply(null,arguments)},Ci=s.__emscripten_tls_init=function(){return(Ci=s.__emscripten_tls_init=s.asm.Eb).apply(null,arguments)},ar=s._pthread_self=function(){return(ar=s._pthread_self=s.asm.Fb).apply(null,arguments)},En=function(){return(En=s.asm.Gb).apply(null,arguments)},kn=function(){return(kn=s.asm.Hb).apply(null,arguments)},Fn=s.__emscripten_thread_init=function(){return(Fn=s.__emscripten_thread_init=s.asm.Ib).apply(null,arguments)},Pi=s.__emscripten_thread_crashed=function(){return(Pi=s.__emscripten_thread_crashed=s.asm.Jb).apply(null,arguments)},ir=function(){return(ir=s.asm.Kb).apply(null,arguments)},sr=function(){return(sr=s.asm.Lb).apply(null,arguments)},Bi=function(){return(Bi=s.asm.emscripten_main_runtime_thread_id).apply(null,arguments)},Ui=function(){return(Ui=s.asm.emscripten_main_thread_process_queued_calls).apply(null,arguments)},Sn=function(){return(Sn=s.asm.Mb).apply(null,arguments)},Li=function(){return(Li=s.asm.emscripten_dispatch_to_thread_).apply(null,arguments)},Br=function(){return(Br=s.asm.Nb).apply(null,arguments)},Ur=function(){return(Ur=s.asm.Ob).apply(null,arguments)},Lr=s.__emscripten_thread_exit=function(){return(Lr=s.__emscripten_thread_exit=s.asm.Pb).apply(null,arguments)},Dn=s.__emscripten_check_mailbox=function(){return(Dn=s.__emscripten_check_mailbox=s.asm.Qb).apply(null,arguments)},ur=s._malloc=function(){return(ur=s._malloc=s.asm.Rb).apply(null,arguments)},Ni=s._free=function(){return(Ni=s._free=s.asm.Sb).apply(null,arguments)},An=function(){return(An=s.asm.Tb).apply(null,arguments)},Rn=function(){return(Rn=s.asm.Ub).apply(null,arguments)},lr=function(){return(lr=s.asm.Vb).apply(null,arguments)},ze=function(){return(ze=s.asm.Wb).apply(null,arguments)},Xe=function(){return(Xe=s.asm.Xb).apply(null,arguments)};s.keepRuntimeAlive=Ge,s.wasmMemory=ne,s.stackAlloc=Xe,s.stackSave=lr,s.stackRestore=ze,s.ccall=qa,s.ExitStatus=yr,s.PThread=P;var fr;Le=function e(){fr||Mn(),fr||(Le=e)};function Oi(){var e=gn,r=0,t=0;try{var n=e(r,t);return St(n,!0),n}catch(i){return Ar(i)}}function Mn(){if(Me>0)return;if(x){E(s),ht(),startWorker(s);return}if(Qn(),Me>0)return;function e(){fr||(fr=!0,s.calledRun=!0,!qe&&(ht(),eo(),E(s),s.onRuntimeInitialized&&s.onRuntimeInitialized(),xn&&Oi(),ro()))}s.setStatus?(s.setStatus("Running..."),setTimeout(function(){setTimeout(function(){s.setStatus("")},1),e()},1)):e()}if(s.preInit)for(typeof s.preInit=="function"&&(s.preInit=[s.preInit]);s.preInit.length>0;)s.preInit.pop()();var xn=!0;return s.noInitialRun&&(xn=!1),Mn(),f.ready}})();typeof dr=="object"&&typeof Vr=="object"?Vr.exports=Yr:typeof define=="function"&&define.amd?define([],function(){return Yr}):typeof dr=="object"&&(dr.DuckDB=Yr)});var zn=Fe((exports,module)=>{(function(){"use strict";var ERROR="input is invalid type",WINDOW=typeof window=="object",root=WINDOW?window:{};root.JS_SHA256_NO_WINDOW&&(WINDOW=!1);var WEB_WORKER=!WINDOW&&typeof self=="object",NODE_JS=!root.JS_SHA256_NO_NODE_JS&&typeof process=="object"&&process.versions&&process.versions.node;NODE_JS?root=global:WEB_WORKER&&(root=self);var COMMON_JS=!root.JS_SHA256_NO_COMMON_JS&&typeof module=="object"&&module.exports,AMD=typeof define=="function"&&define.amd,ARRAY_BUFFER=!root.JS_SHA256_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",HEX_CHARS="0123456789abcdef".split(""),EXTRA=[-2147483648,8388608,32768,128],SHIFT=[24,16,8,0],K=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],OUTPUT_TYPES=["hex","array","digest","arrayBuffer"],blocks=[];(root.JS_SHA256_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(a){return Object.prototype.toString.call(a)==="[object Array]"}),ARRAY_BUFFER&&(root.JS_SHA256_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(a){return typeof a=="object"&&a.buffer&&a.buffer.constructor===ArrayBuffer});var createOutputMethod=function(a,f){return function(h){return new Sha256(f,!0).update(h)[a]()}},createMethod=function(a){var f=createOutputMethod("hex",a);NODE_JS&&(f=nodeWrap(f,a)),f.create=function(){return new Sha256(a)},f.update=function(_){return f.create().update(_)};for(var h=0;h<OUTPUT_TYPES.length;++h){var m=OUTPUT_TYPES[h];f[m]=createOutputMethod(m,a)}return f},nodeWrap=function(method,is224){var crypto=eval("require('crypto')"),Buffer=eval("require('buffer').Buffer"),algorithm=is224?"sha224":"sha256",nodeMethod=function(a){if(typeof a=="string")return crypto.createHash(algorithm).update(a,"utf8").digest("hex");if(a==null)throw new Error(ERROR);return a.constructor===ArrayBuffer&&(a=new Uint8Array(a)),Array.isArray(a)||ArrayBuffer.isView(a)||a.constructor===Buffer?crypto.createHash(algorithm).update(new Buffer(a)).digest("hex"):method(a)};return nodeMethod},createHmacOutputMethod=function(a,f){return function(h,m){return new HmacSha256(h,f,!0).update(m)[a]()}},createHmacMethod=function(a){var f=createHmacOutputMethod("hex",a);f.create=function(_){return new HmacSha256(_,a)},f.update=function(_,p){return f.create(_).update(p)};for(var h=0;h<OUTPUT_TYPES.length;++h){var m=OUTPUT_TYPES[h];f[m]=createHmacOutputMethod(m,a)}return f};function Sha256(a,f){f?(blocks[0]=blocks[16]=blocks[1]=blocks[2]=blocks[3]=blocks[4]=blocks[5]=blocks[6]=blocks[7]=blocks[8]=blocks[9]=blocks[10]=blocks[11]=blocks[12]=blocks[13]=blocks[14]=blocks[15]=0,this.blocks=blocks):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],a?(this.h0=3238371032,this.h1=914150663,this.h2=812702999,this.h3=4144912697,this.h4=4290775857,this.h5=1750603025,this.h6=1694076839,this.h7=3204075428):(this.h0=1779033703,this.h1=3144134277,this.h2=1013904242,this.h3=2773480762,this.h4=1359893119,this.h5=2600822924,this.h6=528734635,this.h7=1541459225),this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0,this.is224=a}Sha256.prototype.update=function(a){if(!this.finalized){var f,h=typeof a;if(h!=="string"){if(h==="object"){if(a===null)throw new Error(ERROR);if(ARRAY_BUFFER&&a.constructor===ArrayBuffer)a=new Uint8Array(a);else if(!Array.isArray(a)&&(!ARRAY_BUFFER||!ArrayBuffer.isView(a)))throw new Error(ERROR)}else throw new Error(ERROR);f=!0}for(var m,_=0,p,d=a.length,b=this.blocks;_<d;){if(this.hashed&&(this.hashed=!1,b[0]=this.block,b[16]=b[1]=b[2]=b[3]=b[4]=b[5]=b[6]=b[7]=b[8]=b[9]=b[10]=b[11]=b[12]=b[13]=b[14]=b[15]=0),f)for(p=this.start;_<d&&p<64;++_)b[p>>2]|=a[_]<<SHIFT[p++&3];else for(p=this.start;_<d&&p<64;++_)m=a.charCodeAt(_),m<128?b[p>>2]|=m<<SHIFT[p++&3]:m<2048?(b[p>>2]|=(192|m>>6)<<SHIFT[p++&3],b[p>>2]|=(128|m&63)<<SHIFT[p++&3]):m<55296||m>=57344?(b[p>>2]|=(224|m>>12)<<SHIFT[p++&3],b[p>>2]|=(128|m>>6&63)<<SHIFT[p++&3],b[p>>2]|=(128|m&63)<<SHIFT[p++&3]):(m=65536+((m&1023)<<10|a.charCodeAt(++_)&1023),b[p>>2]|=(240|m>>18)<<SHIFT[p++&3],b[p>>2]|=(128|m>>12&63)<<SHIFT[p++&3],b[p>>2]|=(128|m>>6&63)<<SHIFT[p++&3],b[p>>2]|=(128|m&63)<<SHIFT[p++&3]);this.lastByteIndex=p,this.bytes+=p-this.start,p>=64?(this.block=b[16],this.start=p-64,this.hash(),this.hashed=!0):this.start=p}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},Sha256.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var a=this.blocks,f=this.lastByteIndex;a[16]=this.block,a[f>>2]|=EXTRA[f&3],this.block=a[16],f>=56&&(this.hashed||this.hash(),a[0]=this.block,a[16]=a[1]=a[2]=a[3]=a[4]=a[5]=a[6]=a[7]=a[8]=a[9]=a[10]=a[11]=a[12]=a[13]=a[14]=a[15]=0),a[14]=this.hBytes<<3|this.bytes>>>29,a[15]=this.bytes<<3,this.hash()}},Sha256.prototype.hash=function(){var a=this.h0,f=this.h1,h=this.h2,m=this.h3,_=this.h4,p=this.h5,d=this.h6,b=this.h7,v=this.blocks,s,E,M,ee,B,oe,ue,de,ce,Y,x;for(s=16;s<64;++s)B=v[s-15],E=(B>>>7|B<<25)^(B>>>18|B<<14)^B>>>3,B=v[s-2],M=(B>>>17|B<<15)^(B>>>19|B<<13)^B>>>10,v[s]=v[s-16]+E+v[s-7]+M<<0;for(x=f&h,s=0;s<64;s+=4)this.first?(this.is224?(de=300032,B=v[0]-1413257819,b=B-150054599<<0,m=B+24177077<<0):(de=704751109,B=v[0]-210244248,b=B-1521486534<<0,m=B+143694565<<0),this.first=!1):(E=(a>>>2|a<<30)^(a>>>13|a<<19)^(a>>>22|a<<10),M=(_>>>6|_<<26)^(_>>>11|_<<21)^(_>>>25|_<<7),de=a&f,ee=de^a&h^x,ue=_&p^~_&d,B=b+M+ue+K[s]+v[s],oe=E+ee,b=m+B<<0,m=B+oe<<0),E=(m>>>2|m<<30)^(m>>>13|m<<19)^(m>>>22|m<<10),M=(b>>>6|b<<26)^(b>>>11|b<<21)^(b>>>25|b<<7),ce=m&a,ee=ce^m&f^de,ue=b&_^~b&p,B=d+M+ue+K[s+1]+v[s+1],oe=E+ee,d=h+B<<0,h=B+oe<<0,E=(h>>>2|h<<30)^(h>>>13|h<<19)^(h>>>22|h<<10),M=(d>>>6|d<<26)^(d>>>11|d<<21)^(d>>>25|d<<7),Y=h&m,ee=Y^h&a^ce,ue=d&b^~d&_,B=p+M+ue+K[s+2]+v[s+2],oe=E+ee,p=f+B<<0,f=B+oe<<0,E=(f>>>2|f<<30)^(f>>>13|f<<19)^(f>>>22|f<<10),M=(p>>>6|p<<26)^(p>>>11|p<<21)^(p>>>25|p<<7),x=f&h,ee=x^f&m^Y,ue=p&d^~p&b,B=_+M+ue+K[s+3]+v[s+3],oe=E+ee,_=a+B<<0,a=B+oe<<0;this.h0=this.h0+a<<0,this.h1=this.h1+f<<0,this.h2=this.h2+h<<0,this.h3=this.h3+m<<0,this.h4=this.h4+_<<0,this.h5=this.h5+p<<0,this.h6=this.h6+d<<0,this.h7=this.h7+b<<0},Sha256.prototype.hex=function(){this.finalize();var a=this.h0,f=this.h1,h=this.h2,m=this.h3,_=this.h4,p=this.h5,d=this.h6,b=this.h7,v=HEX_CHARS[a>>28&15]+HEX_CHARS[a>>24&15]+HEX_CHARS[a>>20&15]+HEX_CHARS[a>>16&15]+HEX_CHARS[a>>12&15]+HEX_CHARS[a>>8&15]+HEX_CHARS[a>>4&15]+HEX_CHARS[a&15]+HEX_CHARS[f>>28&15]+HEX_CHARS[f>>24&15]+HEX_CHARS[f>>20&15]+HEX_CHARS[f>>16&15]+HEX_CHARS[f>>12&15]+HEX_CHARS[f>>8&15]+HEX_CHARS[f>>4&15]+HEX_CHARS[f&15]+HEX_CHARS[h>>28&15]+HEX_CHARS[h>>24&15]+HEX_CHARS[h>>20&15]+HEX_CHARS[h>>16&15]+HEX_CHARS[h>>12&15]+HEX_CHARS[h>>8&15]+HEX_CHARS[h>>4&15]+HEX_CHARS[h&15]+HEX_CHARS[m>>28&15]+HEX_CHARS[m>>24&15]+HEX_CHARS[m>>20&15]+HEX_CHARS[m>>16&15]+HEX_CHARS[m>>12&15]+HEX_CHARS[m>>8&15]+HEX_CHARS[m>>4&15]+HEX_CHARS[m&15]+HEX_CHARS[_>>28&15]+HEX_CHARS[_>>24&15]+HEX_CHARS[_>>20&15]+HEX_CHARS[_>>16&15]+HEX_CHARS[_>>12&15]+HEX_CHARS[_>>8&15]+HEX_CHARS[_>>4&15]+HEX_CHARS[_&15]+HEX_CHARS[p>>28&15]+HEX_CHARS[p>>24&15]+HEX_CHARS[p>>20&15]+HEX_CHARS[p>>16&15]+HEX_CHARS[p>>12&15]+HEX_CHARS[p>>8&15]+HEX_CHARS[p>>4&15]+HEX_CHARS[p&15]+HEX_CHARS[d>>28&15]+HEX_CHARS[d>>24&15]+HEX_CHARS[d>>20&15]+HEX_CHARS[d>>16&15]+HEX_CHARS[d>>12&15]+HEX_CHARS[d>>8&15]+HEX_CHARS[d>>4&15]+HEX_CHARS[d&15];return this.is224||(v+=HEX_CHARS[b>>28&15]+HEX_CHARS[b>>24&15]+HEX_CHARS[b>>20&15]+HEX_CHARS[b>>16&15]+HEX_CHARS[b>>12&15]+HEX_CHARS[b>>8&15]+HEX_CHARS[b>>4&15]+HEX_CHARS[b&15]),v},Sha256.prototype.toString=Sha256.prototype.hex,Sha256.prototype.digest=function(){this.finalize();var a=this.h0,f=this.h1,h=this.h2,m=this.h3,_=this.h4,p=this.h5,d=this.h6,b=this.h7,v=[a>>24&255,a>>16&255,a>>8&255,a&255,f>>24&255,f>>16&255,f>>8&255,f&255,h>>24&255,h>>16&255,h>>8&255,h&255,m>>24&255,m>>16&255,m>>8&255,m&255,_>>24&255,_>>16&255,_>>8&255,_&255,p>>24&255,p>>16&255,p>>8&255,p&255,d>>24&255,d>>16&255,d>>8&255,d&255];return this.is224||v.push(b>>24&255,b>>16&255,b>>8&255,b&255),v},Sha256.prototype.array=Sha256.prototype.digest,Sha256.prototype.arrayBuffer=function(){this.finalize();var a=new ArrayBuffer(this.is224?28:32),f=new DataView(a);return f.setUint32(0,this.h0),f.setUint32(4,this.h1),f.setUint32(8,this.h2),f.setUint32(12,this.h3),f.setUint32(16,this.h4),f.setUint32(20,this.h5),f.setUint32(24,this.h6),this.is224||f.setUint32(28,this.h7),a};function HmacSha256(a,f,h){var m,_=typeof a;if(_==="string"){var p=[],d=a.length,b=0,v;for(m=0;m<d;++m)v=a.charCodeAt(m),v<128?p[b++]=v:v<2048?(p[b++]=192|v>>6,p[b++]=128|v&63):v<55296||v>=57344?(p[b++]=224|v>>12,p[b++]=128|v>>6&63,p[b++]=128|v&63):(v=65536+((v&1023)<<10|a.charCodeAt(++m)&1023),p[b++]=240|v>>18,p[b++]=128|v>>12&63,p[b++]=128|v>>6&63,p[b++]=128|v&63);a=p}else if(_==="object"){if(a===null)throw new Error(ERROR);if(ARRAY_BUFFER&&a.constructor===ArrayBuffer)a=new Uint8Array(a);else if(!Array.isArray(a)&&(!ARRAY_BUFFER||!ArrayBuffer.isView(a)))throw new Error(ERROR)}else throw new Error(ERROR);a.length>64&&(a=new Sha256(f,!0).update(a).array());var s=[],E=[];for(m=0;m<64;++m){var M=a[m]||0;s[m]=92^M,E[m]=54^M}Sha256.call(this,f,h),this.update(E),this.oKeyPad=s,this.inner=!0,this.sharedMemory=h}HmacSha256.prototype=new Sha256,HmacSha256.prototype.finalize=function(){if(Sha256.prototype.finalize.call(this),this.inner){this.inner=!1;var a=this.array();Sha256.call(this,this.is224,this.sharedMemory),this.update(this.oKeyPad),this.update(a),Sha256.prototype.finalize.call(this)}};var exports=createMethod();exports.sha256=exports,exports.sha224=createMethod(!0),exports.sha256.hmac=createHmacMethod(),exports.sha224.hmac=createHmacMethod(!0),COMMON_JS?module.exports=exports:(root.sha256=exports.sha256,root.sha224=exports.sha224,AMD&&define(function(){return exports}))})()});var j={},Bn=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string";Bn&&(Wr=Or(),zr=Wr.parentPort,zr.on("message",a=>jr({data:a})),$r=Ir(),Object.assign(global,{self:global,require:Nr,Module:j,location:{href:__filename},Worker:Wr.Worker,importScripts:function(a){(0,eval)($r.readFileSync(a,"utf8")+"//# sourceURL="+a)},postMessage:function(a){zr.postMessage(a)},performance:global.performance||{now:function(){return Date.now()}}}));var Wr,zr,$r,Xr=!1;function Ki(){var a=Array.prototype.slice.call(arguments).join(" ");if(Bn){$r.writeSync(2,a+"\n");return}console.error(a)}function Yi(){var a=Array.prototype.slice.call(arguments).join(" ");postMessage({cmd:"alert",text:a,threadId:j._pthread_self()})}var Pn=Ki;self.alert=Yi;j.instantiateWasm=(a,f)=>{var h=j.wasmModule;j.wasmModule=null;var m=new WebAssembly.Instance(h,a);return f(m)};self.onunhandledrejection=a=>{var f;throw(f=a.reason)!=null?f:a};function qr(a){try{if(a.data.cmd==="load"){let h=[];self.onmessage=m=>h.push(m),self.startWorker=m=>{j=m,postMessage({cmd:"loaded"});for(let _ of h)qr(_);self.onmessage=qr},j.wasmModule=a.data.wasmModule;for(let m of a.data.handlers)j[m]=function(){postMessage({cmd:"callHandler",handler:m,args:[...arguments]})};if(j.wasmMemory=a.data.wasmMemory,j.buffer=j.wasmMemory.buffer,j.ENVIRONMENT_IS_PTHREAD=!0,typeof a.data.urlOrBlob=="string")importScripts(a.data.urlOrBlob);else{var f=URL.createObjectURL(a.data.urlOrBlob);importScripts(f),URL.revokeObjectURL(f)}DuckDB(j)}else if(a.data.cmd==="run"){j.__emscripten_thread_init(a.data.pthread_ptr,0,0,1),j.__emscripten_thread_mailbox_await(a.data.pthread_ptr),j.establishStackSpace(),j.PThread.receiveObjectTransfer(a.data),j.PThread.threadInitTLS(),Xr||(Xr=!0);try{j.invokeEntryPoint(a.data.start_routine,a.data.arg)}catch(h){if(h!="unwind")throw h}}else a.data.cmd==="cancel"?j._pthread_self()&&j.__emscripten_thread_exit(-1):a.data.target==="setimmediate"||(a.data.cmd==="checkMailbox"?Xr&&j.checkMailbox():a.data.cmd&&(Pn("worker.js received unknown command "+a.data.cmd),Pn(a.data)))}catch(h){throw j.__emscripten_thread_crashed&&j.__emscripten_thread_crashed(),h}}self.onmessage=qr;var jr=self.onmessage;function Un(){return j}function Ln(a){j=a}var Vn=Cn(Wn());var Se=Cn(zn()),Xn=function(a,f,h){var m;if((m=a==null?void 0:a.endpoint)!=null&&m.startsWith("http")){let _="".concat(a==null?void 0:a.endpoint),p=_.indexOf("://")+3;return _.substring(p)}else return a!=null&&a.endpoint?"".concat(h,".").concat(a==null?void 0:a.endpoint):"".concat(h,".s3.amazonaws.com")};function Ji(a,f,h){var p,d,b,v;let m=$n(f),_=m.path;return qn(a)&&(_="/".concat(m.bucket).concat(_)),{url:_,query:"",host:Xn(a,f,m.bucket),region:(p=a==null?void 0:a.region)!=null?p:"",service:"s3",method:h,accessKeyId:(d=a==null?void 0:a.accessKeyId)!=null?d:"",secretAccessKey:(b=a==null?void 0:a.secretAccessKey)!=null?b:"",sessionToken:(v=a==null?void 0:a.sessionToken)!=null?v:"",dateNow:new Date().toISOString().replace(/-/g,"").split("T")[0],datetimeNow:new Date().toISOString().replace(/-/g,"").replace(/:/g,"").split(".")[0]+"Z"}}function Zi(a,f=!1){let h="0123456789ABCDEF",m="";for(let _=0;_<a.length;_++){let p=a[_];p>="A"&&p<="Z"||p>="a"&&p<="z"||p>="0"&&p<="9"||p=="_"||p=="-"||p=="~"||p=="."?m+=p:p=="/"?f?m+="%2F":m+=p:(m+="%",m+=h[p.charCodeAt(0)>>4],m+=h[p.charCodeAt(0)&15])}return m}function Qi(a,f=null){var oe;let h=(oe=f==null?void 0:f.contentHash)!=null?oe:"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855",m=new Map;m.set("x-amz-date",a.datetimeNow),m.set("x-amz-content-sha256",h),a.sessionToken&&m.set("x-amz-security-token",a.sessionToken);let _="";f!=null&&f.contentType&&(_+="content-type;"),_+="host;x-amz-content-sha256;x-amz-date",a.sessionToken&&(_+=";x-amz-security-token");let p=a.method+"\n"+Zi(a.url)+"\n"+a.query;f!=null&&f.contentType&&(p+="\ncontent-type:"+(f==null?void 0:f.contentType)),p+="\nhost:"+a.host+"\nx-amz-content-sha256:"+h+"\nx-amz-date:"+a.datetimeNow,a.sessionToken&&a.sessionToken.length>0&&(p+="\nx-amz-security-token:"+a.sessionToken),p+="\n\n"+_+"\n"+h;let d=(0,Se.sha256)(p),b="AWS4-HMAC-SHA256\n"+a.datetimeNow+"\n"+a.dateNow+"/"+a.region+"/"+a.service+"/aws4_request\n"+d,v="AWS4"+a.secretAccessKey,s=Se.sha256.hmac.arrayBuffer(v,a.dateNow),E=Se.sha256.hmac.arrayBuffer(s,a.region),M=Se.sha256.hmac.arrayBuffer(E,a.service),ee=Se.sha256.hmac.arrayBuffer(M,"aws4_request"),B=Se.sha256.hmac(ee,b);return m.set("Authorization","AWS4-HMAC-SHA256 Credential="+a.accessKeyId+"/"+a.dateNow+"/"+a.region+"/"+a.service+"/aws4_request, SignedHeaders="+_+", Signature="+B),m}var es=function(a,f,h,m=null,_=null){let p=Ji(a,f,h),d={contentType:m,contentHash:_?Se.sha256.hex(_):null};return Qi(p,d)};function be(a,f,h,m,_=null,p=null){(f!=null&&f.accessKeyId||f!=null&&f.sessionToken)&&(es(f,h,m,_,p).forEach((b,v)=>{a.setRequestHeader(v,b)}),_&&a.setRequestHeader("content-type",_))}function $n(a){if(a.indexOf("s3://")!=0)throw new Error("URL needs to start with s3://");let f=a.indexOf("/",5);if(f==-1)throw new Error("URL needs to contain a '/' after the host");let h=a.substring(5,f);if(!h)throw new Error("URL needs to contain a bucket name");let m=a.substring(f);if(!m)throw new Error("URL needs to contain key");return{bucket:h,path:m}}function qn(a){var f;return!!((f=a==null?void 0:a.endpoint)!=null&&f.startsWith("http"))}function we(a,f){let h=$n(f);return qn(a)?"".concat(a==null?void 0:a.endpoint,"/").concat(h.bucket)+h.path:"https://"+Xn(a,f,h.bucket)+h.path}var Kn=new TextEncoder,jn=new TextDecoder("utf-8");function Jr(a,f,h){let m=Kn.encode(h),_=a._malloc(m.byteLength),p=a.HEAPU8.subarray(_,_+m.byteLength);p.set(m),a.HEAPF64[(f>>3)+0]=1,a.HEAPF64[(f>>3)+1]=_,a.HEAPF64[(f>>3)+2]=p.byteLength}function Qr(a){switch(a){case"UINT8":case"INT8":return 1;case"INT32":case"FLOAT":return 4;case"INT64":case"UINT64":case"DOUBLE":case"VARCHAR":return 8;default:return 0}}function Zr(a,f,h,m){let _=a.HEAPU8.subarray(f,f+m*Qr(h));switch(h){case"UINT8":return new Uint8Array(_.buffer,_.byteOffset,m);case"INT8":return new Int8Array(_.buffer,_.byteOffset,m);case"INT32":return new Int32Array(_.buffer,_.byteOffset,m);case"FLOAT":return new Float32Array(_.buffer,_.byteOffset,m);case"DOUBLE":return new Float64Array(_.buffer,_.byteOffset,m);case"VARCHAR":return new Float64Array(_.buffer,_.byteOffset,m);default:return new Array(0)}}function Gn(a,f,h){let m=a.HEAPU8.subarray(f,f+h);return new Uint8Array(m.buffer,m.byteOffset,h)}function _r(a,f,h){let m=a.HEAPU8.subarray(f,f+h*8);return new Float64Array(m.buffer,m.byteOffset,h)}function Yn(a,f,h,m,_,p,d,b){try{let v=a._udfFunctions.get(m);if(!v){Jr(f,h,"Unknown UDF with id: "+m);return}let s=jn.decode(f.HEAPU8.subarray(_,_+p)),E=JSON.parse(s),M=_r(f,d,b/8),ee=I=>{var le;let te=null;switch(I.validityBuffer!==void 0&&(te=Gn(f,M[I.validityBuffer],E.rows)),I.physicalType){case"VARCHAR":{if(I.dataBuffer===null||I.dataBuffer===void 0)throw new Error("malformed data view, expected data buffer for VARCHAR argument");if(I.lengthBuffer===null||I.lengthBuffer===void 0)throw new Error("malformed data view, expected data length buffer for VARCHAR argument");let fe=Zr(f,M[I.dataBuffer],I.physicalType,E.rows),ie=[],re=_r(f,M[I.lengthBuffer],E.rows);for(let S=0;S<E.rows;++S){if(te!=null&&!te[S]){ie.push(null);continue}let se=f.HEAPU8.subarray(fe[S],fe[S]+re[S]),Ae=jn.decode(se);ie.push(Ae)}return S=>ie[S]}case"STRUCT":{let fe={},ie=[];for(let re=0;re<(((le=I.children)==null?void 0:le.length)||0);++re){let S=I.children[re],se=ee(S);ie.push(Ae=>{fe[S.name]=se(Ae)})}return te!=null?re=>{if(!te[re])return null;for(let S of ie)S(re);return fe}:re=>{for(let S of ie)S(re);return fe}}default:{if(I.dataBuffer===void 0)throw new Error("malformed data view, expected data buffer for argument of type: "+I.physicalType);let fe=Zr(f,M[I.dataBuffer],I.physicalType,E.rows);return te!=null?ie=>te[ie]?fe[ie]:null:ie=>fe[ie]}}},B=[];for(let I=0;I<E.args.length;++I)B.push(ee(E.args[I]));let oe=E.rows*Qr(E.ret.physicalType),ue=f._malloc(oe),de=Zr(f,ue,E.ret.physicalType,E.rows),ce=f._malloc(E.rows),Y=Gn(f,ce,E.rows);if(de.length==0||Y.length==0){Jr(f,h,"Can't create physical arrays for result");return}let x=de;E.ret.physicalType=="VARCHAR"&&(x=new Array(E.rows));let ae=[];for(let I=0;I<E.args.length;++I)ae.push(null);for(let I=0;I<E.rows;++I){for(let le=0;le<E.args.length;++le)ae[le]=B[le](I);let te=v.func(...ae);x[I]=te,Y[I]=te==null?0:1}let xe=0;switch(E.ret.physicalType){case"VARCHAR":{let I=new Array(0);xe=f._malloc(E.rows*Qr("DOUBLE"));let te=_r(f,xe,E.rows),le=0;for(let S=0;S<E.rows;++S){let se=Kn.encode(x[S]||"");I.push(se),te[S]=se.length,le+=se.length}let fe=f._malloc(le),ie=f.HEAPU8.subarray(fe,fe+le),re=0;for(let S=0;S<E.rows;++S){de[S]=re;let se=I[S];ie.subarray(re,re+se.length).set(se),re+=se.length}}}let De=3*8,He=f._malloc(De),Ee=_r(f,He,3);Ee[0]=ue,Ee[1]=ce,Ee[2]=xe,f.HEAPF64[(h>>3)+0]=0,f.HEAPF64[(h>>3)+1]=He,f.HEAPF64[(h>>3)+2]=0}catch(v){Jr(f,h,v.toString())}}function ts(){let a=new TextDecoder;return f=>(typeof SharedArrayBuffer<"u"&&f.buffer instanceof SharedArrayBuffer&&(f=new Uint8Array(f)),a.decode(f))}var ns=ts();function _e(a,f){console.error("FAIL WITH: ".concat(f)),a.ccall("duckdb_web_fail_with",null,["string"],[f])}function he(a,f,h){return ns(a.HEAPU8.subarray(f,f+h))}var et=(d=>(d[d.BUFFER=0]="BUFFER",d[d.NODE_FS=1]="NODE_FS",d[d.BROWSER_FILEREADER=2]="BROWSER_FILEREADER",d[d.BROWSER_FSACCESS=3]="BROWSER_FSACCESS",d[d.HTTP=4]="HTTP",d[d.S3=5]="S3",d))(et||{});function mr(a){return typeof a=="number"&&et[a]||String(a)}var hr=class{constructor(f,h=0){this.fileSize=f;this.fileBufferPtr=h}getCppPointer(f){let h=f._malloc(16);return f.HEAPF64[(h>>3)+0]=this.fileSize,f.HEAPF64[(h>>3)+1]=this.fileBufferPtr,h}};function pr(a,f,h,m){let _=a.stackSave(),p=a.stackAlloc(3*8);h.unshift("number"),m.unshift(p),a.ccall(f,null,h,m);let d=a.HEAPF64[(p>>3)+0],b=a.HEAPF64[(p>>3)+1],v=a.HEAPF64[(p>>3)+2];return a.stackRestore(_),[d,b,v]}function br(a){a.ccall("duckdb_web_clear_response",null,[],[])}function wr(a,f,h,m){if(!h)throw new Error("No OPFS access handle registered with name: ".concat(f));if(!h.fileName)throw new Error("Invalid file handle registered with name: ".concat(f));if(!h.accessHandle){let _="Cannot perform ".concat(a," on an file that hasn't been opened: \"").concat(f,'"');if(m)throw new Error(_);console.warn(_)}}var pe=!1,N={_files:new Map,_fileInfoCache:new Map,_udfFunctions:new Map,_globalFileInfo:null,getFileInfo(a,f){if(typeof f!="number"||f<0)return null;try{let h=N._fileInfoCache.get(f),[m,_,p]=pr(a,"duckdb_web_fs_get_file_info_by_id",["number","number"],[f,(h==null?void 0:h.cacheEpoch)||0]);if(m!==0)return null;if(p===0)return h;let d=he(a,_,p);br(a);let b=JSON.parse(d);if(b==null)return null;let v={...b,blob:null};return N._fileInfoCache.set(f,v),v}catch(h){return console.log(h),null}},getFileInfoByName(a,f){if(typeof f!="string"||f.length===0)return null;try{let[h,m,_]=pr(a,"duckdb_web_fs_get_file_info_by_name",["string","number"],[f,0]);if(h!==0)return null;if(_===0)throw new Error('Failed to resolve the file info from "'.concat(f,'"'));let p=he(a,m,_);br(a);let d=JSON.parse(p);return d==null?null:{...d,blob:null}}catch(h){return console.error(h),null}},getGlobalFileInfo(a){var f;try{let[h,m,_]=pr(a,"duckdb_web_get_global_file_info",["number"],[((f=N._globalFileInfo)==null?void 0:f.cacheEpoch)||0]);if(h!==0)return null;if(_===0)return N._globalFileInfo;let p=he(a,m,_);br(a);let d=JSON.parse(p);return d==null?null:(N._globalFileInfo={...d,blob:null},N._globalFileInfo)}catch(h){return console.log(h),null}},testPlatformFeature:(a,f)=>{switch(f){case 1:return typeof BigInt64Array<"u";default:return console.warn("test for unknown feature: ".concat(f)),!1}},getDefaultDataProtocol(a){return 2},openFile:(a,f,h)=>{var m;try{N._fileInfoCache.delete(f);let _=N.getFileInfo(a,f),p=(_==null?void 0:_.fileName)||"";switch(_==null?void 0:_.dataProtocol){case 4:case 5:{if(h&1&&h&2)throw new Error("Opening file ".concat(_.fileName," failed: cannot open file with both read and write flags set"));if(h&32)throw new Error("Opening file ".concat(_.fileName," failed: appending to HTTP/S3 files is not supported"));if(h&2){let v=new XMLHttpRequest;if(_.dataProtocol==5?(v.open("HEAD",we(_.s3Config,_.dataUrl),!1),be(v,_.s3Config,_.dataUrl,"HEAD")):v.open("HEAD",_.dataUrl,!1),v.send(null),v.status!=200&&v.status!=404)throw new Error("Opening file ".concat(_.fileName," failed: Unexpected return status from server (").concat(v.status,")"));if(v.status==404&&!(h&8||h&16))throw new Error("Opening file ".concat(_.fileName," failed: Cannot write to non-existent file without FILE_FLAGS_FILE_CREATE or FILE_FLAGS_FILE_CREATE_NEW flag."));let s=a._malloc(1),E=new Uint8Array;a.HEAPU8.set(E,s);let M=a._malloc(2*8);return a.HEAPF64[(M>>3)+0]=1,a.HEAPF64[(M>>3)+1]=s,M}else if(h!=1)throw new Error("Opening file ".concat(_.fileName," failed: unsupported file flags: ").concat(h));let d=null,b=null;try{let v=new XMLHttpRequest;if(_.dataProtocol==5?(v.open("HEAD",we(_.s3Config,_.dataUrl),!1),be(v,_.s3Config,_.dataUrl,"HEAD")):v.open("HEAD",_.dataUrl,!1),v.setRequestHeader("Range","bytes=0-"),v.send(null),d=v.getResponseHeader("Content-Length"),d!==null&&v.status==206){let s=a._malloc(16);return a.HEAPF64[(s>>3)+0]=+d,a.HEAPF64[(s>>3)+1]=0,s}}catch(v){b=v,console.warn("HEAD request with range header failed: ".concat(v))}if(_.allowFullHttpReads){if(d!==null&&+d>1){let s=new XMLHttpRequest;_.dataProtocol==5?(s.open("GET",we(_.s3Config,_.dataUrl),!1),be(s,_.s3Config,_.dataUrl,"GET")):s.open("GET",_.dataUrl,!1),s.setRequestHeader("Range","bytes=0-0"),s.send(null);let E=s.getResponseHeader("Content-Length");if(s.status==206&&E!==null&&+E==1){let M=a._malloc(16);return a.HEAPF64[(M>>3)+0]=+d,a.HEAPF64[(M>>3)+1]=0,M}if(s.status==200&&E!==null&&+E==+d){console.warn("fall back to full HTTP read for: ".concat(_.dataUrl));let M=a._malloc(s.response.byteLength),ee=new Uint8Array(s.response,0,s.response.byteLength);a.HEAPU8.set(ee,M);let B=a._malloc(2*8);return a.HEAPF64[(B>>3)+0]=s.response.byteLength,a.HEAPF64[(B>>3)+1]=M,B}}console.warn("falling back to full HTTP read for: ".concat(_.dataUrl));let v=new XMLHttpRequest;if(_.dataProtocol==5?(v.open("GET",we(_.s3Config,_.dataUrl),!1),be(v,_.s3Config,_.dataUrl,"GET")):v.open("GET",_.dataUrl,!1),v.responseType="arraybuffer",v.send(null),v.status==200){let s=a._malloc(v.response.byteLength),E=new Uint8Array(v.response,0,v.response.byteLength);a.HEAPU8.set(E,s);let M=a._malloc(2*8);return a.HEAPF64[(M>>3)+0]=v.response.byteLength,a.HEAPF64[(M>>3)+1]=s,M}}if(b!=null)throw new Error("Reading file ".concat(_.fileName," failed with error: ").concat(b));return 0}case 2:{let d=(m=N._files)==null?void 0:m.get(_.fileName);if(d){let s=a._malloc(16);return a.HEAPF64[(s>>3)+0]=d.size,a.HEAPF64[(s>>3)+1]=0,s}console.warn("Buffering missing file: ".concat(_.fileName));let b=a._malloc(2*8),v=a._malloc(1);return a.HEAPF64[(b>>3)+0]=1,a.HEAPF64[(b>>3)+1]=v,b}case 3:{let d=N._files.get(p);if(!(d!=null&&d.fileHandle)||!(d!=null&&d.file))throw new Error('Invalid file handle of the file "'.concat(p,'"'));if(!d.accessHandle)throw new Error("Performing openFile on OPFS file should be with an accessHandle");return new hr(d.file.size,0).getCppPointer(a)}default:{let d=mr(_==null?void 0:_.dataProtocol);throw new Error('Unsupported protocol for openFile: "'.concat(d,'"'))}}}catch(_){console.error(_.toString()),_e(a,_.toString())}return 0},glob:(a,f,h)=>{var m;try{let _=he(a,f,h);if(pe&&console.log('[WASM-CALL] glob("'.concat(_,'")')),_.startsWith("http")||_.startsWith("s3://")){let p=new XMLHttpRequest;if(_.startsWith("s3://")){let d=N.getGlobalFileInfo(a);p.open("HEAD",we(d==null?void 0:d.s3Config,_),!1),be(p,d==null?void 0:d.s3Config,_,"HEAD")}else p.open("HEAD",_,!1);if(p.send(null),p.status!=200&&p.status!==206){if(!((m=N.getGlobalFileInfo(a))!=null&&m.allowFullHttpReads)){_e(a,"HEAD request failed: ".concat(_,", with full http reads are disabled"));return}let d=new XMLHttpRequest;if(_.startsWith("s3://")){let v=N.getGlobalFileInfo(a);d.open("GET",we(v==null?void 0:v.s3Config,_),!1),be(d,v==null?void 0:v.s3Config,_,"HEAD")}else d.open("GET",_,!1);if(d.setRequestHeader("Range","bytes=0-0"),d.send(null),d.status!=200&&d.status!==206){_e(a,"HEAD and GET requests failed: ".concat(_));return}let b=d.getResponseHeader("Content-Length");b&&+b>1&&console.warn("Range request for ".concat(_," did not return a partial response: ").concat(d.status,' "').concat(d.statusText,'"'))}a.ccall("duckdb_web_fs_glob_add_path",null,["string"],[_])}}catch(_){return console.log(_),_e(a,_.toString()),0}},checkFile:(a,f,h,m,_)=>{var p,d;try{let b=he(a,f,h),v=(p=N._files)==null?void 0:p.get(b),s=m&&_&&_>0?he(a,m,_):"";if(pe&&console.log('[WASM-CALL] checkFile("'.concat(b,'", "').concat(s,'")')),v&&s.startsWith("opfs://")){let E=v;return!(((d=E.file)==null?void 0:d.size)===0&&E.emptyAsAbsent)}if(s.startsWith("http://")||s.startsWith("https://")||s.startsWith("s3://")){let E=new XMLHttpRequest;if(s.startsWith("s3://")){let M=N.getGlobalFileInfo(a);E.open("HEAD",we(M==null?void 0:M.s3Config,s),!1),be(E,M==null?void 0:M.s3Config,s,"HEAD")}else E.open("HEAD",s,!1);return E.send(null),E.status==206||E.status==200}if(v)return!0}catch(b){console.log(b)}return!1},syncFile:(a,f)=>{},closeFile:(a,f)=>{let h=N.getFileInfo(a,f);if(h)return pe&&console.log('[WASM-CALL] closeFile("'.concat(h.fileName,'", protocol=').concat(mr(h.dataProtocol),")")),N._closeFile(a,h)},closeFileByName:(a,f)=>{let h=N.getFileInfoByName(a,f);return h?(N._closeFile(a,h),!0):!1},_closeFile:(a,f)=>{var h;switch(N._fileInfoCache.delete(f.fileId),f.dataProtocol){case 0:case 4:case 5:break;case 1:case 2:return;case 3:{let m=f.fileName,_=(h=N._files)==null?void 0:h.get(m);_.accessHandle&&(_.accessHandle.flush(),_.accessHandle.close(),_.accessHandle=void 0,console.log('closed OPFS file "'.concat(_._url,'"')));return}}},truncateFile:(a,f,h)=>{var _;let m=N.getFileInfo(a,f);switch(m==null?void 0:m.dataProtocol){case 4:_e(a,"Cannot truncate a http file");return;case 5:_e(a,"Cannot truncate an s3 file");return;case 0:case 1:case 2:_e(a,"truncateFile not implemented");return;case 3:{let p=m.fileName,d=(_=N._files)==null?void 0:_.get(p);pe&&console.log('[WASM-CALL] truncateFile("'.concat(p,'", newSize=').concat(h,")"));try{wr("truncateFile",p,d,!0),d.accessHandle.truncate(h)}catch(b){_e(a,b.message)}return}}return 0},readFile(a,f,h,m,_){var p,d;if(m==0)return 0;try{let b=N.getFileInfo(a,f);switch(b==null?void 0:b.dataProtocol){case 4:case 5:{if(!b.dataUrl)throw new Error("Missing data URL for file ".concat(f));try{let v=new XMLHttpRequest;if(b.dataProtocol==5?(v.open("GET",we(b==null?void 0:b.s3Config,b.dataUrl),!1),be(v,b==null?void 0:b.s3Config,b.dataUrl,"GET")):v.open("GET",b.dataUrl,!1),v.responseType="arraybuffer",v.setRequestHeader("Range","bytes=".concat(_,"-").concat(_+m-1)),v.send(null),v.status==206||v.status==200&&m==v.response.byteLength&&_==0){let s=new Uint8Array(v.response,0,Math.min(v.response.byteLength,m));return a.HEAPU8.set(s,h),s.byteLength}else if(v.status==200){console.warn("Range request for ".concat(b.dataUrl," did not return a partial response: ").concat(v.status,' "').concat(v.statusText,'"'));let s=new Uint8Array(v.response,_,Math.min(v.response.byteLength-_,m));return a.HEAPU8.set(s,h),s.byteLength}else throw new Error("Range request for ".concat(b.dataUrl," did returned non-success status: ").concat(v.status,' "').concat(v.statusText,'"'))}catch(v){throw console.log(v),new Error("Range request for ".concat(b.dataUrl," failed with error: ").concat(v,'"'))}}case 2:{let v=(p=N._files)==null?void 0:p.get(b.fileName);if(!v)throw new Error("No HTML5 file registered with name: ".concat(b.fileName));let s=v.slice(_,_+m),E=new Uint8Array(new FileReaderSync().readAsArrayBuffer(s));return a.HEAPU8.set(E,h),E.byteLength}case 3:{let v=b.fileName,s=(d=N._files)==null?void 0:d.get(v);wr("readFile",v,s,!0);let E=new Uint8Array(m),M=s.accessHandle.read(E,{at:_});if(pe){let ee=m!==M?"ERR!! ".concat(E," != ").concat(M):"".concat(M),B=E.at(0).toString(16)+","+E.at(1).toString(16);console.log('[WASM-CALL] readFile("'.concat(v,'", ').concat(_,", ").concat(B,") ").concat(ee))}return a.HEAPU8.set(E,h),M}}return 0}catch(b){return console.log(b),_e(a,b.toString()),0}},writeFile:(a,f,h,m,_)=>{var b;let p=N.getFileInfo(a,f);if(!p||typeof p.dataProtocol!="number")return 0;let d=p.fileName;if(pe){let v="".concat(d,", protocol=").concat(mr(p.dataProtocol));console.log("[WASM-CALL] writeFile(".concat(v,", ").concat(m," bytes at ").concat(_,")"))}switch(p==null?void 0:p.dataProtocol){case 4:return _e(a,"Cannot write to HTTP file"),0;case 5:{let v=a.HEAPU8.subarray(h,h+m),s=new XMLHttpRequest;return s.open("PUT",we(p==null?void 0:p.s3Config,p.dataUrl),!1),be(s,p==null?void 0:p.s3Config,p.dataUrl,"PUT","",v),s.send(v),s.status!==200?(_e(a,"Failed writing file: HTTP "+s.status),0):m}case 2:return _e(a,"cannot write using the html5 file reader api"),0;case 3:{let v=(b=N._files)==null?void 0:b.get(d);wr("writeFile",d,v,!0);let s=a.HEAPU8.subarray(h,h+m),E=v.accessHandle,M=E.write(s,{at:_});return pe&&console.log("[WASM-CALL] writeFile => ".concat(M,"; size=").concat(E.getSize())),M}}return 0},getLastFileModificationTime:(a,f)=>{var m;let h=N.getFileInfo(a,f);switch(h==null?void 0:h.dataProtocol){case 2:{if(!((m=N._files)==null?void 0:m.get(h.fileName)))throw Error("No handle available for file: ".concat(h.fileName));return 0}case 3:case 4:case 5:return new Date().getTime()}return 0},checkDirectory:(a,f,h)=>{let m=he(a,f,h);return pe&&console.log('[WASM-CALL] checkDirectory("'.concat(m,'")')),!1},createDirectory:(a,f,h)=>{let m=he(a,f,h);pe&&console.log('[WASM-CALL] createDirectory("'.concat(m,'")'))},removeDirectory:(a,f,h)=>{let m=he(a,f,h);pe&&console.log('[WASM-CALL] removeDirectory("'.concat(m,'")'))},listDirectoryEntries:(a,f,h)=>{let m=he(a,f,h);return pe&&console.log('[WASM-CALL] listDirectoryEntries("'.concat(m,'")')),!1},moveFile:(a,f,h,m,_)=>{var v,s;let p=he(a,f,h),d=he(a,m,_),b=(v=N._files)==null?void 0:v.get(p);b!==void 0&&(N._files.delete(b),N._files.set(d,b));for(let[E,M]of((s=N._fileInfoCache)==null?void 0:s.entries())||[])if(M.dataUrl==p){N._fileInfoCache.delete(E);break}return!0},removeFile:(a,f,h)=>{},callScalarUDF:(a,f,h,m,_,p,d)=>{Yn(N,a,f,h,m,_,p,d)}};globalThis.DUCKDB_RUNTIME={};for(let a of Object.getOwnPropertyNames(N)){if(a=="constructor")continue;let f=globalThis.DUCKDB_RUNTIME;f[a]=Object.getOwnPropertyDescriptor(N,a).value}globalThis.onmessage=a=>{if(a.data.cmd==="load"){let f=Un();f.wasmModule=a.data.wasmModule,f.wasmMemory=a.data.wasmMemory,f.buffer=f.wasmMemory.buffer,f.ENVIRONMENT_IS_PTHREAD=!0,(0,Vn.default)(f).then(function(h){Ln(h)})}else if(a.data.cmd==="registerFileHandle")globalThis.DUCKDB_RUNTIME._files=globalThis.DUCKDB_RUNTIME._files||new Map,globalThis.DUCKDB_RUNTIME._files.set(a.data.fileName,a.data.fileHandle);else if(a.data.cmd==="dropFileHandle")globalThis.DUCKDB_RUNTIME._files=globalThis.DUCKDB_RUNTIME._files||new Map,globalThis.DUCKDB_RUNTIME._files.delete(a.data.fileName);else if(a.data.cmd==="registerUDFFunction")globalThis.DUCKDB_RUNTIME._udfFunctions=globalThis.DUCKDB_RUNTIME._files||new Map,globalThis.DUCKDB_RUNTIME._udfFunctions.set(a.data.udf.name,a.data.udf);else if(a.data.cmd==="dropUDFFunctions"){globalThis.DUCKDB_RUNTIME._udfFunctions=globalThis.DUCKDB_RUNTIME._files||new Map;for(let f of globalThis.DUCKDB_RUNTIME._udfFunctions.keys())globalThis.DUCKDB_RUNTIME._udfFunctions.get(f).connection_id==a.data.connectionId&&globalThis.DUCKDB_RUNTIME._udfFunctions.delete(f)}else jr(a)};})();
/*! Bundled license information:

js-sha256/src/sha256.js:
  (**
   * [js-sha256]{@link https://github.com/emn178/js-sha256}
   *
   * @version 0.9.0
   * @author Chen, Yi-Cyuan [emn178@gmail.com]
   * @copyright Chen, Yi-Cyuan 2014-2017
   * @license MIT
   *)
*/
//# sourceMappingURL=duckdb-browser-coi.pthread.worker.js.map
