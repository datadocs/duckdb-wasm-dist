"use strict";var Oh=Object.create;var Ir=Object.defineProperty;var Fh=Object.getOwnPropertyDescriptor;var Mh=Object.getOwnPropertyNames;var Ih=Object.getPrototypeOf,Lh=Object.prototype.hasOwnProperty;var x=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),Nh=(r,e)=>{for(var t in e)Ir(r,t,{get:e[t],enumerable:!0})},Co=(r,e,t,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let a of Mh(e))!Lh.call(r,a)&&a!==t&&Ir(r,a,{get:()=>e[a],enumerable:!(i=Fh(e,a))||i.enumerable});return r};var Rt=(r,e,t)=>(t=r!=null?Oh(Ih(r)):{},Co(e||!r||!r.__esModule?Ir(t,"default",{value:r,enumerable:!0}):t,r)),Bh=r=>Co(Ir({},"__esModule",{value:!0}),r);var pt=x((hb,Oo)=>{"use strict";Oo.exports={BINARY_TYPES:["nodebuffer","arraybuffer","fragments"],EMPTY_BUFFER:Buffer.alloc(0),GUID:"258EAFA5-E914-47DA-95CA-C5AB0DC85B11",kForOnEventAttribute:Symbol("kIsForOnEventAttribute"),kListener:Symbol("kListener"),kStatusCode:Symbol("status-code"),kWebSocket:Symbol("websocket"),NOOP:()=>{}}});var nr=x((_b,Br)=>{"use strict";var{EMPTY_BUFFER:Uh}=pt(),Vn=Buffer[Symbol.species];function Hh(r,e){if(r.length===0)return Uh;if(r.length===1)return r[0];let t=Buffer.allocUnsafe(e),i=0;for(let a=0;a<r.length;a++){let c=r[a];t.set(c,i),i+=c.length}return i<e?new Vn(t.buffer,t.byteOffset,i):t}function Fo(r,e,t,i,a){for(let c=0;c<a;c++)t[i+c]=r[c]^e[c&3]}function Mo(r,e){for(let t=0;t<r.length;t++)r[t]^=e[t&3]}function $h(r){return r.length===r.buffer.byteLength?r.buffer:r.buffer.slice(r.byteOffset,r.byteOffset+r.length)}function zn(r){if(zn.readOnly=!0,Buffer.isBuffer(r))return r;let e;return r instanceof ArrayBuffer?e=new Vn(r):ArrayBuffer.isView(r)?e=new Vn(r.buffer,r.byteOffset,r.byteLength):(e=Buffer.from(r),zn.readOnly=!1),e}Br.exports={concat:Hh,mask:Fo,toArrayBuffer:$h,toBuffer:zn,unmask:Mo};if(!process.env.WS_NO_BUFFER_UTIL)try{let r=require("bufferutil");Br.exports.mask=function(e,t,i,a,c){c<48?Fo(e,t,i,a,c):r.mask(e,t,i,a,c)},Br.exports.unmask=function(e,t){e.length<32?Mo(e,t):r.unmask(e,t)}}catch{}});var No=x((pb,Lo)=>{"use strict";var Io=Symbol("kDone"),Kn=Symbol("kRun"),Yn=class{constructor(e){this[Io]=()=>{this.pending--,this[Kn]()},this.concurrency=e||1/0,this.jobs=[],this.pending=0}add(e){this.jobs.push(e),this[Kn]()}[Kn](){if(this.pending!==this.concurrency&&this.jobs.length){let e=this.jobs.shift();this.pending++,e(this[Io])}}};Lo.exports=Yn});var or=x((mb,$o)=>{"use strict";var sr=require("zlib"),Bo=nr(),qh=No(),{kStatusCode:Uo}=pt(),Wh=Buffer[Symbol.species],jh=Buffer.from([0,0,255,255]),$r=Symbol("permessage-deflate"),at=Symbol("total-length"),ir=Symbol("callback"),mt=Symbol("buffers"),Hr=Symbol("error"),Ur,Xn=class{constructor(e,t,i){if(this._maxPayload=i|0,this._options=e||{},this._threshold=this._options.threshold!==void 0?this._options.threshold:1024,this._isServer=!!t,this._deflate=null,this._inflate=null,this.params=null,!Ur){let a=this._options.concurrencyLimit!==void 0?this._options.concurrencyLimit:10;Ur=new qh(a)}}static get extensionName(){return"permessage-deflate"}offer(){let e={};return this._options.serverNoContextTakeover&&(e.server_no_context_takeover=!0),this._options.clientNoContextTakeover&&(e.client_no_context_takeover=!0),this._options.serverMaxWindowBits&&(e.server_max_window_bits=this._options.serverMaxWindowBits),this._options.clientMaxWindowBits?e.client_max_window_bits=this._options.clientMaxWindowBits:this._options.clientMaxWindowBits==null&&(e.client_max_window_bits=!0),e}accept(e){return e=this.normalizeParams(e),this.params=this._isServer?this.acceptAsServer(e):this.acceptAsClient(e),this.params}cleanup(){if(this._inflate&&(this._inflate.close(),this._inflate=null),this._deflate){let e=this._deflate[ir];this._deflate.close(),this._deflate=null,e&&e(new Error("The deflate stream was closed while data was being processed"))}}acceptAsServer(e){let t=this._options,i=e.find(a=>!(t.serverNoContextTakeover===!1&&a.server_no_context_takeover||a.server_max_window_bits&&(t.serverMaxWindowBits===!1||typeof t.serverMaxWindowBits=="number"&&t.serverMaxWindowBits>a.server_max_window_bits)||typeof t.clientMaxWindowBits=="number"&&!a.client_max_window_bits));if(!i)throw new Error("None of the extension offers can be accepted");return t.serverNoContextTakeover&&(i.server_no_context_takeover=!0),t.clientNoContextTakeover&&(i.client_no_context_takeover=!0),typeof t.serverMaxWindowBits=="number"&&(i.server_max_window_bits=t.serverMaxWindowBits),typeof t.clientMaxWindowBits=="number"?i.client_max_window_bits=t.clientMaxWindowBits:(i.client_max_window_bits===!0||t.clientMaxWindowBits===!1)&&delete i.client_max_window_bits,i}acceptAsClient(e){let t=e[0];if(this._options.clientNoContextTakeover===!1&&t.client_no_context_takeover)throw new Error('Unexpected parameter "client_no_context_takeover"');if(!t.client_max_window_bits)typeof this._options.clientMaxWindowBits=="number"&&(t.client_max_window_bits=this._options.clientMaxWindowBits);else if(this._options.clientMaxWindowBits===!1||typeof this._options.clientMaxWindowBits=="number"&&t.client_max_window_bits>this._options.clientMaxWindowBits)throw new Error('Unexpected or invalid parameter "client_max_window_bits"');return t}normalizeParams(e){return e.forEach(t=>{Object.keys(t).forEach(i=>{let a=t[i];if(a.length>1)throw new Error(`Parameter "${i}" must have only a single value`);if(a=a[0],i==="client_max_window_bits"){if(a!==!0){let c=+a;if(!Number.isInteger(c)||c<8||c>15)throw new TypeError(`Invalid value for parameter "${i}": ${a}`);a=c}else if(!this._isServer)throw new TypeError(`Invalid value for parameter "${i}": ${a}`)}else if(i==="server_max_window_bits"){let c=+a;if(!Number.isInteger(c)||c<8||c>15)throw new TypeError(`Invalid value for parameter "${i}": ${a}`);a=c}else if(i==="client_no_context_takeover"||i==="server_no_context_takeover"){if(a!==!0)throw new TypeError(`Invalid value for parameter "${i}": ${a}`)}else throw new Error(`Unknown parameter "${i}"`);t[i]=a})}),e}decompress(e,t,i){Ur.add(a=>{this._decompress(e,t,(c,d)=>{a(),i(c,d)})})}compress(e,t,i){Ur.add(a=>{this._compress(e,t,(c,d)=>{a(),i(c,d)})})}_decompress(e,t,i){let a=this._isServer?"client":"server";if(!this._inflate){let c=`${a}_max_window_bits`,d=typeof this.params[c]!="number"?sr.Z_DEFAULT_WINDOWBITS:this.params[c];this._inflate=sr.createInflateRaw({...this._options.zlibInflateOptions,windowBits:d}),this._inflate[$r]=this,this._inflate[at]=0,this._inflate[mt]=[],this._inflate.on("error",Vh),this._inflate.on("data",Ho)}this._inflate[ir]=i,this._inflate.write(e),t&&this._inflate.write(jh),this._inflate.flush(()=>{let c=this._inflate[Hr];if(c){this._inflate.close(),this._inflate=null,i(c);return}let d=Bo.concat(this._inflate[mt],this._inflate[at]);this._inflate._readableState.endEmitted?(this._inflate.close(),this._inflate=null):(this._inflate[at]=0,this._inflate[mt]=[],t&&this.params[`${a}_no_context_takeover`]&&this._inflate.reset()),i(null,d)})}_compress(e,t,i){let a=this._isServer?"server":"client";if(!this._deflate){let c=`${a}_max_window_bits`,d=typeof this.params[c]!="number"?sr.Z_DEFAULT_WINDOWBITS:this.params[c];this._deflate=sr.createDeflateRaw({...this._options.zlibDeflateOptions,windowBits:d}),this._deflate[at]=0,this._deflate[mt]=[],this._deflate.on("data",Gh)}this._deflate[ir]=i,this._deflate.write(e),this._deflate.flush(sr.Z_SYNC_FLUSH,()=>{if(!this._deflate)return;let c=Bo.concat(this._deflate[mt],this._deflate[at]);t&&(c=new Wh(c.buffer,c.byteOffset,c.length-4)),this._deflate[ir]=null,this._deflate[at]=0,this._deflate[mt]=[],t&&this.params[`${a}_no_context_takeover`]&&this._deflate.reset(),i(null,c)})}};$o.exports=Xn;function Gh(r){this[mt].push(r),this[at]+=r.length}function Ho(r){if(this[at]+=r.length,this[$r]._maxPayload<1||this[at]<=this[$r]._maxPayload){this[mt].push(r);return}this[Hr]=new RangeError("Max payload size exceeded"),this[Hr].code="WS_ERR_UNSUPPORTED_MESSAGE_LENGTH",this[Hr][Uo]=1009,this.removeListener("data",Ho),this.reset()}function Vh(r){this[$r]._inflate=null,r[Uo]=1007,this[ir](r)}});var ar=x((gb,qr)=>{"use strict";var{isUtf8:qo}=require("buffer"),zh=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1,0,0,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0];function Kh(r){return r>=1e3&&r<=1014&&r!==1004&&r!==1005&&r!==1006||r>=3e3&&r<=4999}function Qn(r){let e=r.length,t=0;for(;t<e;)if(!(r[t]&128))t++;else if((r[t]&224)===192){if(t+1===e||(r[t+1]&192)!==128||(r[t]&254)===192)return!1;t+=2}else if((r[t]&240)===224){if(t+2>=e||(r[t+1]&192)!==128||(r[t+2]&192)!==128||r[t]===224&&(r[t+1]&224)===128||r[t]===237&&(r[t+1]&224)===160)return!1;t+=3}else if((r[t]&248)===240){if(t+3>=e||(r[t+1]&192)!==128||(r[t+2]&192)!==128||(r[t+3]&192)!==128||r[t]===240&&(r[t+1]&240)===128||r[t]===244&&r[t+1]>143||r[t]>244)return!1;t+=4}else return!1;return!0}qr.exports={isValidStatusCode:Kh,isValidUTF8:Qn,tokenChars:zh};if(qo)qr.exports.isValidUTF8=function(r){return r.length<24?Qn(r):qo(r)};else if(!process.env.WS_NO_UTF_8_VALIDATE)try{let r=require("utf-8-validate");qr.exports.isValidUTF8=function(e){return e.length<32?Qn(e):r(e)}}catch{}});var ts=x((yb,Yo)=>{"use strict";var{Writable:Yh}=require("stream"),Wo=or(),{BINARY_TYPES:Xh,EMPTY_BUFFER:jo,kStatusCode:Qh,kWebSocket:Jh}=pt(),{concat:Jn,toArrayBuffer:Zh,unmask:e_}=nr(),{isValidStatusCode:t_,isValidUTF8:Go}=ar(),Wr=Buffer[Symbol.species],ur=0,Vo=1,zo=2,Ko=3,Zn=4,r_=5,es=class extends Yh{constructor(e={}){super(),this._binaryType=e.binaryType||Xh[0],this._extensions=e.extensions||{},this._isServer=!!e.isServer,this._maxPayload=e.maxPayload|0,this._skipUTF8Validation=!!e.skipUTF8Validation,this[Jh]=void 0,this._bufferedBytes=0,this._buffers=[],this._compressed=!1,this._payloadLength=0,this._mask=void 0,this._fragmented=0,this._masked=!1,this._fin=!1,this._opcode=0,this._totalPayloadLength=0,this._messageLength=0,this._fragments=[],this._state=ur,this._loop=!1}_write(e,t,i){if(this._opcode===8&&this._state==ur)return i();this._bufferedBytes+=e.length,this._buffers.push(e),this.startLoop(i)}consume(e){if(this._bufferedBytes-=e,e===this._buffers[0].length)return this._buffers.shift();if(e<this._buffers[0].length){let i=this._buffers[0];return this._buffers[0]=new Wr(i.buffer,i.byteOffset+e,i.length-e),new Wr(i.buffer,i.byteOffset,e)}let t=Buffer.allocUnsafe(e);do{let i=this._buffers[0],a=t.length-e;e>=i.length?t.set(this._buffers.shift(),a):(t.set(new Uint8Array(i.buffer,i.byteOffset,e),a),this._buffers[0]=new Wr(i.buffer,i.byteOffset+e,i.length-e)),e-=i.length}while(e>0);return t}startLoop(e){let t;this._loop=!0;do switch(this._state){case ur:t=this.getInfo();break;case Vo:t=this.getPayloadLength16();break;case zo:t=this.getPayloadLength64();break;case Ko:this.getMask();break;case Zn:t=this.getData(e);break;default:this._loop=!1;return}while(this._loop);e(t)}getInfo(){if(this._bufferedBytes<2){this._loop=!1;return}let e=this.consume(2);if(e[0]&48)return this._loop=!1,Oe(RangeError,"RSV2 and RSV3 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_2_3");let t=(e[0]&64)===64;if(t&&!this._extensions[Wo.extensionName])return this._loop=!1,Oe(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");if(this._fin=(e[0]&128)===128,this._opcode=e[0]&15,this._payloadLength=e[1]&127,this._opcode===0){if(t)return this._loop=!1,Oe(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");if(!this._fragmented)return this._loop=!1,Oe(RangeError,"invalid opcode 0",!0,1002,"WS_ERR_INVALID_OPCODE");this._opcode=this._fragmented}else if(this._opcode===1||this._opcode===2){if(this._fragmented)return this._loop=!1,Oe(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE");this._compressed=t}else if(this._opcode>7&&this._opcode<11){if(!this._fin)return this._loop=!1,Oe(RangeError,"FIN must be set",!0,1002,"WS_ERR_EXPECTED_FIN");if(t)return this._loop=!1,Oe(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");if(this._payloadLength>125||this._opcode===8&&this._payloadLength===1)return this._loop=!1,Oe(RangeError,`invalid payload length ${this._payloadLength}`,!0,1002,"WS_ERR_INVALID_CONTROL_PAYLOAD_LENGTH")}else return this._loop=!1,Oe(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE");if(!this._fin&&!this._fragmented&&(this._fragmented=this._opcode),this._masked=(e[1]&128)===128,this._isServer){if(!this._masked)return this._loop=!1,Oe(RangeError,"MASK must be set",!0,1002,"WS_ERR_EXPECTED_MASK")}else if(this._masked)return this._loop=!1,Oe(RangeError,"MASK must be clear",!0,1002,"WS_ERR_UNEXPECTED_MASK");if(this._payloadLength===126)this._state=Vo;else if(this._payloadLength===127)this._state=zo;else return this.haveLength()}getPayloadLength16(){if(this._bufferedBytes<2){this._loop=!1;return}return this._payloadLength=this.consume(2).readUInt16BE(0),this.haveLength()}getPayloadLength64(){if(this._bufferedBytes<8){this._loop=!1;return}let e=this.consume(8),t=e.readUInt32BE(0);return t>Math.pow(2,53-32)-1?(this._loop=!1,Oe(RangeError,"Unsupported WebSocket frame: payload length > 2^53 - 1",!1,1009,"WS_ERR_UNSUPPORTED_DATA_PAYLOAD_LENGTH")):(this._payloadLength=t*Math.pow(2,32)+e.readUInt32BE(4),this.haveLength())}haveLength(){if(this._payloadLength&&this._opcode<8&&(this._totalPayloadLength+=this._payloadLength,this._totalPayloadLength>this._maxPayload&&this._maxPayload>0))return this._loop=!1,Oe(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH");this._masked?this._state=Ko:this._state=Zn}getMask(){if(this._bufferedBytes<4){this._loop=!1;return}this._mask=this.consume(4),this._state=Zn}getData(e){let t=jo;if(this._payloadLength){if(this._bufferedBytes<this._payloadLength){this._loop=!1;return}t=this.consume(this._payloadLength),this._masked&&this._mask[0]|this._mask[1]|this._mask[2]|this._mask[3]&&e_(t,this._mask)}if(this._opcode>7)return this.controlMessage(t);if(this._compressed){this._state=r_,this.decompress(t,e);return}return t.length&&(this._messageLength=this._totalPayloadLength,this._fragments.push(t)),this.dataMessage()}decompress(e,t){this._extensions[Wo.extensionName].decompress(e,this._fin,(a,c)=>{if(a)return t(a);if(c.length){if(this._messageLength+=c.length,this._messageLength>this._maxPayload&&this._maxPayload>0)return t(Oe(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH"));this._fragments.push(c)}let d=this.dataMessage();if(d)return t(d);this.startLoop(t)})}dataMessage(){if(this._fin){let e=this._messageLength,t=this._fragments;if(this._totalPayloadLength=0,this._messageLength=0,this._fragmented=0,this._fragments=[],this._opcode===2){let i;this._binaryType==="nodebuffer"?i=Jn(t,e):this._binaryType==="arraybuffer"?i=Zh(Jn(t,e)):i=t,this.emit("message",i,!0)}else{let i=Jn(t,e);if(!this._skipUTF8Validation&&!Go(i))return this._loop=!1,Oe(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");this.emit("message",i,!1)}}this._state=ur}controlMessage(e){if(this._opcode===8)if(this._loop=!1,e.length===0)this.emit("conclude",1005,jo),this.end();else{let t=e.readUInt16BE(0);if(!t_(t))return Oe(RangeError,`invalid status code ${t}`,!0,1002,"WS_ERR_INVALID_CLOSE_CODE");let i=new Wr(e.buffer,e.byteOffset+2,e.length-2);if(!this._skipUTF8Validation&&!Go(i))return Oe(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");this.emit("conclude",t,i),this.end()}else this._opcode===9?this.emit("ping",e):this.emit("pong",e);this._state=ur}};Yo.exports=es;function Oe(r,e,t,i,a){let c=new r(t?`Invalid WebSocket frame: ${e}`:e);return Error.captureStackTrace(c,Oe),c.code=a,c[Qh]=i,c}});var ns=x((Eb,Jo)=>{"use strict";var bb=require("net"),vb=require("tls"),{randomFillSync:n_}=require("crypto"),Xo=or(),{EMPTY_BUFFER:s_}=pt(),{isValidStatusCode:i_}=ar(),{mask:Qo,toBuffer:qt}=nr(),Xe=Symbol("kByteLength"),o_=Buffer.alloc(4),rs=class r{constructor(e,t,i){this._extensions=t||{},i&&(this._generateMask=i,this._maskBuffer=Buffer.alloc(4)),this._socket=e,this._firstFragment=!0,this._compress=!1,this._bufferedBytes=0,this._deflating=!1,this._queue=[]}static frame(e,t){let i,a=!1,c=2,d=!1;t.mask&&(i=t.maskBuffer||o_,t.generateMask?t.generateMask(i):n_(i,0,4),d=(i[0]|i[1]|i[2]|i[3])===0,c=6);let p;typeof e=="string"?(!t.mask||d)&&t[Xe]!==void 0?p=t[Xe]:(e=Buffer.from(e),p=e.length):(p=e.length,a=t.mask&&t.readOnly&&!d);let v=p;p>=65536?(c+=8,v=127):p>125&&(c+=2,v=126);let b=Buffer.allocUnsafe(a?p+c:c);return b[0]=t.fin?t.opcode|128:t.opcode,t.rsv1&&(b[0]|=64),b[1]=v,v===126?b.writeUInt16BE(p,2):v===127&&(b[2]=b[3]=0,b.writeUIntBE(p,4,6)),t.mask?(b[1]|=128,b[c-4]=i[0],b[c-3]=i[1],b[c-2]=i[2],b[c-1]=i[3],d?[b,e]:a?(Qo(e,i,b,c,p),[b]):(Qo(e,i,e,0,p),[b,e])):[b,e]}close(e,t,i,a){let c;if(e===void 0)c=s_;else{if(typeof e!="number"||!i_(e))throw new TypeError("First argument must be a valid error code number");if(t===void 0||!t.length)c=Buffer.allocUnsafe(2),c.writeUInt16BE(e,0);else{let p=Buffer.byteLength(t);if(p>123)throw new RangeError("The message must not be greater than 123 bytes");c=Buffer.allocUnsafe(2+p),c.writeUInt16BE(e,0),typeof t=="string"?c.write(t,2):c.set(t,2)}}let d={[Xe]:c.length,fin:!0,generateMask:this._generateMask,mask:i,maskBuffer:this._maskBuffer,opcode:8,readOnly:!1,rsv1:!1};this._deflating?this.enqueue([this.dispatch,c,!1,d,a]):this.sendFrame(r.frame(c,d),a)}ping(e,t,i){let a,c;if(typeof e=="string"?(a=Buffer.byteLength(e),c=!1):(e=qt(e),a=e.length,c=qt.readOnly),a>125)throw new RangeError("The data size must not be greater than 125 bytes");let d={[Xe]:a,fin:!0,generateMask:this._generateMask,mask:t,maskBuffer:this._maskBuffer,opcode:9,readOnly:c,rsv1:!1};this._deflating?this.enqueue([this.dispatch,e,!1,d,i]):this.sendFrame(r.frame(e,d),i)}pong(e,t,i){let a,c;if(typeof e=="string"?(a=Buffer.byteLength(e),c=!1):(e=qt(e),a=e.length,c=qt.readOnly),a>125)throw new RangeError("The data size must not be greater than 125 bytes");let d={[Xe]:a,fin:!0,generateMask:this._generateMask,mask:t,maskBuffer:this._maskBuffer,opcode:10,readOnly:c,rsv1:!1};this._deflating?this.enqueue([this.dispatch,e,!1,d,i]):this.sendFrame(r.frame(e,d),i)}send(e,t,i){let a=this._extensions[Xo.extensionName],c=t.binary?2:1,d=t.compress,p,v;if(typeof e=="string"?(p=Buffer.byteLength(e),v=!1):(e=qt(e),p=e.length,v=qt.readOnly),this._firstFragment?(this._firstFragment=!1,d&&a&&a.params[a._isServer?"server_no_context_takeover":"client_no_context_takeover"]&&(d=p>=a._threshold),this._compress=d):(d=!1,c=0),t.fin&&(this._firstFragment=!0),a){let b={[Xe]:p,fin:t.fin,generateMask:this._generateMask,mask:t.mask,maskBuffer:this._maskBuffer,opcode:c,readOnly:v,rsv1:d};this._deflating?this.enqueue([this.dispatch,e,this._compress,b,i]):this.dispatch(e,this._compress,b,i)}else this.sendFrame(r.frame(e,{[Xe]:p,fin:t.fin,generateMask:this._generateMask,mask:t.mask,maskBuffer:this._maskBuffer,opcode:c,readOnly:v,rsv1:!1}),i)}dispatch(e,t,i,a){if(!t){this.sendFrame(r.frame(e,i),a);return}let c=this._extensions[Xo.extensionName];this._bufferedBytes+=i[Xe],this._deflating=!0,c.compress(e,i.fin,(d,p)=>{if(this._socket.destroyed){let v=new Error("The socket was closed while data was being compressed");typeof a=="function"&&a(v);for(let b=0;b<this._queue.length;b++){let y=this._queue[b],E=y[y.length-1];typeof E=="function"&&E(v)}return}this._bufferedBytes-=i[Xe],this._deflating=!1,i.readOnly=!1,this.sendFrame(r.frame(p,i),a),this.dequeue()})}dequeue(){for(;!this._deflating&&this._queue.length;){let e=this._queue.shift();this._bufferedBytes-=e[3][Xe],Reflect.apply(e[0],this,e.slice(1))}}enqueue(e){this._bufferedBytes+=e[3][Xe],this._queue.push(e)}sendFrame(e,t){e.length===2?(this._socket.cork(),this._socket.write(e[0]),this._socket.write(e[1],t),this._socket.uncork()):this._socket.write(e[0],t)}};Jo.exports=rs});var aa=x((Sb,oa)=>{"use strict";var{kForOnEventAttribute:cr,kListener:ss}=pt(),Zo=Symbol("kCode"),ea=Symbol("kData"),ta=Symbol("kError"),ra=Symbol("kMessage"),na=Symbol("kReason"),Wt=Symbol("kTarget"),sa=Symbol("kType"),ia=Symbol("kWasClean"),ut=class{constructor(e){this[Wt]=null,this[sa]=e}get target(){return this[Wt]}get type(){return this[sa]}};Object.defineProperty(ut.prototype,"target",{enumerable:!0});Object.defineProperty(ut.prototype,"type",{enumerable:!0});var Tt=class extends ut{constructor(e,t={}){super(e),this[Zo]=t.code===void 0?0:t.code,this[na]=t.reason===void 0?"":t.reason,this[ia]=t.wasClean===void 0?!1:t.wasClean}get code(){return this[Zo]}get reason(){return this[na]}get wasClean(){return this[ia]}};Object.defineProperty(Tt.prototype,"code",{enumerable:!0});Object.defineProperty(Tt.prototype,"reason",{enumerable:!0});Object.defineProperty(Tt.prototype,"wasClean",{enumerable:!0});var jt=class extends ut{constructor(e,t={}){super(e),this[ta]=t.error===void 0?null:t.error,this[ra]=t.message===void 0?"":t.message}get error(){return this[ta]}get message(){return this[ra]}};Object.defineProperty(jt.prototype,"error",{enumerable:!0});Object.defineProperty(jt.prototype,"message",{enumerable:!0});var lr=class extends ut{constructor(e,t={}){super(e),this[ea]=t.data===void 0?null:t.data}get data(){return this[ea]}};Object.defineProperty(lr.prototype,"data",{enumerable:!0});var a_={addEventListener(r,e,t={}){for(let a of this.listeners(r))if(!t[cr]&&a[ss]===e&&!a[cr])return;let i;if(r==="message")i=function(c,d){let p=new lr("message",{data:d?c:c.toString()});p[Wt]=this,jr(e,this,p)};else if(r==="close")i=function(c,d){let p=new Tt("close",{code:c,reason:d.toString(),wasClean:this._closeFrameReceived&&this._closeFrameSent});p[Wt]=this,jr(e,this,p)};else if(r==="error")i=function(c){let d=new jt("error",{error:c,message:c.message});d[Wt]=this,jr(e,this,d)};else if(r==="open")i=function(){let c=new ut("open");c[Wt]=this,jr(e,this,c)};else return;i[cr]=!!t[cr],i[ss]=e,t.once?this.once(r,i):this.on(r,i)},removeEventListener(r,e){for(let t of this.listeners(r))if(t[ss]===e&&!t[cr]){this.removeListener(r,t);break}}};oa.exports={CloseEvent:Tt,ErrorEvent:jt,Event:ut,EventTarget:a_,MessageEvent:lr};function jr(r,e,t){typeof r=="object"&&r.handleEvent?r.handleEvent.call(r,t):r.call(e,t)}});var is=x((wb,ua)=>{"use strict";var{tokenChars:fr}=ar();function et(r,e,t){r[e]===void 0?r[e]=[t]:r[e].push(t)}function u_(r){let e=Object.create(null),t=Object.create(null),i=!1,a=!1,c=!1,d,p,v=-1,b=-1,y=-1,E=0;for(;E<r.length;E++)if(b=r.charCodeAt(E),d===void 0)if(y===-1&&fr[b]===1)v===-1&&(v=E);else if(E!==0&&(b===32||b===9))y===-1&&v!==-1&&(y=E);else if(b===59||b===44){if(v===-1)throw new SyntaxError(`Unexpected character at index ${E}`);y===-1&&(y=E);let G=r.slice(v,y);b===44?(et(e,G,t),t=Object.create(null)):d=G,v=y=-1}else throw new SyntaxError(`Unexpected character at index ${E}`);else if(p===void 0)if(y===-1&&fr[b]===1)v===-1&&(v=E);else if(b===32||b===9)y===-1&&v!==-1&&(y=E);else if(b===59||b===44){if(v===-1)throw new SyntaxError(`Unexpected character at index ${E}`);y===-1&&(y=E),et(t,r.slice(v,y),!0),b===44&&(et(e,d,t),t=Object.create(null),d=void 0),v=y=-1}else if(b===61&&v!==-1&&y===-1)p=r.slice(v,E),v=y=-1;else throw new SyntaxError(`Unexpected character at index ${E}`);else if(a){if(fr[b]!==1)throw new SyntaxError(`Unexpected character at index ${E}`);v===-1?v=E:i||(i=!0),a=!1}else if(c)if(fr[b]===1)v===-1&&(v=E);else if(b===34&&v!==-1)c=!1,y=E;else if(b===92)a=!0;else throw new SyntaxError(`Unexpected character at index ${E}`);else if(b===34&&r.charCodeAt(E-1)===61)c=!0;else if(y===-1&&fr[b]===1)v===-1&&(v=E);else if(v!==-1&&(b===32||b===9))y===-1&&(y=E);else if(b===59||b===44){if(v===-1)throw new SyntaxError(`Unexpected character at index ${E}`);y===-1&&(y=E);let G=r.slice(v,y);i&&(G=G.replace(/\\/g,""),i=!1),et(t,p,G),b===44&&(et(e,d,t),t=Object.create(null),d=void 0),p=void 0,v=y=-1}else throw new SyntaxError(`Unexpected character at index ${E}`);if(v===-1||c||b===32||b===9)throw new SyntaxError("Unexpected end of input");y===-1&&(y=E);let S=r.slice(v,y);return d===void 0?et(e,S,t):(p===void 0?et(t,S,!0):i?et(t,p,S.replace(/\\/g,"")):et(t,p,S),et(e,d,t)),e}function c_(r){return Object.keys(r).map(e=>{let t=r[e];return Array.isArray(t)||(t=[t]),t.map(i=>[e].concat(Object.keys(i).map(a=>{let c=i[a];return Array.isArray(c)||(c=[c]),c.map(d=>d===!0?a:`${a}=${d}`).join("; ")})).join("; ")).join(", ")}).join(", ")}ua.exports={format:c_,parse:u_}});var ls=x((Rb,ba)=>{"use strict";var l_=require("events"),f_=require("https"),d_=require("http"),fa=require("net"),h_=require("tls"),{randomBytes:__,createHash:p_}=require("crypto"),{Readable:kb}=require("stream"),{URL:os}=require("url"),gt=or(),m_=ts(),g_=ns(),{BINARY_TYPES:ca,EMPTY_BUFFER:Gr,GUID:y_,kForOnEventAttribute:as,kListener:b_,kStatusCode:v_,kWebSocket:Ie,NOOP:da}=pt(),{EventTarget:{addEventListener:E_,removeEventListener:S_}}=aa(),{format:w_,parse:k_}=is(),{toBuffer:R_}=nr(),T_=30*1e3,ha=Symbol("kAborted"),us=[8,13],ct=["CONNECTING","OPEN","CLOSING","CLOSED"],A_=/^[!#$%&'*+\-.0-9A-Z^_`|a-z~]+$/,De=class r extends l_{constructor(e,t,i){super(),this._binaryType=ca[0],this._closeCode=1006,this._closeFrameReceived=!1,this._closeFrameSent=!1,this._closeMessage=Gr,this._closeTimer=null,this._extensions={},this._paused=!1,this._protocol="",this._readyState=r.CONNECTING,this._receiver=null,this._sender=null,this._socket=null,e!==null?(this._bufferedAmount=0,this._isServer=!1,this._redirects=0,t===void 0?t=[]:Array.isArray(t)||(typeof t=="object"&&t!==null?(i=t,t=[]):t=[t]),_a(this,e,t,i)):this._isServer=!0}get binaryType(){return this._binaryType}set binaryType(e){ca.includes(e)&&(this._binaryType=e,this._receiver&&(this._receiver._binaryType=e))}get bufferedAmount(){return this._socket?this._socket._writableState.length+this._sender._bufferedBytes:this._bufferedAmount}get extensions(){return Object.keys(this._extensions).join()}get isPaused(){return this._paused}get onclose(){return null}get onerror(){return null}get onopen(){return null}get onmessage(){return null}get protocol(){return this._protocol}get readyState(){return this._readyState}get url(){return this._url}setSocket(e,t,i){let a=new m_({binaryType:this.binaryType,extensions:this._extensions,isServer:this._isServer,maxPayload:i.maxPayload,skipUTF8Validation:i.skipUTF8Validation});this._sender=new g_(e,this._extensions,i.generateMask),this._receiver=a,this._socket=e,a[Ie]=this,e[Ie]=this,a.on("conclude",x_),a.on("drain",C_),a.on("error",O_),a.on("message",F_),a.on("ping",M_),a.on("pong",I_),e.setTimeout(0),e.setNoDelay(),t.length>0&&e.unshift(t),e.on("close",ma),e.on("data",zr),e.on("end",ga),e.on("error",ya),this._readyState=r.OPEN,this.emit("open")}emitClose(){if(!this._socket){this._readyState=r.CLOSED,this.emit("close",this._closeCode,this._closeMessage);return}this._extensions[gt.extensionName]&&this._extensions[gt.extensionName].cleanup(),this._receiver.removeAllListeners(),this._readyState=r.CLOSED,this.emit("close",this._closeCode,this._closeMessage)}close(e,t){if(this.readyState!==r.CLOSED){if(this.readyState===r.CONNECTING){let i="WebSocket was closed before the connection was established";$e(this,this._req,i);return}if(this.readyState===r.CLOSING){this._closeFrameSent&&(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end();return}this._readyState=r.CLOSING,this._sender.close(e,t,!this._isServer,i=>{i||(this._closeFrameSent=!0,(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end())}),this._closeTimer=setTimeout(this._socket.destroy.bind(this._socket),T_)}}pause(){this.readyState===r.CONNECTING||this.readyState===r.CLOSED||(this._paused=!0,this._socket.pause())}ping(e,t,i){if(this.readyState===r.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if(typeof e=="function"?(i=e,e=t=void 0):typeof t=="function"&&(i=t,t=void 0),typeof e=="number"&&(e=e.toString()),this.readyState!==r.OPEN){cs(this,e,i);return}t===void 0&&(t=!this._isServer),this._sender.ping(e||Gr,t,i)}pong(e,t,i){if(this.readyState===r.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if(typeof e=="function"?(i=e,e=t=void 0):typeof t=="function"&&(i=t,t=void 0),typeof e=="number"&&(e=e.toString()),this.readyState!==r.OPEN){cs(this,e,i);return}t===void 0&&(t=!this._isServer),this._sender.pong(e||Gr,t,i)}resume(){this.readyState===r.CONNECTING||this.readyState===r.CLOSED||(this._paused=!1,this._receiver._writableState.needDrain||this._socket.resume())}send(e,t,i){if(this.readyState===r.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if(typeof t=="function"&&(i=t,t={}),typeof e=="number"&&(e=e.toString()),this.readyState!==r.OPEN){cs(this,e,i);return}let a={binary:typeof e!="string",mask:!this._isServer,compress:!0,fin:!0,...t};this._extensions[gt.extensionName]||(a.compress=!1),this._sender.send(e||Gr,a,i)}terminate(){if(this.readyState!==r.CLOSED){if(this.readyState===r.CONNECTING){let e="WebSocket was closed before the connection was established";$e(this,this._req,e);return}this._socket&&(this._readyState=r.CLOSING,this._socket.destroy())}}};Object.defineProperty(De,"CONNECTING",{enumerable:!0,value:ct.indexOf("CONNECTING")});Object.defineProperty(De.prototype,"CONNECTING",{enumerable:!0,value:ct.indexOf("CONNECTING")});Object.defineProperty(De,"OPEN",{enumerable:!0,value:ct.indexOf("OPEN")});Object.defineProperty(De.prototype,"OPEN",{enumerable:!0,value:ct.indexOf("OPEN")});Object.defineProperty(De,"CLOSING",{enumerable:!0,value:ct.indexOf("CLOSING")});Object.defineProperty(De.prototype,"CLOSING",{enumerable:!0,value:ct.indexOf("CLOSING")});Object.defineProperty(De,"CLOSED",{enumerable:!0,value:ct.indexOf("CLOSED")});Object.defineProperty(De.prototype,"CLOSED",{enumerable:!0,value:ct.indexOf("CLOSED")});["binaryType","bufferedAmount","extensions","isPaused","protocol","readyState","url"].forEach(r=>{Object.defineProperty(De.prototype,r,{enumerable:!0})});["open","error","close","message"].forEach(r=>{Object.defineProperty(De.prototype,`on${r}`,{enumerable:!0,get(){for(let e of this.listeners(r))if(e[as])return e[b_];return null},set(e){for(let t of this.listeners(r))if(t[as]){this.removeListener(r,t);break}typeof e=="function"&&this.addEventListener(r,e,{[as]:!0})}})});De.prototype.addEventListener=E_;De.prototype.removeEventListener=S_;ba.exports=De;function _a(r,e,t,i){let a={protocolVersion:us[1],maxPayload:104857600,skipUTF8Validation:!1,perMessageDeflate:!0,followRedirects:!1,maxRedirects:10,...i,createConnection:void 0,socketPath:void 0,hostname:void 0,protocol:void 0,timeout:void 0,method:"GET",host:void 0,path:void 0,port:void 0};if(!us.includes(a.protocolVersion))throw new RangeError(`Unsupported protocol version: ${a.protocolVersion} (supported versions: ${us.join(", ")})`);let c;if(e instanceof os)c=e,r._url=e.href;else{try{c=new os(e)}catch{throw new SyntaxError(`Invalid URL: ${e}`)}r._url=e}let d=c.protocol==="wss:",p=c.protocol==="ws+unix:",v;if(c.protocol!=="ws:"&&!d&&!p?v=`The URL's protocol must be one of "ws:", "wss:", or "ws+unix:"`:p&&!c.pathname?v="The URL's pathname is empty":c.hash&&(v="The URL contains a fragment identifier"),v){let A=new SyntaxError(v);if(r._redirects===0)throw A;Vr(r,A);return}let b=d?443:80,y=__(16).toString("base64"),E=d?f_.request:d_.request,S=new Set,G;if(a.createConnection=d?D_:P_,a.defaultPort=a.defaultPort||b,a.port=c.port||b,a.host=c.hostname.startsWith("[")?c.hostname.slice(1,-1):c.hostname,a.headers={...a.headers,"Sec-WebSocket-Version":a.protocolVersion,"Sec-WebSocket-Key":y,Connection:"Upgrade",Upgrade:"websocket"},a.path=c.pathname+c.search,a.timeout=a.handshakeTimeout,a.perMessageDeflate&&(G=new gt(a.perMessageDeflate!==!0?a.perMessageDeflate:{},!1,a.maxPayload),a.headers["Sec-WebSocket-Extensions"]=w_({[gt.extensionName]:G.offer()})),t.length){for(let A of t){if(typeof A!="string"||!A_.test(A)||S.has(A))throw new SyntaxError("An invalid or duplicated subprotocol was specified");S.add(A)}a.headers["Sec-WebSocket-Protocol"]=t.join(",")}if(a.origin&&(a.protocolVersion<13?a.headers["Sec-WebSocket-Origin"]=a.origin:a.headers.Origin=a.origin),(c.username||c.password)&&(a.auth=`${c.username}:${c.password}`),p){let A=a.path.split(":");a.socketPath=A[0],a.path=A[1]}let P;if(a.followRedirects){if(r._redirects===0){r._originalIpc=p,r._originalSecure=d,r._originalHostOrSocketPath=p?a.socketPath:c.host;let A=i&&i.headers;if(i={...i,headers:{}},A)for(let[N,V]of Object.entries(A))i.headers[N.toLowerCase()]=V}else if(r.listenerCount("redirect")===0){let A=p?r._originalIpc?a.socketPath===r._originalHostOrSocketPath:!1:r._originalIpc?!1:c.host===r._originalHostOrSocketPath;(!A||r._originalSecure&&!d)&&(delete a.headers.authorization,delete a.headers.cookie,A||delete a.headers.host,a.auth=void 0)}a.auth&&!i.headers.authorization&&(i.headers.authorization="Basic "+Buffer.from(a.auth).toString("base64")),P=r._req=E(a),r._redirects&&r.emit("redirect",r.url,P)}else P=r._req=E(a);a.timeout&&P.on("timeout",()=>{$e(r,P,"Opening handshake has timed out")}),P.on("error",A=>{P===null||P[ha]||(P=r._req=null,Vr(r,A))}),P.on("response",A=>{let N=A.headers.location,V=A.statusCode;if(N&&a.followRedirects&&V>=300&&V<400){if(++r._redirects>a.maxRedirects){$e(r,P,"Maximum redirects exceeded");return}P.abort();let se;try{se=new os(N,e)}catch{let me=new SyntaxError(`Invalid URL: ${N}`);Vr(r,me);return}_a(r,se,t,i)}else r.emit("unexpected-response",P,A)||$e(r,P,`Unexpected server response: ${A.statusCode}`)}),P.on("upgrade",(A,N,V)=>{if(r.emit("upgrade",A),r.readyState!==De.CONNECTING)return;if(P=r._req=null,A.headers.upgrade.toLowerCase()!=="websocket"){$e(r,N,"Invalid Upgrade header");return}let se=p_("sha1").update(y+y_).digest("base64");if(A.headers["sec-websocket-accept"]!==se){$e(r,N,"Invalid Sec-WebSocket-Accept header");return}let te=A.headers["sec-websocket-protocol"],me;if(te!==void 0?S.size?S.has(te)||(me="Server sent an invalid subprotocol"):me="Server sent a subprotocol but none was requested":S.size&&(me="Server sent no subprotocol"),me){$e(r,N,me);return}te&&(r._protocol=te);let O=A.headers["sec-websocket-extensions"];if(O!==void 0){if(!G){$e(r,N,"Server sent a Sec-WebSocket-Extensions header but no extension was requested");return}let oe;try{oe=k_(O)}catch{$e(r,N,"Invalid Sec-WebSocket-Extensions header");return}let X=Object.keys(oe);if(X.length!==1||X[0]!==gt.extensionName){$e(r,N,"Server indicated an extension that was not requested");return}try{G.accept(oe[gt.extensionName])}catch{$e(r,N,"Invalid Sec-WebSocket-Extensions header");return}r._extensions[gt.extensionName]=G}r.setSocket(N,V,{generateMask:a.generateMask,maxPayload:a.maxPayload,skipUTF8Validation:a.skipUTF8Validation})}),a.finishRequest?a.finishRequest(P,r):P.end()}function Vr(r,e){r._readyState=De.CLOSING,r.emit("error",e),r.emitClose()}function P_(r){return r.path=r.socketPath,fa.connect(r)}function D_(r){return r.path=void 0,!r.servername&&r.servername!==""&&(r.servername=fa.isIP(r.host)?"":r.host),h_.connect(r)}function $e(r,e,t){r._readyState=De.CLOSING;let i=new Error(t);Error.captureStackTrace(i,$e),e.setHeader?(e[ha]=!0,e.abort(),e.socket&&!e.socket.destroyed&&e.socket.destroy(),process.nextTick(Vr,r,i)):(e.destroy(i),e.once("error",r.emit.bind(r,"error")),e.once("close",r.emitClose.bind(r)))}function cs(r,e,t){if(e){let i=R_(e).length;r._socket?r._sender._bufferedBytes+=i:r._bufferedAmount+=i}if(t){let i=new Error(`WebSocket is not open: readyState ${r.readyState} (${ct[r.readyState]})`);process.nextTick(t,i)}}function x_(r,e){let t=this[Ie];t._closeFrameReceived=!0,t._closeMessage=e,t._closeCode=r,t._socket[Ie]!==void 0&&(t._socket.removeListener("data",zr),process.nextTick(pa,t._socket),r===1005?t.close():t.close(r,e))}function C_(){let r=this[Ie];r.isPaused||r._socket.resume()}function O_(r){let e=this[Ie];e._socket[Ie]!==void 0&&(e._socket.removeListener("data",zr),process.nextTick(pa,e._socket),e.close(r[v_])),e.emit("error",r)}function la(){this[Ie].emitClose()}function F_(r,e){this[Ie].emit("message",r,e)}function M_(r){let e=this[Ie];e.pong(r,!e._isServer,da),e.emit("ping",r)}function I_(r){this[Ie].emit("pong",r)}function pa(r){r.resume()}function ma(){let r=this[Ie];this.removeListener("close",ma),this.removeListener("data",zr),this.removeListener("end",ga),r._readyState=De.CLOSING;let e;!this._readableState.endEmitted&&!r._closeFrameReceived&&!r._receiver._writableState.errorEmitted&&(e=r._socket.read())!==null&&r._receiver.write(e),r._receiver.end(),this[Ie]=void 0,clearTimeout(r._closeTimer),r._receiver._writableState.finished||r._receiver._writableState.errorEmitted?r.emitClose():(r._receiver.on("error",la),r._receiver.on("finish",la))}function zr(r){this[Ie]._receiver.write(r)||this.pause()}function ga(){let r=this[Ie];r._readyState=De.CLOSING,r._receiver.end(),this.end()}function ya(){let r=this[Ie];this.removeListener("error",ya),this.on("error",da),r&&(r._readyState=De.CLOSING,this.destroy())}});var wa=x((Tb,Sa)=>{"use strict";var{Duplex:L_}=require("stream");function va(r){r.emit("close")}function N_(){!this.destroyed&&this._writableState.finished&&this.destroy()}function Ea(r){this.removeListener("error",Ea),this.destroy(),this.listenerCount("error")===0&&this.emit("error",r)}function B_(r,e){let t=!0,i=new L_({...e,autoDestroy:!1,emitClose:!1,objectMode:!1,writableObjectMode:!1});return r.on("message",function(c,d){let p=!d&&i._readableState.objectMode?c.toString():c;i.push(p)||r.pause()}),r.once("error",function(c){i.destroyed||(t=!1,i.destroy(c))}),r.once("close",function(){i.destroyed||i.push(null)}),i._destroy=function(a,c){if(r.readyState===r.CLOSED){c(a),process.nextTick(va,i);return}let d=!1;r.once("error",function(v){d=!0,c(v)}),r.once("close",function(){d||c(a),process.nextTick(va,i)}),t&&r.terminate()},i._final=function(a){if(r.readyState===r.CONNECTING){r.once("open",function(){i._final(a)});return}r._socket!==null&&(r._socket._writableState.finished?(a(),i._readableState.endEmitted&&i.destroy()):(r._socket.once("finish",function(){a()}),r.close()))},i._read=function(){r.isPaused&&r.resume()},i._write=function(a,c,d){if(r.readyState===r.CONNECTING){r.once("open",function(){i._write(a,c,d)});return}r.send(a,d)},i.on("end",N_),i.on("error",Ea),i}Sa.exports=B_});var Ra=x((Ab,ka)=>{"use strict";var{tokenChars:U_}=ar();function H_(r){let e=new Set,t=-1,i=-1,a=0;for(a;a<r.length;a++){let d=r.charCodeAt(a);if(i===-1&&U_[d]===1)t===-1&&(t=a);else if(a!==0&&(d===32||d===9))i===-1&&t!==-1&&(i=a);else if(d===44){if(t===-1)throw new SyntaxError(`Unexpected character at index ${a}`);i===-1&&(i=a);let p=r.slice(t,i);if(e.has(p))throw new SyntaxError(`The "${p}" subprotocol is duplicated`);e.add(p),t=i=-1}else throw new SyntaxError(`Unexpected character at index ${a}`)}if(t===-1||i!==-1)throw new SyntaxError("Unexpected end of input");let c=r.slice(t,a);if(e.has(c))throw new SyntaxError(`The "${c}" subprotocol is duplicated`);return e.add(c),e}ka.exports={parse:H_}});var Oa=x((Cb,Ca)=>{"use strict";var $_=require("events"),Kr=require("http"),Pb=require("https"),Db=require("net"),xb=require("tls"),{createHash:q_}=require("crypto"),Ta=is(),At=or(),W_=Ra(),j_=ls(),{GUID:G_,kWebSocket:V_}=pt(),z_=/^[+/0-9A-Za-z]{22}==$/,Aa=0,Pa=1,xa=2,fs=class extends $_{constructor(e,t){if(super(),e={maxPayload:100*1024*1024,skipUTF8Validation:!1,perMessageDeflate:!1,handleProtocols:null,clientTracking:!0,verifyClient:null,noServer:!1,backlog:null,server:null,host:null,path:null,port:null,WebSocket:j_,...e},e.port==null&&!e.server&&!e.noServer||e.port!=null&&(e.server||e.noServer)||e.server&&e.noServer)throw new TypeError('One and only one of the "port", "server", or "noServer" options must be specified');if(e.port!=null?(this._server=Kr.createServer((i,a)=>{let c=Kr.STATUS_CODES[426];a.writeHead(426,{"Content-Length":c.length,"Content-Type":"text/plain"}),a.end(c)}),this._server.listen(e.port,e.host,e.backlog,t)):e.server&&(this._server=e.server),this._server){let i=this.emit.bind(this,"connection");this._removeListeners=K_(this._server,{listening:this.emit.bind(this,"listening"),error:this.emit.bind(this,"error"),upgrade:(a,c,d)=>{this.handleUpgrade(a,c,d,i)}})}e.perMessageDeflate===!0&&(e.perMessageDeflate={}),e.clientTracking&&(this.clients=new Set,this._shouldEmitClose=!1),this.options=e,this._state=Aa}address(){if(this.options.noServer)throw new Error('The server is operating in "noServer" mode');return this._server?this._server.address():null}close(e){if(this._state===xa){e&&this.once("close",()=>{e(new Error("The server is not running"))}),process.nextTick(dr,this);return}if(e&&this.once("close",e),this._state!==Pa)if(this._state=Pa,this.options.noServer||this.options.server)this._server&&(this._removeListeners(),this._removeListeners=this._server=null),this.clients?this.clients.size?this._shouldEmitClose=!0:process.nextTick(dr,this):process.nextTick(dr,this);else{let t=this._server;this._removeListeners(),this._removeListeners=this._server=null,t.close(()=>{dr(this)})}}shouldHandle(e){if(this.options.path){let t=e.url.indexOf("?");if((t!==-1?e.url.slice(0,t):e.url)!==this.options.path)return!1}return!0}handleUpgrade(e,t,i,a){t.on("error",Da);let c=e.headers["sec-websocket-key"],d=+e.headers["sec-websocket-version"];if(e.method!=="GET"){Pt(this,e,t,405,"Invalid HTTP method");return}if(e.headers.upgrade.toLowerCase()!=="websocket"){Pt(this,e,t,400,"Invalid Upgrade header");return}if(!c||!z_.test(c)){Pt(this,e,t,400,"Missing or invalid Sec-WebSocket-Key header");return}if(d!==8&&d!==13){Pt(this,e,t,400,"Missing or invalid Sec-WebSocket-Version header");return}if(!this.shouldHandle(e)){hr(t,400);return}let p=e.headers["sec-websocket-protocol"],v=new Set;if(p!==void 0)try{v=W_.parse(p)}catch{Pt(this,e,t,400,"Invalid Sec-WebSocket-Protocol header");return}let b=e.headers["sec-websocket-extensions"],y={};if(this.options.perMessageDeflate&&b!==void 0){let E=new At(this.options.perMessageDeflate,!0,this.options.maxPayload);try{let S=Ta.parse(b);S[At.extensionName]&&(E.accept(S[At.extensionName]),y[At.extensionName]=E)}catch{Pt(this,e,t,400,"Invalid or unacceptable Sec-WebSocket-Extensions header");return}}if(this.options.verifyClient){let E={origin:e.headers[`${d===8?"sec-websocket-origin":"origin"}`],secure:!!(e.socket.authorized||e.socket.encrypted),req:e};if(this.options.verifyClient.length===2){this.options.verifyClient(E,(S,G,P,A)=>{if(!S)return hr(t,G||401,P,A);this.completeUpgrade(y,c,v,e,t,i,a)});return}if(!this.options.verifyClient(E))return hr(t,401)}this.completeUpgrade(y,c,v,e,t,i,a)}completeUpgrade(e,t,i,a,c,d,p){if(!c.readable||!c.writable)return c.destroy();if(c[V_])throw new Error("server.handleUpgrade() was called more than once with the same socket, possibly due to a misconfiguration");if(this._state>Aa)return hr(c,503);let b=["HTTP/1.1 101 Switching Protocols","Upgrade: websocket","Connection: Upgrade",`Sec-WebSocket-Accept: ${q_("sha1").update(t+G_).digest("base64")}`],y=new this.options.WebSocket(null);if(i.size){let E=this.options.handleProtocols?this.options.handleProtocols(i,a):i.values().next().value;E&&(b.push(`Sec-WebSocket-Protocol: ${E}`),y._protocol=E)}if(e[At.extensionName]){let E=e[At.extensionName].params,S=Ta.format({[At.extensionName]:[E]});b.push(`Sec-WebSocket-Extensions: ${S}`),y._extensions=e}this.emit("headers",b,a),c.write(b.concat(`\r
`).join(`\r
`)),c.removeListener("error",Da),y.setSocket(c,d,{maxPayload:this.options.maxPayload,skipUTF8Validation:this.options.skipUTF8Validation}),this.clients&&(this.clients.add(y),y.on("close",()=>{this.clients.delete(y),this._shouldEmitClose&&!this.clients.size&&process.nextTick(dr,this)})),p(y,a)}};Ca.exports=fs;function K_(r,e){for(let t of Object.keys(e))r.on(t,e[t]);return function(){for(let i of Object.keys(e))r.removeListener(i,e[i])}}function dr(r){r._state=xa,r.emit("close")}function Da(){this.destroy()}function hr(r,e,t,i){t=t||Kr.STATUS_CODES[e],i={Connection:"close","Content-Type":"text/html","Content-Length":Buffer.byteLength(t),...i},r.once("finish",r.destroy),r.end(`HTTP/1.1 ${e} ${Kr.STATUS_CODES[e]}\r
`+Object.keys(i).map(a=>`${a}: ${i[a]}`).join(`\r
`)+`\r
\r
`+t)}function Pt(r,e,t,i,a){if(r.listenerCount("wsClientError")){let c=new Error(a);Error.captureStackTrace(c,Pt),r.emit("wsClientError",c,t,e)}else hr(t,i,a)}});var ds=x((Ob,Fa)=>{"use strict";var lt=ls();lt.createWebSocketStream=wa();lt.Server=Oa();lt.Receiver=ts();lt.Sender=ns();lt.WebSocket=lt;lt.WebSocketServer=lt.Server;Fa.exports=lt});var ps=x((Yr,_s)=>{"use strict";var hs=(()=>{var r=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return typeof __filename<"u"&&(r=r||__filename),function(e={}){var t=typeof e<"u"?e:{},i,a;t.ready=new Promise((n,s)=>{i=n,a=s});var c=Object.assign({},t),d=[],p="./this.program",v=(n,s)=>{throw s},b=typeof window=="object",y=typeof importScripts=="function",E=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",S="";function G(n){return t.locateFile?t.locateFile(n,S):S+n}var P,A,N,V;if(E){var se=require("fs"),te=require("path");y?S=te.dirname(S)+"/":S=__dirname+"/",P=(n,s)=>(n=so(n)?new URL(n):te.normalize(n),se.readFileSync(n,s?void 0:"utf8")),N=n=>{var s=P(n,!0);return s.buffer||(s=new Uint8Array(s)),s},A=(n,s,o,u=!0)=>{n=so(n)?new URL(n):te.normalize(n),se.readFile(n,u?void 0:"utf8",(f,h)=>{f?o(f):s(u?h.buffer:h)})},!t.thisProgram&&process.argv.length>1&&(p=process.argv[1].replace(/\\/g,"/")),d=process.argv.slice(2),v=(n,s)=>{throw process.exitCode=n,s},t.inspect=()=>"[Emscripten Module object]"}else(b||y)&&(y?S=self.location.href:typeof document<"u"&&document.currentScript&&(S=document.currentScript.src),r&&(S=r),S.indexOf("blob:")!==0?S=S.substr(0,S.replace(/[?#].*/,"").lastIndexOf("/")+1):S="",P=n=>{var s=new XMLHttpRequest;return s.open("GET",n,!1),s.send(null),s.responseText},y&&(N=n=>{var s=new XMLHttpRequest;return s.open("GET",n,!1),s.responseType="arraybuffer",s.send(null),new Uint8Array(s.response)}),A=(n,s,o)=>{var u=new XMLHttpRequest;u.open("GET",n,!0),u.responseType="arraybuffer",u.onload=()=>{if(u.status==200||u.status==0&&u.response){s(u.response);return}o()},u.onerror=o,u.send(null)},V=n=>document.title=n);var me=t.print||console.log.bind(console),O=t.printErr||console.error.bind(console);Object.assign(t,c),c=null,t.arguments&&(d=t.arguments),t.thisProgram&&(p=t.thisProgram),t.quit&&(v=t.quit);var oe;t.wasmBinary&&(oe=t.wasmBinary);var X=t.noExitRuntime||!0;typeof WebAssembly!="object"&&de("no native wasm support detected");var $,L=!1,ae;function R(n,s){n||de(s)}var W,z,le,w,g,j,ue,je;function He(){var n=$.buffer;t.HEAP8=W=new Int8Array(n),t.HEAP16=le=new Int16Array(n),t.HEAP32=g=new Int32Array(n),t.HEAPU8=z=new Uint8Array(n),t.HEAPU16=w=new Uint16Array(n),t.HEAPU32=j=new Uint32Array(n),t.HEAPF32=ue=new Float32Array(n),t.HEAPF64=je=new Float64Array(n)}var Be,kt=[],br=[],It=[],Ze=[],re=!1,Lt=0;function On(){return X||Lt>0}function F(){if(t.preRun)for(typeof t.preRun=="function"&&(t.preRun=[t.preRun]);t.preRun.length;)we(t.preRun.shift());Er(kt)}function ge(){re=!0,!t.noFSInit&&!l.init.initialized&&l.init(),l.ignorePermissions=!1,_t.init(),be.root=l.mount(be,{},null),Er(br)}function C(){Er(It)}function Z(){if(t.postRun)for(typeof t.postRun=="function"&&(t.postRun=[t.postRun]);t.postRun.length;)Te(t.postRun.shift());Er(Ze)}function we(n){kt.unshift(n)}function Fe(n){br.unshift(n)}function Te(n){Ze.unshift(n)}var Ye=0,ht=null,Jt=null;function ub(n){return n}function Fn(n){Ye++,t.monitorRunDependencies&&t.monitorRunDependencies(Ye)}function vr(n){if(Ye--,t.monitorRunDependencies&&t.monitorRunDependencies(Ye),Ye==0&&(ht!==null&&(clearInterval(ht),ht=null),Jt)){var s=Jt;Jt=null,s()}}function de(n){t.onAbort&&t.onAbort(n),n="Aborted("+n+")",O(n),L=!0,ae=1,n+=". Build with -sASSERTIONS for more info.";var s=new WebAssembly.RuntimeError(n);throw a(s),s}var Fl="data:application/octet-stream;base64,";function no(n){return n.startsWith(Fl)}function so(n){return n.startsWith("file://")}var Nt;Nt="./duckdb-mvp.wasm",no(Nt)||(Nt=G(Nt));function io(n){try{if(n==Nt&&oe)return new Uint8Array(oe);if(N)return N(n);throw"both async and sync fetching of the wasm failed"}catch(s){de(s)}}function Ml(n){return!oe&&(b||y)&&typeof fetch=="function"?fetch(n,{credentials:"same-origin"}).then(s=>{if(!s.ok)throw"failed to load wasm binary file at '"+n+"'";return s.arrayBuffer()}).catch(()=>io(n)):Promise.resolve().then(()=>io(n))}function oo(n,s,o){return Ml(n).then(u=>WebAssembly.instantiate(u,s)).then(u=>u).then(o,u=>{O("failed to asynchronously prepare wasm: "+u),de(u)})}function Il(n,s,o,u){return!n&&typeof WebAssembly.instantiateStreaming=="function"&&!no(s)&&!E&&typeof fetch=="function"?fetch(s,{credentials:"same-origin"}).then(f=>{var h=WebAssembly.instantiateStreaming(f,o);return h.then(u,function(_){return O("wasm streaming compile failed: "+_),O("falling back to ArrayBuffer instantiation"),oo(s,o,u)})}):oo(s,o,u)}function Ll(){var n={a:qd};function s(u,f){var h=u.exports;return t.asm=h,$=t.asm.Ga,He(),Be=t.asm.Ja,Fe(t.asm.Ha),vr("wasm-instantiate"),h}Fn("wasm-instantiate");function o(u){s(u.instance)}if(t.instantiateWasm)try{return t.instantiateWasm(n,s)}catch(u){O("Module.instantiateWasm callback failed with error: "+u),a(u)}return Il(oe,Nt,n,o).catch(a),{}}var U,he;function ao(n){this.name="ExitStatus",this.message=`Program terminated with exit(${n})`,this.status=n}function Er(n){for(;n.length>0;)n.shift()(t)}function Nl(){O("missing function: XML_GetBuffer"),de(-1)}function Bl(){O("missing function: XML_GetErrorCode"),de(-1)}function Ul(){O("missing function: XML_Parse"),de(-1)}function Hl(){O("missing function: XML_ParseBuffer"),de(-1)}function $l(){O("missing function: XML_ParserCreate"),de(-1)}function ql(){O("missing function: XML_ParserFree"),de(-1)}function Wl(){O("missing function: XML_ResumeParser"),de(-1)}function jl(){O("missing function: XML_SetCharacterDataHandler"),de(-1)}function Gl(){O("missing function: XML_SetElementHandler"),de(-1)}function Vl(){O("missing function: XML_SetUserData"),de(-1)}function zl(){O("missing function: XML_StopParser"),de(-1)}function Kl(n){this.excPtr=n,this.ptr=n-24,this.set_type=function(s){j[this.ptr+4>>>2]=s},this.get_type=function(){return j[this.ptr+4>>>2]},this.set_destructor=function(s){j[this.ptr+8>>>2]=s},this.get_destructor=function(){return j[this.ptr+8>>>2]},this.set_caught=function(s){s=s?1:0,W[this.ptr+12>>>0]=s},this.get_caught=function(){return W[this.ptr+12>>>0]!=0},this.set_rethrown=function(s){s=s?1:0,W[this.ptr+13>>>0]=s},this.get_rethrown=function(){return W[this.ptr+13>>>0]!=0},this.init=function(s,o){this.set_adjusted_ptr(0),this.set_type(s),this.set_destructor(o)},this.set_adjusted_ptr=function(s){j[this.ptr+16>>>2]=s},this.get_adjusted_ptr=function(){return j[this.ptr+16>>>2]},this.get_exception_ptr=function(){var s=Ao(this.get_type());if(s)return j[this.excPtr>>>2];var o=this.get_adjusted_ptr();return o!==0?o:this.excPtr}}var uo=0,Yl=0;function Xl(n,s,o){var u=new Kl(n);throw u.init(s,o),uo=n,Yl++,uo}var co="To use dlopen, you need enable dynamic linking, see https://emscripten.org/docs/compiling/Dynamic-Linking.html";function Ql(n,s,o){de(co)}var _e={isAbs:n=>n.charAt(0)==="/",splitPath:n=>{var s=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;return s.exec(n).slice(1)},normalizeArray:(n,s)=>{for(var o=0,u=n.length-1;u>=0;u--){var f=n[u];f==="."?n.splice(u,1):f===".."?(n.splice(u,1),o++):o&&(n.splice(u,1),o--)}if(s)for(;o;o--)n.unshift("..");return n},normalize:n=>{var s=_e.isAbs(n),o=n.substr(-1)==="/";return n=_e.normalizeArray(n.split("/").filter(u=>!!u),!s).join("/"),!n&&!s&&(n="."),n&&o&&(n+="/"),(s?"/":"")+n},dirname:n=>{var s=_e.splitPath(n),o=s[0],u=s[1];return!o&&!u?".":(u&&(u=u.substr(0,u.length-1)),o+u)},basename:n=>{if(n==="/")return"/";n=_e.normalize(n),n=n.replace(/\/$/,"");var s=n.lastIndexOf("/");return s===-1?n:n.substr(s+1)},join:function(){var n=Array.prototype.slice.call(arguments);return _e.normalize(n.join("/"))},join2:(n,s)=>_e.normalize(n+"/"+s)};function Jl(){if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function")return u=>crypto.getRandomValues(u);if(E)try{var n=require("crypto"),s=n.randomFillSync;if(s)return u=>n.randomFillSync(u);var o=n.randomBytes;return u=>(u.set(o(u.byteLength)),u)}catch{}de("initRandomDevice")}function Mn(n){return(Mn=Jl())(n)}var ot={resolve:function(){for(var n="",s=!1,o=arguments.length-1;o>=-1&&!s;o--){var u=o>=0?arguments[o]:l.cwd();if(typeof u!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!u)return"";n=u+"/"+n,s=_e.isAbs(u)}return n=_e.normalizeArray(n.split("/").filter(f=>!!f),!s).join("/"),(s?"/":"")+n||"."},relative:(n,s)=>{n=ot.resolve(n).substr(1),s=ot.resolve(s).substr(1);function o(D){for(var M=0;M<D.length&&D[M]==="";M++);for(var K=D.length-1;K>=0&&D[K]==="";K--);return M>K?[]:D.slice(M,K-M+1)}for(var u=o(n.split("/")),f=o(s.split("/")),h=Math.min(u.length,f.length),_=h,m=0;m<h;m++)if(u[m]!==f[m]){_=m;break}for(var k=[],m=_;m<u.length;m++)k.push("..");return k=k.concat(f.slice(_)),k.join("/")}};function Sr(n){for(var s=0,o=0;o<n.length;++o){var u=n.charCodeAt(o);u<=127?s++:u<=2047?s+=2:u>=55296&&u<=57343?(s+=4,++o):s+=3}return s}function In(n,s,o,u){if(o>>>=0,!(u>0))return 0;for(var f=o,h=o+u-1,_=0;_<n.length;++_){var m=n.charCodeAt(_);if(m>=55296&&m<=57343){var k=n.charCodeAt(++_);m=65536+((m&1023)<<10)|k&1023}if(m<=127){if(o>=h)break;s[o++>>>0]=m}else if(m<=2047){if(o+1>=h)break;s[o++>>>0]=192|m>>6,s[o++>>>0]=128|m&63}else if(m<=65535){if(o+2>=h)break;s[o++>>>0]=224|m>>12,s[o++>>>0]=128|m>>6&63,s[o++>>>0]=128|m&63}else{if(o+3>=h)break;s[o++>>>0]=240|m>>18,s[o++>>>0]=128|m>>12&63,s[o++>>>0]=128|m>>6&63,s[o++>>>0]=128|m&63}}return s[o>>>0]=0,o-f}function wr(n,s,o){var u=o>0?o:Sr(n)+1,f=new Array(u),h=In(n,f,0,f.length);return s&&(f.length=h),f}var lo=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function Bt(n,s,o){s>>>=0;for(var u=s+o,f=s;n[f]&&!(f>=u);)++f;if(f-s>16&&n.buffer&&lo)return lo.decode(n.subarray(s,f));for(var h="";s<f;){var _=n[s++];if(!(_&128)){h+=String.fromCharCode(_);continue}var m=n[s++]&63;if((_&224)==192){h+=String.fromCharCode((_&31)<<6|m);continue}var k=n[s++]&63;if((_&240)==224?_=(_&15)<<12|m<<6|k:_=(_&7)<<18|m<<12|k<<6|n[s++]&63,_<65536)h+=String.fromCharCode(_);else{var D=_-65536;h+=String.fromCharCode(55296|D>>10,56320|D&1023)}}return h}var _t={ttys:[],init:function(){},shutdown:function(){},register:function(n,s){_t.ttys[n]={input:[],output:[],ops:s},l.registerDevice(n,_t.stream_ops)},stream_ops:{open:function(n){var s=_t.ttys[n.node.rdev];if(!s)throw new l.ErrnoError(43);n.tty=s,n.seekable=!1},close:function(n){n.tty.ops.fsync(n.tty)},fsync:function(n){n.tty.ops.fsync(n.tty)},read:function(n,s,o,u,f){if(!n.tty||!n.tty.ops.get_char)throw new l.ErrnoError(60);for(var h=0,_=0;_<u;_++){var m;try{m=n.tty.ops.get_char(n.tty)}catch{throw new l.ErrnoError(29)}if(m===void 0&&h===0)throw new l.ErrnoError(6);if(m==null)break;h++,s[o+_]=m}return h&&(n.node.timestamp=Date.now()),h},write:function(n,s,o,u,f){if(!n.tty||!n.tty.ops.put_char)throw new l.ErrnoError(60);try{for(var h=0;h<u;h++)n.tty.ops.put_char(n.tty,s[o+h])}catch{throw new l.ErrnoError(29)}return u&&(n.node.timestamp=Date.now()),h}},default_tty_ops:{get_char:function(n){if(!n.input.length){var s=null;if(E){var o=256,u=Buffer.alloc(o),f=0;try{f=se.readSync(process.stdin.fd,u,0,o,-1)}catch(h){if(h.toString().includes("EOF"))f=0;else throw h}f>0?s=u.slice(0,f).toString("utf-8"):s=null}else typeof window<"u"&&typeof window.prompt=="function"?(s=window.prompt("Input: "),s!==null&&(s+=`
`)):typeof readline=="function"&&(s=readline(),s!==null&&(s+=`
`));if(!s)return null;n.input=wr(s,!0)}return n.input.shift()},put_char:function(n,s){s===null||s===10?(me(Bt(n.output,0)),n.output=[]):s!=0&&n.output.push(s)},fsync:function(n){n.output&&n.output.length>0&&(me(Bt(n.output,0)),n.output=[])}},default_tty1_ops:{put_char:function(n,s){s===null||s===10?(O(Bt(n.output,0)),n.output=[]):s!=0&&n.output.push(s)},fsync:function(n){n.output&&n.output.length>0&&(O(Bt(n.output,0)),n.output=[])}}};function Ln(n,s){return z.fill(0,n,n+s),n}function Zl(n,s){return Math.ceil(n/s)*s}function fo(n){n=Zl(n,65536);var s=To(65536,n);return s?Ln(s,n):0}var J={ops_table:null,mount:function(n){return J.createNode(null,"/",16895,0)},createNode:function(n,s,o,u){if(l.isBlkdev(o)||l.isFIFO(o))throw new l.ErrnoError(63);J.ops_table||(J.ops_table={dir:{node:{getattr:J.node_ops.getattr,setattr:J.node_ops.setattr,lookup:J.node_ops.lookup,mknod:J.node_ops.mknod,rename:J.node_ops.rename,unlink:J.node_ops.unlink,rmdir:J.node_ops.rmdir,readdir:J.node_ops.readdir,symlink:J.node_ops.symlink},stream:{llseek:J.stream_ops.llseek}},file:{node:{getattr:J.node_ops.getattr,setattr:J.node_ops.setattr},stream:{llseek:J.stream_ops.llseek,read:J.stream_ops.read,write:J.stream_ops.write,allocate:J.stream_ops.allocate,mmap:J.stream_ops.mmap,msync:J.stream_ops.msync}},link:{node:{getattr:J.node_ops.getattr,setattr:J.node_ops.setattr,readlink:J.node_ops.readlink},stream:{}},chrdev:{node:{getattr:J.node_ops.getattr,setattr:J.node_ops.setattr},stream:l.chrdev_stream_ops}});var f=l.createNode(n,s,o,u);return l.isDir(f.mode)?(f.node_ops=J.ops_table.dir.node,f.stream_ops=J.ops_table.dir.stream,f.contents={}):l.isFile(f.mode)?(f.node_ops=J.ops_table.file.node,f.stream_ops=J.ops_table.file.stream,f.usedBytes=0,f.contents=null):l.isLink(f.mode)?(f.node_ops=J.ops_table.link.node,f.stream_ops=J.ops_table.link.stream):l.isChrdev(f.mode)&&(f.node_ops=J.ops_table.chrdev.node,f.stream_ops=J.ops_table.chrdev.stream),f.timestamp=Date.now(),n&&(n.contents[s]=f,n.timestamp=f.timestamp),f},getFileDataAsTypedArray:function(n){return n.contents?n.contents.subarray?n.contents.subarray(0,n.usedBytes):new Uint8Array(n.contents):new Uint8Array(0)},expandFileStorage:function(n,s){s>>>=0;var o=n.contents?n.contents.length:0;if(!(o>=s)){var u=1024*1024;s=Math.max(s,o*(o<u?2:1.125)>>>0),o!=0&&(s=Math.max(s,256));var f=n.contents;n.contents=new Uint8Array(s),n.usedBytes>0&&n.contents.set(f.subarray(0,n.usedBytes),0)}},resizeFileStorage:function(n,s){if(s>>>=0,n.usedBytes!=s)if(s==0)n.contents=null,n.usedBytes=0;else{var o=n.contents;n.contents=new Uint8Array(s),o&&n.contents.set(o.subarray(0,Math.min(s,n.usedBytes))),n.usedBytes=s}},node_ops:{getattr:function(n){var s={};return s.dev=l.isChrdev(n.mode)?n.id:1,s.ino=n.id,s.mode=n.mode,s.nlink=1,s.uid=0,s.gid=0,s.rdev=n.rdev,l.isDir(n.mode)?s.size=4096:l.isFile(n.mode)?s.size=n.usedBytes:l.isLink(n.mode)?s.size=n.link.length:s.size=0,s.atime=new Date(n.timestamp),s.mtime=new Date(n.timestamp),s.ctime=new Date(n.timestamp),s.blksize=4096,s.blocks=Math.ceil(s.size/s.blksize),s},setattr:function(n,s){s.mode!==void 0&&(n.mode=s.mode),s.timestamp!==void 0&&(n.timestamp=s.timestamp),s.size!==void 0&&J.resizeFileStorage(n,s.size)},lookup:function(n,s){throw l.genericErrors[44]},mknod:function(n,s,o,u){return J.createNode(n,s,o,u)},rename:function(n,s,o){if(l.isDir(n.mode)){var u;try{u=l.lookupNode(s,o)}catch{}if(u)for(var f in u.contents)throw new l.ErrnoError(55)}delete n.parent.contents[n.name],n.parent.timestamp=Date.now(),n.name=o,s.contents[o]=n,s.timestamp=n.parent.timestamp,n.parent=s},unlink:function(n,s){delete n.contents[s],n.timestamp=Date.now()},rmdir:function(n,s){var o=l.lookupNode(n,s);for(var u in o.contents)throw new l.ErrnoError(55);delete n.contents[s],n.timestamp=Date.now()},readdir:function(n){var s=[".",".."];for(var o in n.contents)n.contents.hasOwnProperty(o)&&s.push(o);return s},symlink:function(n,s,o){var u=J.createNode(n,s,41471,0);return u.link=o,u},readlink:function(n){if(!l.isLink(n.mode))throw new l.ErrnoError(28);return n.link}},stream_ops:{read:function(n,s,o,u,f){var h=n.node.contents;if(f>=n.node.usedBytes)return 0;var _=Math.min(n.node.usedBytes-f,u);if(_>8&&h.subarray)s.set(h.subarray(f,f+_),o);else for(var m=0;m<_;m++)s[o+m]=h[f+m];return _},write:function(n,s,o,u,f,h){if(s.buffer===W.buffer&&(h=!1),!u)return 0;var _=n.node;if(_.timestamp=Date.now(),s.subarray&&(!_.contents||_.contents.subarray)){if(h)return _.contents=s.subarray(o,o+u),_.usedBytes=u,u;if(_.usedBytes===0&&f===0)return _.contents=s.slice(o,o+u),_.usedBytes=u,u;if(f+u<=_.usedBytes)return _.contents.set(s.subarray(o,o+u),f),u}if(J.expandFileStorage(_,f+u),_.contents.subarray&&s.subarray)_.contents.set(s.subarray(o,o+u),f);else for(var m=0;m<u;m++)_.contents[f+m]=s[o+m];return _.usedBytes=Math.max(_.usedBytes,f+u),u},llseek:function(n,s,o){var u=s;if(o===1?u+=n.position:o===2&&l.isFile(n.node.mode)&&(u+=n.node.usedBytes),u<0)throw new l.ErrnoError(28);return u},allocate:function(n,s,o){J.expandFileStorage(n.node,s+o),n.node.usedBytes=Math.max(n.node.usedBytes,s+o)},mmap:function(n,s,o,u,f){if(!l.isFile(n.node.mode))throw new l.ErrnoError(43);var h,_,m=n.node.contents;if(!(f&2)&&m.buffer===W.buffer)_=!1,h=m.byteOffset;else{if((o>0||o+s<m.length)&&(m.subarray?m=m.subarray(o,o+s):m=Array.prototype.slice.call(m,o,o+s)),_=!0,h=fo(s),!h)throw new l.ErrnoError(48);h>>>=0,W.set(m,h>>>0)}return{ptr:h,allocated:_}},msync:function(n,s,o,u,f){return J.stream_ops.write(n,s,0,u,o,!1),0}}};function ef(n,s,o,u){var f=u?"":`al ${n}`;A(n,h=>{R(h,`Loading data file "${n}" failed (no arrayBuffer).`),s(new Uint8Array(h)),f&&vr(f)},h=>{if(o)o();else throw`Loading data file "${n}" failed.`}),f&&Fn(f)}var tf=t.preloadPlugins||[];function rf(n,s,o,u){typeof Browser<"u"&&Browser.init();var f=!1;return tf.forEach(function(h){f||h.canHandle(s)&&(h.handle(n,s,o,u),f=!0)}),f}function nf(n,s,o,u,f,h,_,m,k,D){var M=s?ot.resolve(_e.join2(n,s)):n,K=`cp ${M}`;function I(B){function q(fe){D&&D(),m||l.createDataFile(n,s,fe,u,f,k),h&&h(),vr(K)}rf(B,M,q,()=>{_&&_(),vr(K)})||q(B)}Fn(K),typeof o=="string"?ef(o,B=>I(B),_):I(o)}function sf(n){var s={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090},o=s[n];if(typeof o>"u")throw new Error(`Unknown file open mode: ${n}`);return o}function Nn(n,s){var o=0;return n&&(o|=365),s&&(o|=146),o}var l={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,ErrnoError:null,genericErrors:{},filesystems:null,syncFSRequests:0,lookupPath:(n,s={})=>{if(n=ot.resolve(n),!n)return{path:"",node:null};var o={follow_mount:!0,recurse_count:0};if(s=Object.assign(o,s),s.recurse_count>8)throw new l.ErrnoError(32);for(var u=n.split("/").filter(K=>!!K),f=l.root,h="/",_=0;_<u.length;_++){var m=_===u.length-1;if(m&&s.parent)break;if(f=l.lookupNode(f,u[_]),h=_e.join2(h,u[_]),l.isMountpoint(f)&&(!m||m&&s.follow_mount)&&(f=f.mounted.root),!m||s.follow)for(var k=0;l.isLink(f.mode);){var D=l.readlink(h);h=ot.resolve(_e.dirname(h),D);var M=l.lookupPath(h,{recurse_count:s.recurse_count+1});if(f=M.node,k++>40)throw new l.ErrnoError(32)}}return{path:h,node:f}},getPath:n=>{for(var s;;){if(l.isRoot(n)){var o=n.mount.mountpoint;return s?o[o.length-1]!=="/"?`${o}/${s}`:o+s:o}s=s?`${n.name}/${s}`:n.name,n=n.parent}},hashName:(n,s)=>{for(var o=0,u=0;u<s.length;u++)o=(o<<5)-o+s.charCodeAt(u)|0;return(n+o>>>0)%l.nameTable.length},hashAddNode:n=>{var s=l.hashName(n.parent.id,n.name);n.name_next=l.nameTable[s],l.nameTable[s]=n},hashRemoveNode:n=>{var s=l.hashName(n.parent.id,n.name);if(l.nameTable[s]===n)l.nameTable[s]=n.name_next;else for(var o=l.nameTable[s];o;){if(o.name_next===n){o.name_next=n.name_next;break}o=o.name_next}},lookupNode:(n,s)=>{var o=l.mayLookup(n);if(o)throw new l.ErrnoError(o,n);for(var u=l.hashName(n.id,s),f=l.nameTable[u];f;f=f.name_next){var h=f.name;if(f.parent.id===n.id&&h===s)return f}return l.lookup(n,s)},createNode:(n,s,o,u)=>{var f=new l.FSNode(n,s,o,u);return l.hashAddNode(f),f},destroyNode:n=>{l.hashRemoveNode(n)},isRoot:n=>n===n.parent,isMountpoint:n=>!!n.mounted,isFile:n=>(n&61440)===32768,isDir:n=>(n&61440)===16384,isLink:n=>(n&61440)===40960,isChrdev:n=>(n&61440)===8192,isBlkdev:n=>(n&61440)===24576,isFIFO:n=>(n&61440)===4096,isSocket:n=>(n&49152)===49152,flagsToPermissionString:n=>{var s=["r","w","rw"][n&3];return n&512&&(s+="w"),s},nodePermissions:(n,s)=>l.ignorePermissions?0:s.includes("r")&&!(n.mode&292)||s.includes("w")&&!(n.mode&146)||s.includes("x")&&!(n.mode&73)?2:0,mayLookup:n=>{var s=l.nodePermissions(n,"x");return s||(n.node_ops.lookup?0:2)},mayCreate:(n,s)=>{try{var o=l.lookupNode(n,s);return 20}catch{}return l.nodePermissions(n,"wx")},mayDelete:(n,s,o)=>{var u;try{u=l.lookupNode(n,s)}catch(h){return h.errno}var f=l.nodePermissions(n,"wx");if(f)return f;if(o){if(!l.isDir(u.mode))return 54;if(l.isRoot(u)||l.getPath(u)===l.cwd())return 10}else if(l.isDir(u.mode))return 31;return 0},mayOpen:(n,s)=>n?l.isLink(n.mode)?32:l.isDir(n.mode)&&(l.flagsToPermissionString(s)!=="r"||s&512)?31:l.nodePermissions(n,l.flagsToPermissionString(s)):44,MAX_OPEN_FDS:4096,nextfd:()=>{for(var n=0;n<=l.MAX_OPEN_FDS;n++)if(!l.streams[n])return n;throw new l.ErrnoError(33)},getStream:n=>l.streams[n],createStream:(n,s=-1)=>(l.FSStream||(l.FSStream=function(){this.shared={}},l.FSStream.prototype={},Object.defineProperties(l.FSStream.prototype,{object:{get:function(){return this.node},set:function(o){this.node=o}},isRead:{get:function(){return(this.flags&2097155)!==1}},isWrite:{get:function(){return(this.flags&2097155)!==0}},isAppend:{get:function(){return this.flags&1024}},flags:{get:function(){return this.shared.flags},set:function(o){this.shared.flags=o}},position:{get:function(){return this.shared.position},set:function(o){this.shared.position=o}}})),n=Object.assign(new l.FSStream,n),s==-1&&(s=l.nextfd()),n.fd=s,l.streams[s]=n,n),closeStream:n=>{l.streams[n]=null},chrdev_stream_ops:{open:n=>{var s=l.getDevice(n.node.rdev);n.stream_ops=s.stream_ops,n.stream_ops.open&&n.stream_ops.open(n)},llseek:()=>{throw new l.ErrnoError(70)}},major:n=>n>>8,minor:n=>n&255,makedev:(n,s)=>n<<8|s,registerDevice:(n,s)=>{l.devices[n]={stream_ops:s}},getDevice:n=>l.devices[n],getMounts:n=>{for(var s=[],o=[n];o.length;){var u=o.pop();s.push(u),o.push.apply(o,u.mounts)}return s},syncfs:(n,s)=>{typeof n=="function"&&(s=n,n=!1),l.syncFSRequests++,l.syncFSRequests>1&&O(`warning: ${l.syncFSRequests} FS.syncfs operations in flight at once, probably just doing extra work`);var o=l.getMounts(l.root.mount),u=0;function f(_){return l.syncFSRequests--,s(_)}function h(_){if(_)return h.errored?void 0:(h.errored=!0,f(_));++u>=o.length&&f(null)}o.forEach(_=>{if(!_.type.syncfs)return h(null);_.type.syncfs(_,n,h)})},mount:(n,s,o)=>{var u=o==="/",f=!o,h;if(u&&l.root)throw new l.ErrnoError(10);if(!u&&!f){var _=l.lookupPath(o,{follow_mount:!1});if(o=_.path,h=_.node,l.isMountpoint(h))throw new l.ErrnoError(10);if(!l.isDir(h.mode))throw new l.ErrnoError(54)}var m={type:n,opts:s,mountpoint:o,mounts:[]},k=n.mount(m);return k.mount=m,m.root=k,u?l.root=k:h&&(h.mounted=m,h.mount&&h.mount.mounts.push(m)),k},unmount:n=>{var s=l.lookupPath(n,{follow_mount:!1});if(!l.isMountpoint(s.node))throw new l.ErrnoError(28);var o=s.node,u=o.mounted,f=l.getMounts(u);Object.keys(l.nameTable).forEach(_=>{for(var m=l.nameTable[_];m;){var k=m.name_next;f.includes(m.mount)&&l.destroyNode(m),m=k}}),o.mounted=null;var h=o.mount.mounts.indexOf(u);o.mount.mounts.splice(h,1)},lookup:(n,s)=>n.node_ops.lookup(n,s),mknod:(n,s,o)=>{var u=l.lookupPath(n,{parent:!0}),f=u.node,h=_e.basename(n);if(!h||h==="."||h==="..")throw new l.ErrnoError(28);var _=l.mayCreate(f,h);if(_)throw new l.ErrnoError(_);if(!f.node_ops.mknod)throw new l.ErrnoError(63);return f.node_ops.mknod(f,h,s,o)},create:(n,s)=>(s=s!==void 0?s:438,s&=4095,s|=32768,l.mknod(n,s,0)),mkdir:(n,s)=>(s=s!==void 0?s:511,s&=1023,s|=16384,l.mknod(n,s,0)),mkdirTree:(n,s)=>{for(var o=n.split("/"),u="",f=0;f<o.length;++f)if(o[f]){u+="/"+o[f];try{l.mkdir(u,s)}catch(h){if(h.errno!=20)throw h}}},mkdev:(n,s,o)=>(typeof o>"u"&&(o=s,s=438),s|=8192,l.mknod(n,s,o)),symlink:(n,s)=>{if(!ot.resolve(n))throw new l.ErrnoError(44);var o=l.lookupPath(s,{parent:!0}),u=o.node;if(!u)throw new l.ErrnoError(44);var f=_e.basename(s),h=l.mayCreate(u,f);if(h)throw new l.ErrnoError(h);if(!u.node_ops.symlink)throw new l.ErrnoError(63);return u.node_ops.symlink(u,f,n)},rename:(n,s)=>{var o=_e.dirname(n),u=_e.dirname(s),f=_e.basename(n),h=_e.basename(s),_,m,k;if(_=l.lookupPath(n,{parent:!0}),m=_.node,_=l.lookupPath(s,{parent:!0}),k=_.node,!m||!k)throw new l.ErrnoError(44);if(m.mount!==k.mount)throw new l.ErrnoError(75);var D=l.lookupNode(m,f),M=ot.relative(n,u);if(M.charAt(0)!==".")throw new l.ErrnoError(28);if(M=ot.relative(s,o),M.charAt(0)!==".")throw new l.ErrnoError(55);var K;try{K=l.lookupNode(k,h)}catch{}if(D!==K){var I=l.isDir(D.mode),B=l.mayDelete(m,f,I);if(B)throw new l.ErrnoError(B);if(B=K?l.mayDelete(k,h,I):l.mayCreate(k,h),B)throw new l.ErrnoError(B);if(!m.node_ops.rename)throw new l.ErrnoError(63);if(l.isMountpoint(D)||K&&l.isMountpoint(K))throw new l.ErrnoError(10);if(k!==m&&(B=l.nodePermissions(m,"w"),B))throw new l.ErrnoError(B);l.hashRemoveNode(D);try{m.node_ops.rename(D,k,h)}catch(q){throw q}finally{l.hashAddNode(D)}}},rmdir:n=>{var s=l.lookupPath(n,{parent:!0}),o=s.node,u=_e.basename(n),f=l.lookupNode(o,u),h=l.mayDelete(o,u,!0);if(h)throw new l.ErrnoError(h);if(!o.node_ops.rmdir)throw new l.ErrnoError(63);if(l.isMountpoint(f))throw new l.ErrnoError(10);o.node_ops.rmdir(o,u),l.destroyNode(f)},readdir:n=>{var s=l.lookupPath(n,{follow:!0}),o=s.node;if(!o.node_ops.readdir)throw new l.ErrnoError(54);return o.node_ops.readdir(o)},unlink:n=>{var s=l.lookupPath(n,{parent:!0}),o=s.node;if(!o)throw new l.ErrnoError(44);var u=_e.basename(n),f=l.lookupNode(o,u),h=l.mayDelete(o,u,!1);if(h)throw new l.ErrnoError(h);if(!o.node_ops.unlink)throw new l.ErrnoError(63);if(l.isMountpoint(f))throw new l.ErrnoError(10);o.node_ops.unlink(o,u),l.destroyNode(f)},readlink:n=>{var s=l.lookupPath(n),o=s.node;if(!o)throw new l.ErrnoError(44);if(!o.node_ops.readlink)throw new l.ErrnoError(28);return ot.resolve(l.getPath(o.parent),o.node_ops.readlink(o))},stat:(n,s)=>{var o=l.lookupPath(n,{follow:!s}),u=o.node;if(!u)throw new l.ErrnoError(44);if(!u.node_ops.getattr)throw new l.ErrnoError(63);return u.node_ops.getattr(u)},lstat:n=>l.stat(n,!0),chmod:(n,s,o)=>{var u;if(typeof n=="string"){var f=l.lookupPath(n,{follow:!o});u=f.node}else u=n;if(!u.node_ops.setattr)throw new l.ErrnoError(63);u.node_ops.setattr(u,{mode:s&4095|u.mode&-4096,timestamp:Date.now()})},lchmod:(n,s)=>{l.chmod(n,s,!0)},fchmod:(n,s)=>{var o=l.getStream(n);if(!o)throw new l.ErrnoError(8);l.chmod(o.node,s)},chown:(n,s,o,u)=>{var f;if(typeof n=="string"){var h=l.lookupPath(n,{follow:!u});f=h.node}else f=n;if(!f.node_ops.setattr)throw new l.ErrnoError(63);f.node_ops.setattr(f,{timestamp:Date.now()})},lchown:(n,s,o)=>{l.chown(n,s,o,!0)},fchown:(n,s,o)=>{var u=l.getStream(n);if(!u)throw new l.ErrnoError(8);l.chown(u.node,s,o)},truncate:(n,s)=>{if(s<0)throw new l.ErrnoError(28);var o;if(typeof n=="string"){var u=l.lookupPath(n,{follow:!0});o=u.node}else o=n;if(!o.node_ops.setattr)throw new l.ErrnoError(63);if(l.isDir(o.mode))throw new l.ErrnoError(31);if(!l.isFile(o.mode))throw new l.ErrnoError(28);var f=l.nodePermissions(o,"w");if(f)throw new l.ErrnoError(f);o.node_ops.setattr(o,{size:s,timestamp:Date.now()})},ftruncate:(n,s)=>{var o=l.getStream(n);if(!o)throw new l.ErrnoError(8);if(!(o.flags&2097155))throw new l.ErrnoError(28);l.truncate(o.node,s)},utime:(n,s,o)=>{var u=l.lookupPath(n,{follow:!0}),f=u.node;f.node_ops.setattr(f,{timestamp:Math.max(s,o)})},open:(n,s,o)=>{if(n==="")throw new l.ErrnoError(44);s=typeof s=="string"?sf(s):s,o=typeof o>"u"?438:o,s&64?o=o&4095|32768:o=0;var u;if(typeof n=="object")u=n;else{n=_e.normalize(n);try{var f=l.lookupPath(n,{follow:!(s&131072)});u=f.node}catch{}}var h=!1;if(s&64)if(u){if(s&128)throw new l.ErrnoError(20)}else u=l.mknod(n,o,0),h=!0;if(!u)throw new l.ErrnoError(44);if(l.isChrdev(u.mode)&&(s&=-513),s&65536&&!l.isDir(u.mode))throw new l.ErrnoError(54);if(!h){var _=l.mayOpen(u,s);if(_)throw new l.ErrnoError(_)}s&512&&!h&&l.truncate(u,0),s&=-131713;var m=l.createStream({node:u,path:l.getPath(u),flags:s,seekable:!0,position:0,stream_ops:u.stream_ops,ungotten:[],error:!1});return m.stream_ops.open&&m.stream_ops.open(m),t.logReadFiles&&!(s&1)&&(l.readFiles||(l.readFiles={}),n in l.readFiles||(l.readFiles[n]=1)),m},close:n=>{if(l.isClosed(n))throw new l.ErrnoError(8);n.getdents&&(n.getdents=null);try{n.stream_ops.close&&n.stream_ops.close(n)}catch(s){throw s}finally{l.closeStream(n.fd)}n.fd=null},isClosed:n=>n.fd===null,llseek:(n,s,o)=>{if(l.isClosed(n))throw new l.ErrnoError(8);if(!n.seekable||!n.stream_ops.llseek)throw new l.ErrnoError(70);if(o!=0&&o!=1&&o!=2)throw new l.ErrnoError(28);return n.position=n.stream_ops.llseek(n,s,o),n.ungotten=[],n.position},read:(n,s,o,u,f)=>{if(o>>>=0,u<0||f<0)throw new l.ErrnoError(28);if(l.isClosed(n))throw new l.ErrnoError(8);if((n.flags&2097155)===1)throw new l.ErrnoError(8);if(l.isDir(n.node.mode))throw new l.ErrnoError(31);if(!n.stream_ops.read)throw new l.ErrnoError(28);var h=typeof f<"u";if(!h)f=n.position;else if(!n.seekable)throw new l.ErrnoError(70);var _=n.stream_ops.read(n,s,o,u,f);return h||(n.position+=_),_},write:(n,s,o,u,f,h)=>{if(o>>>=0,u<0||f<0)throw new l.ErrnoError(28);if(l.isClosed(n))throw new l.ErrnoError(8);if(!(n.flags&2097155))throw new l.ErrnoError(8);if(l.isDir(n.node.mode))throw new l.ErrnoError(31);if(!n.stream_ops.write)throw new l.ErrnoError(28);n.seekable&&n.flags&1024&&l.llseek(n,0,2);var _=typeof f<"u";if(!_)f=n.position;else if(!n.seekable)throw new l.ErrnoError(70);var m=n.stream_ops.write(n,s,o,u,f,h);return _||(n.position+=m),m},allocate:(n,s,o)=>{if(l.isClosed(n))throw new l.ErrnoError(8);if(s<0||o<=0)throw new l.ErrnoError(28);if(!(n.flags&2097155))throw new l.ErrnoError(8);if(!l.isFile(n.node.mode)&&!l.isDir(n.node.mode))throw new l.ErrnoError(43);if(!n.stream_ops.allocate)throw new l.ErrnoError(138);n.stream_ops.allocate(n,s,o)},mmap:(n,s,o,u,f)=>{if(u&2&&!(f&2)&&(n.flags&2097155)!==2)throw new l.ErrnoError(2);if((n.flags&2097155)===1)throw new l.ErrnoError(2);if(!n.stream_ops.mmap)throw new l.ErrnoError(43);return n.stream_ops.mmap(n,s,o,u,f)},msync:(n,s,o,u,f)=>(o>>>=0,n.stream_ops.msync?n.stream_ops.msync(n,s,o,u,f):0),munmap:n=>0,ioctl:(n,s,o)=>{if(!n.stream_ops.ioctl)throw new l.ErrnoError(59);return n.stream_ops.ioctl(n,s,o)},readFile:(n,s={})=>{if(s.flags=s.flags||0,s.encoding=s.encoding||"binary",s.encoding!=="utf8"&&s.encoding!=="binary")throw new Error(`Invalid encoding type "${s.encoding}"`);var o,u=l.open(n,s.flags),f=l.stat(n),h=f.size,_=new Uint8Array(h);return l.read(u,_,0,h,0),s.encoding==="utf8"?o=Bt(_,0):s.encoding==="binary"&&(o=_),l.close(u),o},writeFile:(n,s,o={})=>{o.flags=o.flags||577;var u=l.open(n,o.flags,o.mode);if(typeof s=="string"){var f=new Uint8Array(Sr(s)+1),h=In(s,f,0,f.length);l.write(u,f,0,h,void 0,o.canOwn)}else if(ArrayBuffer.isView(s))l.write(u,s,0,s.byteLength,void 0,o.canOwn);else throw new Error("Unsupported data type");l.close(u)},cwd:()=>l.currentPath,chdir:n=>{var s=l.lookupPath(n,{follow:!0});if(s.node===null)throw new l.ErrnoError(44);if(!l.isDir(s.node.mode))throw new l.ErrnoError(54);var o=l.nodePermissions(s.node,"x");if(o)throw new l.ErrnoError(o);l.currentPath=s.path},createDefaultDirectories:()=>{l.mkdir("/tmp"),l.mkdir("/home"),l.mkdir("/home/web_user")},createDefaultDevices:()=>{l.mkdir("/dev"),l.registerDevice(l.makedev(1,3),{read:()=>0,write:(u,f,h,_,m)=>_}),l.mkdev("/dev/null",l.makedev(1,3)),_t.register(l.makedev(5,0),_t.default_tty_ops),_t.register(l.makedev(6,0),_t.default_tty1_ops),l.mkdev("/dev/tty",l.makedev(5,0)),l.mkdev("/dev/tty1",l.makedev(6,0));var n=new Uint8Array(1024),s=0,o=()=>(s===0&&(s=Mn(n).byteLength),n[--s]);l.createDevice("/dev","random",o),l.createDevice("/dev","urandom",o),l.mkdir("/dev/shm"),l.mkdir("/dev/shm/tmp")},createSpecialDirectories:()=>{l.mkdir("/proc");var n=l.mkdir("/proc/self");l.mkdir("/proc/self/fd"),l.mount({mount:()=>{var s=l.createNode(n,"fd",16895,73);return s.node_ops={lookup:(o,u)=>{var f=+u,h=l.getStream(f);if(!h)throw new l.ErrnoError(8);var _={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:()=>h.path}};return _.parent=_,_}},s}},{},"/proc/self/fd")},createStandardStreams:()=>{t.stdin?l.createDevice("/dev","stdin",t.stdin):l.symlink("/dev/tty","/dev/stdin"),t.stdout?l.createDevice("/dev","stdout",null,t.stdout):l.symlink("/dev/tty","/dev/stdout"),t.stderr?l.createDevice("/dev","stderr",null,t.stderr):l.symlink("/dev/tty1","/dev/stderr");var n=l.open("/dev/stdin",0),s=l.open("/dev/stdout",1),o=l.open("/dev/stderr",1)},ensureErrnoError:()=>{l.ErrnoError||(l.ErrnoError=function(s,o){this.name="ErrnoError",this.node=o,this.setErrno=function(u){this.errno=u},this.setErrno(s),this.message="FS error"},l.ErrnoError.prototype=new Error,l.ErrnoError.prototype.constructor=l.ErrnoError,[44].forEach(n=>{l.genericErrors[n]=new l.ErrnoError(n),l.genericErrors[n].stack="<generic error, no stack>"}))},staticInit:()=>{l.ensureErrnoError(),l.nameTable=new Array(4096),l.mount(J,{},"/"),l.createDefaultDirectories(),l.createDefaultDevices(),l.createSpecialDirectories(),l.filesystems={MEMFS:J}},init:(n,s,o)=>{l.init.initialized=!0,l.ensureErrnoError(),t.stdin=n||t.stdin,t.stdout=s||t.stdout,t.stderr=o||t.stderr,l.createStandardStreams()},quit:()=>{l.init.initialized=!1;for(var n=0;n<l.streams.length;n++){var s=l.streams[n];s&&l.close(s)}},findObject:(n,s)=>{var o=l.analyzePath(n,s);return o.exists?o.object:null},analyzePath:(n,s)=>{try{var o=l.lookupPath(n,{follow:!s});n=o.path}catch{}var u={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var o=l.lookupPath(n,{parent:!0});u.parentExists=!0,u.parentPath=o.path,u.parentObject=o.node,u.name=_e.basename(n),o=l.lookupPath(n,{follow:!s}),u.exists=!0,u.path=o.path,u.object=o.node,u.name=o.node.name,u.isRoot=o.path==="/"}catch(f){u.error=f.errno}return u},createPath:(n,s,o,u)=>{n=typeof n=="string"?n:l.getPath(n);for(var f=s.split("/").reverse();f.length;){var h=f.pop();if(h){var _=_e.join2(n,h);try{l.mkdir(_)}catch{}n=_}}return _},createFile:(n,s,o,u,f)=>{var h=_e.join2(typeof n=="string"?n:l.getPath(n),s),_=Nn(u,f);return l.create(h,_)},createDataFile:(n,s,o,u,f,h)=>{var _=s;n&&(n=typeof n=="string"?n:l.getPath(n),_=s?_e.join2(n,s):n);var m=Nn(u,f),k=l.create(_,m);if(o){if(typeof o=="string"){for(var D=new Array(o.length),M=0,K=o.length;M<K;++M)D[M]=o.charCodeAt(M);o=D}l.chmod(k,m|146);var I=l.open(k,577);l.write(I,o,0,o.length,0,h),l.close(I),l.chmod(k,m)}return k},createDevice:(n,s,o,u)=>{var f=_e.join2(typeof n=="string"?n:l.getPath(n),s),h=Nn(!!o,!!u);l.createDevice.major||(l.createDevice.major=64);var _=l.makedev(l.createDevice.major++,0);return l.registerDevice(_,{open:m=>{m.seekable=!1},close:m=>{u&&u.buffer&&u.buffer.length&&u(10)},read:(m,k,D,M,K)=>{for(var I=0,B=0;B<M;B++){var q;try{q=o()}catch{throw new l.ErrnoError(29)}if(q===void 0&&I===0)throw new l.ErrnoError(6);if(q==null)break;I++,k[D+B]=q}return I&&(m.node.timestamp=Date.now()),I},write:(m,k,D,M,K)=>{for(var I=0;I<M;I++)try{u(k[D+I])}catch{throw new l.ErrnoError(29)}return M&&(m.node.timestamp=Date.now()),I}}),l.mkdev(f,h,_)},forceLoadFile:n=>{if(n.isDevice||n.isFolder||n.link||n.contents)return!0;if(typeof XMLHttpRequest<"u")throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");if(P)try{n.contents=wr(P(n.url),!0),n.usedBytes=n.contents.length}catch{throw new l.ErrnoError(29)}else throw new Error("Cannot load without read() or XMLHttpRequest.")},createLazyFile:(n,s,o,u,f)=>{function h(){this.lengthKnown=!1,this.chunks=[]}if(h.prototype.get=function(B){if(!(B>this.length-1||B<0)){var q=B%this.chunkSize,fe=B/this.chunkSize|0;return this.getter(fe)[q]}},h.prototype.setDataGetter=function(B){this.getter=B},h.prototype.cacheLength=function(){var B=new XMLHttpRequest;if(B.open("HEAD",o,!1),B.send(null),!(B.status>=200&&B.status<300||B.status===304))throw new Error("Couldn't load "+o+". Status: "+B.status);var q=Number(B.getResponseHeader("Content-length")),fe,Ae=(fe=B.getResponseHeader("Accept-Ranges"))&&fe==="bytes",Pe=(fe=B.getResponseHeader("Content-Encoding"))&&fe==="gzip",T=1024*1024;Ae||(T=q);var H=(ee,Re)=>{if(ee>Re)throw new Error("invalid range ("+ee+", "+Re+") or no bytes requested!");if(Re>q-1)throw new Error("only "+q+" bytes available! programmer error!");var ke=new XMLHttpRequest;if(ke.open("GET",o,!1),q!==T&&ke.setRequestHeader("Range","bytes="+ee+"-"+Re),ke.responseType="arraybuffer",ke.overrideMimeType&&ke.overrideMimeType("text/plain; charset=x-user-defined"),ke.send(null),!(ke.status>=200&&ke.status<300||ke.status===304))throw new Error("Couldn't load "+o+". Status: "+ke.status);return ke.response!==void 0?new Uint8Array(ke.response||[]):wr(ke.responseText||"",!0)},ce=this;ce.setDataGetter(ee=>{var Re=ee*T,ke=(ee+1)*T-1;if(ke=Math.min(ke,q-1),typeof ce.chunks[ee]>"u"&&(ce.chunks[ee]=H(Re,ke)),typeof ce.chunks[ee]>"u")throw new Error("doXHR failed!");return ce.chunks[ee]}),(Pe||!q)&&(T=q=1,q=this.getter(0).length,T=q,me("LazyFiles on gzip forces download of the whole file when length is accessed")),this._length=q,this._chunkSize=T,this.lengthKnown=!0},typeof XMLHttpRequest<"u"){if(!y)throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";var _=new h;Object.defineProperties(_,{length:{get:function(){return this.lengthKnown||this.cacheLength(),this._length}},chunkSize:{get:function(){return this.lengthKnown||this.cacheLength(),this._chunkSize}}});var m={isDevice:!1,contents:_}}else var m={isDevice:!1,url:o};var k=l.createFile(n,s,m,u,f);m.contents?k.contents=m.contents:m.url&&(k.contents=null,k.url=m.url),Object.defineProperties(k,{usedBytes:{get:function(){return this.contents.length}}});var D={},M=Object.keys(k.stream_ops);M.forEach(I=>{var B=k.stream_ops[I];D[I]=function(){return l.forceLoadFile(k),B.apply(null,arguments)}});function K(I,B,q,fe,Ae){var Pe=I.node.contents;if(Ae>=Pe.length)return 0;var T=Math.min(Pe.length-Ae,fe);if(Pe.slice)for(var H=0;H<T;H++)B[q+H]=Pe[Ae+H];else for(var H=0;H<T;H++)B[q+H]=Pe.get(Ae+H);return T}return D.read=(I,B,q,fe,Ae)=>(l.forceLoadFile(k),K(I,B,q,fe,Ae)),D.mmap=(I,B,q,fe,Ae)=>{l.forceLoadFile(k);var Pe=fo(B);if(!Pe)throw new l.ErrnoError(48);return K(I,W,Pe,B,q),{ptr:Pe,allocated:!0}},k.stream_ops=D,k}};function Ut(n,s){return n>>>=0,n?Bt(z,n,s):""}var Y={DEFAULT_POLLMASK:5,calculateAt:function(n,s,o){if(_e.isAbs(s))return s;var u;if(n===-100)u=l.cwd();else{var f=Y.getStreamFromFD(n);u=f.path}if(s.length==0){if(!o)throw new l.ErrnoError(44);return u}return _e.join2(u,s)},doStat:function(n,s,o){try{var u=n(s)}catch(m){if(m&&m.node&&_e.normalize(s)!==_e.normalize(l.getPath(m.node)))return-54;throw m}g[o>>>2]=u.dev,g[o+8>>>2]=u.ino,g[o+12>>>2]=u.mode,j[o+16>>>2]=u.nlink,g[o+20>>>2]=u.uid,g[o+24>>>2]=u.gid,g[o+28>>>2]=u.rdev,he=[u.size>>>0,(U=u.size,+Math.abs(U)>=1?U>0?+Math.floor(U/4294967296)>>>0:~~+Math.ceil((U-+(~~U>>>0))/4294967296)>>>0:0)],g[o+40>>>2]=he[0],g[o+44>>>2]=he[1],g[o+48>>>2]=4096,g[o+52>>>2]=u.blocks;var f=u.atime.getTime(),h=u.mtime.getTime(),_=u.ctime.getTime();return he=[Math.floor(f/1e3)>>>0,(U=Math.floor(f/1e3),+Math.abs(U)>=1?U>0?+Math.floor(U/4294967296)>>>0:~~+Math.ceil((U-+(~~U>>>0))/4294967296)>>>0:0)],g[o+56>>>2]=he[0],g[o+60>>>2]=he[1],j[o+64>>>2]=f%1e3*1e3,he=[Math.floor(h/1e3)>>>0,(U=Math.floor(h/1e3),+Math.abs(U)>=1?U>0?+Math.floor(U/4294967296)>>>0:~~+Math.ceil((U-+(~~U>>>0))/4294967296)>>>0:0)],g[o+72>>>2]=he[0],g[o+76>>>2]=he[1],j[o+80>>>2]=h%1e3*1e3,he=[Math.floor(_/1e3)>>>0,(U=Math.floor(_/1e3),+Math.abs(U)>=1?U>0?+Math.floor(U/4294967296)>>>0:~~+Math.ceil((U-+(~~U>>>0))/4294967296)>>>0:0)],g[o+88>>>2]=he[0],g[o+92>>>2]=he[1],j[o+96>>>2]=_%1e3*1e3,he=[u.ino>>>0,(U=u.ino,+Math.abs(U)>=1?U>0?+Math.floor(U/4294967296)>>>0:~~+Math.ceil((U-+(~~U>>>0))/4294967296)>>>0:0)],g[o+104>>>2]=he[0],g[o+108>>>2]=he[1],0},doMsync:function(n,s,o,u,f){if(!l.isFile(s.node.mode))throw new l.ErrnoError(43);if(u&2)return 0;n>>>=0;var h=z.slice(n,n+o);l.msync(s,h,f,o,u)},varargs:void 0,get:function(){Y.varargs+=4;var n=g[Y.varargs-4>>>2];return n},getStr:function(n){var s=Ut(n);return s},getStreamFromFD:function(n){var s=l.getStream(n);if(!s)throw new l.ErrnoError(8);return s}};function of(n,s,o,u,f){try{for(var h=0,_=s?g[s>>>2]:0,m=s?g[s+4>>>2]:0,k=o?g[o>>>2]:0,D=o?g[o+4>>>2]:0,M=u?g[u>>>2]:0,K=u?g[u+4>>>2]:0,I=0,B=0,q=0,fe=0,Ae=0,Pe=0,T=(s?g[s>>>2]:0)|(o?g[o>>>2]:0)|(u?g[u>>>2]:0),H=(s?g[s+4>>>2]:0)|(o?g[o+4>>>2]:0)|(u?g[u+4>>>2]:0),ce=function(rr,xh,Ch,xo){return rr<32?xh&xo:Ch&xo},ee=0;ee<n;ee++){var Re=1<<ee%32;if(ce(ee,T,H,Re)){var ke=Y.getStreamFromFD(ee),Mr=Y.DEFAULT_POLLMASK;ke.stream_ops.poll&&(Mr=ke.stream_ops.poll(ke)),Mr&1&&ce(ee,_,m,Re)&&(ee<32?I=I|Re:B=B|Re,h++),Mr&4&&ce(ee,k,D,Re)&&(ee<32?q=q|Re:fe=fe|Re,h++),Mr&2&&ce(ee,M,K,Re)&&(ee<32?Ae=Ae|Re:Pe=Pe|Re,h++)}}return s&&(g[s>>>2]=I,g[s+4>>>2]=B),o&&(g[o>>>2]=q,g[o+4>>>2]=fe),u&&(g[u>>>2]=Ae,g[u+4>>>2]=Pe),h}catch(rr){if(typeof l>"u"||rr.name!=="ErrnoError")throw rr;return-rr.errno}}var be={mount:function(n){return t.websocket=t.websocket&&typeof t.websocket=="object"?t.websocket:{},t.websocket._callbacks={},t.websocket.on=function(s,o){return typeof o=="function"&&(this._callbacks[s]=o),this},t.websocket.emit=function(s,o){typeof this._callbacks[s]=="function"&&this._callbacks[s].call(this,o)},l.createNode(null,"/",16895,0)},createSocket:function(n,s,o){s&=-526337;var u=s==1;if(u&&o&&o!=6)throw new l.ErrnoError(66);var f={family:n,type:s,protocol:o,server:null,error:null,peers:{},pending:[],recv_queue:[],sock_ops:be.websocket_sock_ops},h=be.nextname(),_=l.createNode(be.root,h,49152,0);_.sock=f;var m=l.createStream({path:h,node:_,flags:2,seekable:!1,stream_ops:be.stream_ops});return f.stream=m,f},getSocket:function(n){var s=l.getStream(n);return!s||!l.isSocket(s.node.mode)?null:s.node.sock},stream_ops:{poll:function(n){var s=n.node.sock;return s.sock_ops.poll(s)},ioctl:function(n,s,o){var u=n.node.sock;return u.sock_ops.ioctl(u,s,o)},read:function(n,s,o,u,f){var h=n.node.sock,_=h.sock_ops.recvmsg(h,u);return _?(s.set(_.buffer,o),_.buffer.length):0},write:function(n,s,o,u,f){var h=n.node.sock;return h.sock_ops.sendmsg(h,s,o,u)},close:function(n){var s=n.node.sock;s.sock_ops.close(s)}},nextname:function(){return be.nextname.current||(be.nextname.current=0),"socket["+be.nextname.current+++"]"},websocket_sock_ops:{createPeer:function(n,s,o){var u;if(typeof s=="object"&&(u=s,s=null,o=null),u)if(u._socket)s=u._socket.remoteAddress,o=u._socket.remotePort;else{var f=/ws[s]?:\/\/([^:]+):(\d+)/.exec(u.url);if(!f)throw new Error("WebSocket URL must be in the format ws(s)://address:port");s=f[1],o=parseInt(f[2],10)}else try{var h=t.websocket&&typeof t.websocket=="object",_="ws:#".replace("#","//");if(h&&typeof t.websocket.url=="string"&&(_=t.websocket.url),_==="ws://"||_==="wss://"){var m=s.split("/");_=_+m[0]+":"+o+"/"+m.slice(1).join("/")}var k="binary";h&&typeof t.websocket.subprotocol=="string"&&(k=t.websocket.subprotocol);var D=void 0;k!=="null"&&(k=k.replace(/^ +| +$/g,"").split(/ *, */),D=k),h&&t.websocket.subprotocol===null&&(k="null",D=void 0);var M;E?M=ds():M=WebSocket,u=new M(_,D),u.binaryType="arraybuffer"}catch{throw new l.ErrnoError(23)}var K={addr:s,port:o,socket:u,dgram_send_queue:[]};return be.websocket_sock_ops.addPeer(n,K),be.websocket_sock_ops.handlePeerEvents(n,K),n.type===2&&typeof n.sport<"u"&&K.dgram_send_queue.push(new Uint8Array([255,255,255,255,"p".charCodeAt(0),"o".charCodeAt(0),"r".charCodeAt(0),"t".charCodeAt(0),(n.sport&65280)>>8,n.sport&255])),K},getPeer:function(n,s,o){return n.peers[s+":"+o]},addPeer:function(n,s){n.peers[s.addr+":"+s.port]=s},removePeer:function(n,s){delete n.peers[s.addr+":"+s.port]},handlePeerEvents:function(n,s){var o=!0,u=function(){t.websocket.emit("open",n.stream.fd);try{for(var h=s.dgram_send_queue.shift();h;)s.socket.send(h),h=s.dgram_send_queue.shift()}catch{s.socket.close()}};function f(h){if(typeof h=="string"){var _=new TextEncoder;h=_.encode(h)}else{if(R(h.byteLength!==void 0),h.byteLength==0)return;h=new Uint8Array(h)}var m=o;if(o=!1,m&&h.length===10&&h[0]===255&&h[1]===255&&h[2]===255&&h[3]===255&&h[4]==="p".charCodeAt(0)&&h[5]==="o".charCodeAt(0)&&h[6]==="r".charCodeAt(0)&&h[7]==="t".charCodeAt(0)){var k=h[8]<<8|h[9];be.websocket_sock_ops.removePeer(n,s),s.port=k,be.websocket_sock_ops.addPeer(n,s);return}n.recv_queue.push({addr:s.addr,port:s.port,data:h}),t.websocket.emit("message",n.stream.fd)}E?(s.socket.on("open",u),s.socket.on("message",function(h,_){_&&f(new Uint8Array(h).buffer)}),s.socket.on("close",function(){t.websocket.emit("close",n.stream.fd)}),s.socket.on("error",function(h){n.error=14,t.websocket.emit("error",[n.stream.fd,n.error,"ECONNREFUSED: Connection refused"])})):(s.socket.onopen=u,s.socket.onclose=function(){t.websocket.emit("close",n.stream.fd)},s.socket.onmessage=function(_){f(_.data)},s.socket.onerror=function(h){n.error=14,t.websocket.emit("error",[n.stream.fd,n.error,"ECONNREFUSED: Connection refused"])})},poll:function(n){if(n.type===1&&n.server)return n.pending.length?65:0;var s=0,o=n.type===1?be.websocket_sock_ops.getPeer(n,n.daddr,n.dport):null;return(n.recv_queue.length||!o||o&&o.socket.readyState===o.socket.CLOSING||o&&o.socket.readyState===o.socket.CLOSED)&&(s|=65),(!o||o&&o.socket.readyState===o.socket.OPEN)&&(s|=4),(o&&o.socket.readyState===o.socket.CLOSING||o&&o.socket.readyState===o.socket.CLOSED)&&(s|=16),s},ioctl:function(n,s,o){switch(s){case 21531:var u=0;return n.recv_queue.length&&(u=n.recv_queue[0].data.length),g[o>>>2]=u,0;default:return 28}},close:function(n){if(n.server){try{n.server.close()}catch{}n.server=null}for(var s=Object.keys(n.peers),o=0;o<s.length;o++){var u=n.peers[s[o]];try{u.socket.close()}catch{}be.websocket_sock_ops.removePeer(n,u)}return 0},bind:function(n,s,o){if(typeof n.saddr<"u"||typeof n.sport<"u")throw new l.ErrnoError(28);if(n.saddr=s,n.sport=o,n.type===2){n.server&&(n.server.close(),n.server=null);try{n.sock_ops.listen(n,0)}catch(u){if(u.name!=="ErrnoError"||u.errno!==138)throw u}}},connect:function(n,s,o){if(n.server)throw new l.ErrnoError(138);if(typeof n.daddr<"u"&&typeof n.dport<"u"){var u=be.websocket_sock_ops.getPeer(n,n.daddr,n.dport);if(u)throw u.socket.readyState===u.socket.CONNECTING?new l.ErrnoError(7):new l.ErrnoError(30)}var f=be.websocket_sock_ops.createPeer(n,s,o);throw n.daddr=f.addr,n.dport=f.port,new l.ErrnoError(26)},listen:function(n,s){if(!E)throw new l.ErrnoError(138);if(n.server)throw new l.ErrnoError(28);var o=ds().Server,u=n.saddr;n.server=new o({host:u,port:n.sport}),t.websocket.emit("listen",n.stream.fd),n.server.on("connection",function(f){if(n.type===1){var h=be.createSocket(n.family,n.type,n.protocol),_=be.websocket_sock_ops.createPeer(h,f);h.daddr=_.addr,h.dport=_.port,n.pending.push(h),t.websocket.emit("connection",h.stream.fd)}else be.websocket_sock_ops.createPeer(n,f),t.websocket.emit("connection",n.stream.fd)}),n.server.on("close",function(){t.websocket.emit("close",n.stream.fd),n.server=null}),n.server.on("error",function(f){n.error=23,t.websocket.emit("error",[n.stream.fd,n.error,"EHOSTUNREACH: Host is unreachable"])})},accept:function(n){if(!n.server||!n.pending.length)throw new l.ErrnoError(28);var s=n.pending.shift();return s.stream.flags=n.stream.flags,s},getname:function(n,s){var o,u;if(s){if(n.daddr===void 0||n.dport===void 0)throw new l.ErrnoError(53);o=n.daddr,u=n.dport}else o=n.saddr||0,u=n.sport||0;return{addr:o,port:u}},sendmsg:function(n,s,o,u,f,h){if(n.type===2){if((f===void 0||h===void 0)&&(f=n.daddr,h=n.dport),f===void 0||h===void 0)throw new l.ErrnoError(17)}else f=n.daddr,h=n.dport;var _=be.websocket_sock_ops.getPeer(n,f,h);if(n.type===1){if(!_||_.socket.readyState===_.socket.CLOSING||_.socket.readyState===_.socket.CLOSED)throw new l.ErrnoError(53);if(_.socket.readyState===_.socket.CONNECTING)throw new l.ErrnoError(6)}ArrayBuffer.isView(s)&&(o+=s.byteOffset,s=s.buffer);var m;if(m=s.slice(o,o+u),n.type===2&&(!_||_.socket.readyState!==_.socket.OPEN))return(!_||_.socket.readyState===_.socket.CLOSING||_.socket.readyState===_.socket.CLOSED)&&(_=be.websocket_sock_ops.createPeer(n,f,h)),_.dgram_send_queue.push(m),u;try{return _.socket.send(m),u}catch{throw new l.ErrnoError(28)}},recvmsg:function(n,s){if(n.type===1&&n.server)throw new l.ErrnoError(53);var o=n.recv_queue.shift();if(!o){if(n.type===1){var u=be.websocket_sock_ops.getPeer(n,n.daddr,n.dport);if(!u)throw new l.ErrnoError(53);if(u.socket.readyState===u.socket.CLOSING||u.socket.readyState===u.socket.CLOSED)return null;throw new l.ErrnoError(6)}throw new l.ErrnoError(6)}var f=o.data.byteLength||o.data.length,h=o.data.byteOffset||0,_=o.data.buffer||o.data,m=Math.min(s,f),k={buffer:new Uint8Array(_,h,m),addr:o.addr,port:o.port};if(n.type===1&&m<f){var D=f-m;o.data=new Uint8Array(_,h+m,D),n.recv_queue.unshift(o)}return k}}};function Ht(n){var s=be.getSocket(n);if(!s)throw new l.ErrnoError(8);return s}function af(n){return g[Ro()>>>2]=n,n}function Bn(n){return(n&255)+"."+(n>>8&255)+"."+(n>>16&255)+"."+(n>>24&255)}function ho(n){var s="",o=0,u=0,f=0,h=0,_=0,m=0,k=[n[0]&65535,n[0]>>16,n[1]&65535,n[1]>>16,n[2]&65535,n[2]>>16,n[3]&65535,n[3]>>16],D=!0,M="";for(m=0;m<5;m++)if(k[m]!==0){D=!1;break}if(D){if(M=Bn(k[6]|k[7]<<16),k[5]===-1)return s="::ffff:",s+=M,s;if(k[5]===0)return s="::",M==="0.0.0.0"&&(M=""),M==="0.0.0.1"&&(M="1"),s+=M,s}for(o=0;o<8;o++)k[o]===0&&(o-f>1&&(_=0),f=o,_++),_>u&&(u=_,h=o-u+1);for(o=0;o<8;o++){if(u>1&&k[o]===0&&o>=h&&o<h+u){o===h&&(s+=":",h===0&&(s+=":"));continue}s+=Number(Wn(k[o]&65535)).toString(16),s+=o<7?":":""}return s}function _o(n,s){var o=le[n>>>1],u=Wn(w[n+2>>>1]),f;switch(o){case 2:if(s!==16)return{errno:28};f=g[n+4>>>2],f=Bn(f);break;case 10:if(s!==28)return{errno:28};f=[g[n+8>>>2],g[n+12>>>2],g[n+16>>>2],g[n+20>>>2]],f=ho(f);break;default:return{errno:5}}return{family:o,addr:f,port:u}}function kr(n){for(var s=n.split("."),o=0;o<4;o++){var u=Number(s[o]);if(isNaN(u))return null;s[o]=u}return(s[0]|s[1]<<8|s[2]<<16|s[3]<<24)>>>0}function Rr(n){return parseInt(n)}function Un(n){var s,o,u,f,h=/^((?=.*::)(?!.*::.+::)(::)?([\dA-F]{1,4}:(:|\b)|){5}|([\dA-F]{1,4}:){6})((([\dA-F]{1,4}((?!\3)::|:\b|$))|(?!\2\3)){2}|(((2[0-4]|1\d|[1-9])?\d|25[0-5])\.?\b){4})$/i,_=[];if(!h.test(n))return null;if(n==="::")return[0,0,0,0,0,0,0,0];for(n.startsWith("::")?n=n.replace("::","Z:"):n=n.replace("::",":Z:"),n.indexOf(".")>0?(n=n.replace(new RegExp("[.]","g"),":"),s=n.split(":"),s[s.length-4]=Rr(s[s.length-4])+Rr(s[s.length-3])*256,s[s.length-3]=Rr(s[s.length-2])+Rr(s[s.length-1])*256,s=s.slice(0,s.length-2)):s=n.split(":"),u=0,f=0,o=0;o<s.length;o++)if(typeof s[o]=="string")if(s[o]==="Z"){for(f=0;f<8-s.length+1;f++)_[o+f]=0;u=f-1}else _[o+u]=xr(parseInt(s[o],16));else _[o+u]=s[o];return[_[1]<<16|_[0],_[3]<<16|_[2],_[5]<<16|_[4],_[7]<<16|_[6]]}var Ge={address_map:{id:1,addrs:{},names:{}},lookup_name:function(n){var s=kr(n);if(s!==null||(s=Un(n),s!==null))return n;var o;if(Ge.address_map.addrs[n])o=Ge.address_map.addrs[n];else{var u=Ge.address_map.id++;R(u<65535,"exceeded max address mappings of 65535"),o="172.29."+(u&255)+"."+(u&65280),Ge.address_map.names[o]=n,Ge.address_map.addrs[n]=o}return o},lookup_addr:function(n){return Ge.address_map.names[n]?Ge.address_map.names[n]:null}};function Hn(n,s,o){if(o&&n===0)return null;var u=_o(n,s);if(u.errno)throw new l.ErrnoError(u.errno);return u.addr=Ge.lookup_addr(u.addr)||u.addr,u}function uf(n,s,o,u,f,h){try{var _=Ht(n),m=Hn(s,o);return _.sock_ops.bind(_,m.addr,m.port),0}catch(k){if(typeof l>"u"||k.name!=="ErrnoError")throw k;return-k.errno}}function cf(n,s,o,u,f,h){try{var _=Ht(n),m=Hn(s,o);return _.sock_ops.connect(_,m.addr,m.port),0}catch(k){if(typeof l>"u"||k.name!=="ErrnoError")throw k;return-k.errno}}function lf(n,s,o,u){try{if(s=Y.getStr(s),s=Y.calculateAt(n,s),o&-8)return-28;var f=l.lookupPath(s,{follow:!0}),h=f.node;if(!h)return-44;var _="";return o&4&&(_+="r"),o&2&&(_+="w"),o&1&&(_+="x"),_&&l.nodePermissions(h,_)?-2:0}catch(m){if(typeof l>"u"||m.name!=="ErrnoError")throw m;return-m.errno}}function ff(n,s,o){Y.varargs=o;try{var u=Y.getStreamFromFD(n);switch(s){case 0:{var f=Y.get();if(f<0)return-28;var h;return h=l.createStream(u,f),h.fd}case 1:case 2:return 0;case 3:return u.flags;case 4:{var f=Y.get();return u.flags|=f,0}case 5:{var f=Y.get(),_=0;return le[f+_>>>1]=2,0}case 6:case 7:return 0;case 16:case 8:return-28;case 9:return af(28),-1;default:return-28}}catch(m){if(typeof l>"u"||m.name!=="ErrnoError")throw m;return-m.errno}}function df(n,s){try{var o=Y.getStreamFromFD(n);return Y.doStat(l.stat,o.path,s)}catch(u){if(typeof l>"u"||u.name!=="ErrnoError")throw u;return-u.errno}}function Tr(n,s){return s+2097152>>>0<4194305-!!n?(n>>>0)+s*4294967296:NaN}function hf(n,s,o){try{var u=Tr(s,o);return isNaN(u)?-61:(l.ftruncate(n,u),0)}catch(f){if(typeof l>"u"||f.name!=="ErrnoError")throw f;return-f.errno}}function Zt(n,s,o){return In(n,z,s,o)}function _f(n,s,o){try{var u=Y.getStreamFromFD(n);u.getdents||(u.getdents=l.readdir(u.path));for(var f=280,h=0,_=l.llseek(u,0,1),m=Math.floor(_/f);m<u.getdents.length&&h+f<=o;){var k,D,M=u.getdents[m];if(M===".")k=u.node.id,D=4;else if(M===".."){var K=l.lookupPath(u.path,{parent:!0});k=K.node.id,D=4}else{var I=l.lookupNode(u.node,M);k=I.id,D=l.isChrdev(I.mode)?2:l.isDir(I.mode)?4:l.isLink(I.mode)?10:8}he=[k>>>0,(U=k,+Math.abs(U)>=1?U>0?+Math.floor(U/4294967296)>>>0:~~+Math.ceil((U-+(~~U>>>0))/4294967296)>>>0:0)],g[s+h>>>2]=he[0],g[s+h+4>>>2]=he[1],he=[(m+1)*f>>>0,(U=(m+1)*f,+Math.abs(U)>=1?U>0?+Math.floor(U/4294967296)>>>0:~~+Math.ceil((U-+(~~U>>>0))/4294967296)>>>0:0)],g[s+h+8>>>2]=he[0],g[s+h+12>>>2]=he[1],le[s+h+16>>>1]=280,W[s+h+18>>>0]=D,Zt(M,s+h+19,256),h+=f,m+=1}return l.llseek(u,m*f,0),h}catch(B){if(typeof l>"u"||B.name!=="ErrnoError")throw B;return-B.errno}}function $n(n,s,o,u,f){switch(s){case 2:o=kr(o),Ln(n,16),f&&(g[f>>>2]=16),le[n>>>1]=s,g[n+4>>>2]=o,le[n+2>>>1]=xr(u);break;case 10:o=Un(o),Ln(n,28),f&&(g[f>>>2]=28),g[n>>>2]=s,g[n+8>>>2]=o[0],g[n+12>>>2]=o[1],g[n+16>>>2]=o[2],g[n+20>>>2]=o[3],le[n+2>>>1]=xr(u);break;default:return 5}return 0}function pf(n,s,o,u,f,h){try{var _=Ht(n);if(!_.daddr)return-53;var m=$n(s,_.family,Ge.lookup_name(_.daddr),_.dport,o);return 0}catch(k){if(typeof l>"u"||k.name!=="ErrnoError")throw k;return-k.errno}}function mf(n,s,o,u,f,h){try{var _=Ht(n);return s===1&&o===4?(g[u>>>2]=_.error,g[f>>>2]=4,_.error=null,0):-50}catch(m){if(typeof l>"u"||m.name!=="ErrnoError")throw m;return-m.errno}}function gf(n,s,o){Y.varargs=o;try{var u=Y.getStreamFromFD(n);switch(s){case 21509:case 21505:return u.tty?0:-59;case 21510:case 21511:case 21512:case 21506:case 21507:case 21508:return u.tty?0:-59;case 21519:{if(!u.tty)return-59;var f=Y.get();return g[f>>>2]=0,0}case 21520:return u.tty?-28:-59;case 21531:{var f=Y.get();return l.ioctl(u,s,f)}case 21523:return u.tty?0:-59;case 21524:return u.tty?0:-59;default:return-28}}catch(h){if(typeof l>"u"||h.name!=="ErrnoError")throw h;return-h.errno}}function yf(n,s){try{return n=Y.getStr(n),Y.doStat(l.lstat,n,s)}catch(o){if(typeof l>"u"||o.name!=="ErrnoError")throw o;return-o.errno}}function bf(n,s,o){try{return s=Y.getStr(s),s=Y.calculateAt(n,s),s=_e.normalize(s),s[s.length-1]==="/"&&(s=s.substr(0,s.length-1)),l.mkdir(s,o,0),0}catch(u){if(typeof l>"u"||u.name!=="ErrnoError")throw u;return-u.errno}}function vf(n,s,o,u){try{s=Y.getStr(s);var f=u&256,h=u&4096;return u=u&-6401,s=Y.calculateAt(n,s,h),Y.doStat(f?l.lstat:l.stat,s,o)}catch(_){if(typeof l>"u"||_.name!=="ErrnoError")throw _;return-_.errno}}function Ef(n,s,o,u){Y.varargs=u;try{s=Y.getStr(s),s=Y.calculateAt(n,s);var f=u?Y.get():0;return l.open(s,o,f).fd}catch(h){if(typeof l>"u"||h.name!=="ErrnoError")throw h;return-h.errno}}function Sf(n,s,o,u,f,h){try{var _=Ht(n),m=_.sock_ops.recvmsg(_,o);if(!m)return 0;if(f)var k=$n(f,_.family,Ge.lookup_name(m.addr),m.port,h);return z.set(m.buffer,s>>>0),m.buffer.byteLength}catch(D){if(typeof l>"u"||D.name!=="ErrnoError")throw D;return-D.errno}}function wf(n,s,o,u){try{return s=Y.getStr(s),u=Y.getStr(u),s=Y.calculateAt(n,s),u=Y.calculateAt(o,u),l.rename(s,u),0}catch(f){if(typeof l>"u"||f.name!=="ErrnoError")throw f;return-f.errno}}function kf(n){try{return n=Y.getStr(n),l.rmdir(n),0}catch(s){if(typeof l>"u"||s.name!=="ErrnoError")throw s;return-s.errno}}function Rf(n,s,o,u,f,h){try{var _=Ht(n),m=Hn(f,h,!0);return m?_.sock_ops.sendmsg(_,W,s,o,m.addr,m.port):l.write(_.stream,W,s,o)}catch(k){if(typeof l>"u"||k.name!=="ErrnoError")throw k;return-k.errno}}function Tf(n,s,o){try{var u=be.createSocket(n,s,o);return u.stream.fd}catch(f){if(typeof l>"u"||f.name!=="ErrnoError")throw f;return-f.errno}}function Af(n,s){try{return n=Y.getStr(n),Y.doStat(l.stat,n,s)}catch(o){if(typeof l>"u"||o.name!=="ErrnoError")throw o;return-o.errno}}function Pf(n,s,o){try{return s=Y.getStr(s),s=Y.calculateAt(n,s),o===0?l.unlink(s):o===512?l.rmdir(s):de("Invalid flags passed to unlinkat"),0}catch(u){if(typeof l>"u"||u.name!=="ErrnoError")throw u;return-u.errno}}var Df=!0;function xf(){return Df}function Cf(n){return j[n>>>2]+g[n+4>>>2]*4294967296}function er(n){return n%4===0&&(n%100!==0||n%400===0)}var Of=[0,31,60,91,121,152,182,213,244,274,305,335],Ff=[0,31,59,90,120,151,181,212,243,273,304,334];function Mf(n){var s=er(n.getFullYear()),o=s?Of:Ff,u=o[n.getMonth()]+n.getDate()-1;return u}function If(n,s){var o=new Date(Cf(n)*1e3);g[s>>>2]=o.getSeconds(),g[s+4>>>2]=o.getMinutes(),g[s+8>>>2]=o.getHours(),g[s+12>>>2]=o.getDate(),g[s+16>>>2]=o.getMonth(),g[s+20>>>2]=o.getFullYear()-1900,g[s+24>>>2]=o.getDay();var u=Mf(o)|0;g[s+28>>>2]=u,g[s+36>>>2]=-(o.getTimezoneOffset()*60);var f=new Date(o.getFullYear(),0,1),h=new Date(o.getFullYear(),6,1).getTimezoneOffset(),_=f.getTimezoneOffset(),m=(h!=_&&o.getTimezoneOffset()==Math.min(_,h))|0;g[s+32>>>2]=m}function po(n){var s=Sr(n)+1,o=Cr(s);return o&&Zt(n,o,s),o}function Lf(n,s,o){var u=new Date().getFullYear(),f=new Date(u,0,1),h=new Date(u,6,1),_=f.getTimezoneOffset(),m=h.getTimezoneOffset(),k=Math.max(_,m);j[n>>>2]=k*60,g[s>>>2]=+(_!=m);function D(q){var fe=q.toTimeString().match(/\(([A-Za-z ]+)\)$/);return fe?fe[1]:"GMT"}var M=D(f),K=D(h),I=po(M),B=po(K);m<_?(j[o>>>2]=I,j[o+4>>>2]=B):(j[o>>>2]=B,j[o+4>>>2]=I)}function Nf(){de("")}function Bf(n,s){de(co)}function Uf(n,s){return globalThis.DUCKDB_RUNTIME.createDirectory(t,n,s)}function Hf(n,s){return globalThis.DUCKDB_RUNTIME.checkDirectory(t,n,s)}function $f(n,s){return globalThis.DUCKDB_RUNTIME.listDirectoryEntries(t,n,s)}function qf(n,s){return globalThis.DUCKDB_RUNTIME.removeDirectory(t,n,s)}function Wf(n){return globalThis.DUCKDB_RUNTIME.closeFile(t,n)}function jf(n,s,o,u){return globalThis.DUCKDB_RUNTIME.checkFile(t,n,s,o,u)}function Gf(n){return globalThis.DUCKDB_RUNTIME.getLastFileModificationTime(t,n)}function Vf(n,s,o,u){return globalThis.DUCKDB_RUNTIME.moveFile(t,n,s,o,u)}function zf(n,s){return globalThis.DUCKDB_RUNTIME.openFile(t,n,s)}function Kf(n,s,o,u){return globalThis.DUCKDB_RUNTIME.readFile(t,n,s,o,u)}function Yf(n,s){return globalThis.DUCKDB_RUNTIME.truncateFile(t,n,s)}function Xf(n,s,o,u){return globalThis.DUCKDB_RUNTIME.writeFile(t,n,s,o,u)}function Qf(n){return globalThis.DUCKDB_RUNTIME.getDefaultDataProtocol(n)}function Jf(n,s){return globalThis.DUCKDB_RUNTIME.glob(t,n,s)}function Zf(n){return globalThis.DUCKDB_RUNTIME.testPlatformFeature(t,n)}function ed(n,s,o,u,f,h){return globalThis.DUCKDB_RUNTIME.callScalarUDF(t,n,s,o,u,f,h)}function td(){return Date.now()}function mo(){return 4294901760}function rd(){return mo()}var go;E&&(global.performance=require("perf_hooks").performance),go=()=>performance.now();function nd(n,s,o){z.copyWithin(n>>>0,s>>>0,s+o>>>0)}function sd(n){var s=$.buffer,o=n-s.byteLength+65535>>>16;try{return $.grow(o),He(),1}catch{}}function id(n){var s=z.length;n=n>>>0;var o=mo();if(n>o)return!1;for(var u=(k,D)=>k+(D-k%D)%D,f=1;f<=4;f*=2){var h=s*(1+.2/f);h=Math.min(h,n+100663296);var _=Math.min(o,u(Math.max(n,h),65536)),m=sd(_);if(m)return!0}return!1}var qn={};function od(){return p||"./this.program"}function tr(){if(!tr.strings){var n=(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",s={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:n,_:od()};for(var o in qn)qn[o]===void 0?delete s[o]:s[o]=qn[o];var u=[];for(var o in s)u.push(`${o}=${s[o]}`);tr.strings=u}return tr.strings}function ad(n,s){for(var o=0;o<n.length;++o)W[s++>>>0]=n.charCodeAt(o);W[s>>>0]=0}function ud(n,s){var o=0;return tr().forEach(function(u,f){var h=s+o;j[n+f*4>>>2]=h,ad(u,h),o+=u.length+1}),0}function cd(n,s){var o=tr();j[n>>>2]=o.length;var u=0;return o.forEach(function(f){u+=f.length+1}),j[s>>>2]=u,0}function ld(n){try{var s=Y.getStreamFromFD(n);return l.close(s),0}catch(o){if(typeof l>"u"||o.name!=="ErrnoError")throw o;return o.errno}}function fd(n,s){try{var o=0,u=0,f=0,h=Y.getStreamFromFD(n),_=h.tty?2:l.isDir(h.mode)?3:l.isLink(h.mode)?7:4;return W[s>>>0]=_,le[s+2>>>1]=f,he=[o>>>0,(U=o,+Math.abs(U)>=1?U>0?+Math.floor(U/4294967296)>>>0:~~+Math.ceil((U-+(~~U>>>0))/4294967296)>>>0:0)],g[s+8>>>2]=he[0],g[s+12>>>2]=he[1],he=[u>>>0,(U=u,+Math.abs(U)>=1?U>0?+Math.floor(U/4294967296)>>>0:~~+Math.ceil((U-+(~~U>>>0))/4294967296)>>>0:0)],g[s+16>>>2]=he[0],g[s+20>>>2]=he[1],0}catch(m){if(typeof l>"u"||m.name!=="ErrnoError")throw m;return m.errno}}function yo(n,s,o,u){for(var f=0,h=0;h<o;h++){var _=j[s>>>2],m=j[s+4>>>2];s+=8;var k=l.read(n,W,_,m,u);if(k<0)return-1;if(f+=k,k<m)break;typeof u<"u"&&(u+=k)}return f}function dd(n,s,o,u,f,h){try{var _=Tr(u,f);if(isNaN(_))return 61;var m=Y.getStreamFromFD(n),k=yo(m,s,o,_);return j[h>>>2]=k,0}catch(D){if(typeof l>"u"||D.name!=="ErrnoError")throw D;return D.errno}}function bo(n,s,o,u){for(var f=0,h=0;h<o;h++){var _=j[s>>>2],m=j[s+4>>>2];s+=8;var k=l.write(n,W,_,m,u);if(k<0)return-1;f+=k,typeof u<"u"&&(u+=k)}return f}function hd(n,s,o,u,f,h){try{var _=Tr(u,f);if(isNaN(_))return 61;var m=Y.getStreamFromFD(n),k=bo(m,s,o,_);return j[h>>>2]=k,0}catch(D){if(typeof l>"u"||D.name!=="ErrnoError")throw D;return D.errno}}function _d(n,s,o,u){try{var f=Y.getStreamFromFD(n),h=yo(f,s,o);return j[u>>>2]=h,0}catch(_){if(typeof l>"u"||_.name!=="ErrnoError")throw _;return _.errno}}function pd(n,s,o,u,f){try{var h=Tr(s,o);if(isNaN(h))return 61;var _=Y.getStreamFromFD(n);return l.llseek(_,h,u),he=[_.position>>>0,(U=_.position,+Math.abs(U)>=1?U>0?+Math.floor(U/4294967296)>>>0:~~+Math.ceil((U-+(~~U>>>0))/4294967296)>>>0:0)],g[f>>>2]=he[0],g[f+4>>>2]=he[1],_.getdents&&h===0&&u===0&&(_.getdents=null),0}catch(m){if(typeof l>"u"||m.name!=="ErrnoError")throw m;return m.errno}}function md(n){try{var s=Y.getStreamFromFD(n);return s.stream_ops&&s.stream_ops.fsync?s.stream_ops.fsync(s):0}catch(o){if(typeof l>"u"||o.name!=="ErrnoError")throw o;return o.errno}}function gd(n,s,o,u){try{var f=Y.getStreamFromFD(n),h=bo(f,s,o);return j[u>>>2]=h,0}catch(_){if(typeof l>"u"||_.name!=="ErrnoError")throw _;return _.errno}}function yd(n,s,o,u){var f=0,h=0,_=0,m=0,k=0,D=0,M;function K(I,B,q,fe,Ae,Pe){var T,H,ce,ee;return H=I===10?28:16,Ae=I===10?ho(Ae):Bn(Ae),T=Cr(H),ee=$n(T,I,Ae,Pe),R(!ee),ce=Cr(32),g[ce+4>>>2]=I,g[ce+8>>>2]=B,g[ce+12>>>2]=q,j[ce+24>>>2]=fe,j[ce+20>>>2]=T,I===10?g[ce+16>>>2]=28:g[ce+16>>>2]=16,g[ce+28>>>2]=0,ce}if(o&&(_=g[o>>>2],m=g[o+4>>>2],k=g[o+8>>>2],D=g[o+12>>>2]),k&&!D&&(D=k===2?17:6),!k&&D&&(k=D===17?2:1),D===0&&(D=6),k===0&&(k=1),!n&&!s)return-2;if(_&-1088||o!==0&&g[o>>>2]&2&&!n)return-1;if(_&32)return-2;if(k!==0&&k!==1&&k!==2)return-7;if(m!==0&&m!==2&&m!==10)return-6;if(s&&(s=Ut(s),h=parseInt(s,10),isNaN(h)))return _&1024?-2:-8;if(!n)return m===0&&(m=2),_&1||(m===2?f=Dr(2130706433):f=[0,0,0,1]),M=K(m,k,D,null,f,h),j[u>>>2]=M,0;if(n=Ut(n),f=kr(n),f!==null)if(m===0||m===2)m=2;else if(m===10&&_&8)f=[0,0,Dr(65535),f],m=10;else return-2;else if(f=Un(n),f!==null)if(m===0||m===10)m=10;else return-2;return f!=null?(M=K(m,k,D,n,f,h),j[u>>>2]=M,0):_&4?-2:(n=Ge.lookup_name(n),f=kr(n),m===0?m=2:m===10&&(f=[0,0,Dr(65535),f]),M=K(m,k,D,null,f,h),j[u>>>2]=M,0)}function bd(n,s){return Mn(z.subarray(n>>>0,n+s>>>0)),0}function vd(n,s,o,u,f,h,_){var m=_o(n,s);if(m.errno)return-6;var k=m.port,D=m.addr,M=!1;if(o&&u){var K;if(_&1||!(K=Ge.lookup_addr(D))){if(_&8)return-2}else D=K;var I=Zt(D,o,u);I+1>=u&&(M=!0)}if(f&&h){k=""+k;var I=Zt(k,f,h);I+1>=h&&(M=!0)}return M?-12:0}function Ed(n,s){for(var o=0,u=0;u<=s;o+=n[u++]);return o}var vo=[31,29,31,30,31,30,31,31,30,31,30,31],Eo=[31,28,31,30,31,30,31,31,30,31,30,31];function Sd(n,s){for(var o=new Date(n.getTime());s>0;){var u=er(o.getFullYear()),f=o.getMonth(),h=(u?vo:Eo)[f];if(s>h-o.getDate())s-=h-o.getDate()+1,o.setDate(1),f<11?o.setMonth(f+1):(o.setMonth(0),o.setFullYear(o.getFullYear()+1));else return o.setDate(o.getDate()+s),o}return o}function So(n,s){W.set(n,s>>>0)}function wd(n,s,o,u){var f=g[u+40>>>2],h={tm_sec:g[u>>>2],tm_min:g[u+4>>>2],tm_hour:g[u+8>>>2],tm_mday:g[u+12>>>2],tm_mon:g[u+16>>>2],tm_year:g[u+20>>>2],tm_wday:g[u+24>>>2],tm_yday:g[u+28>>>2],tm_isdst:g[u+32>>>2],tm_gmtoff:g[u+36>>>2],tm_zone:f?Ut(f):""},_=Ut(o),m={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var k in m)_=_.replace(new RegExp(k,"g"),m[k]);var D=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],M=["January","February","March","April","May","June","July","August","September","October","November","December"];function K(T,H,ce){for(var ee=typeof T=="number"?T.toString():T||"";ee.length<H;)ee=ce[0]+ee;return ee}function I(T,H){return K(T,H,"0")}function B(T,H){function ce(Re){return Re<0?-1:Re>0?1:0}var ee;return(ee=ce(T.getFullYear()-H.getFullYear()))===0&&(ee=ce(T.getMonth()-H.getMonth()))===0&&(ee=ce(T.getDate()-H.getDate())),ee}function q(T){switch(T.getDay()){case 0:return new Date(T.getFullYear()-1,11,29);case 1:return T;case 2:return new Date(T.getFullYear(),0,3);case 3:return new Date(T.getFullYear(),0,2);case 4:return new Date(T.getFullYear(),0,1);case 5:return new Date(T.getFullYear()-1,11,31);case 6:return new Date(T.getFullYear()-1,11,30)}}function fe(T){var H=Sd(new Date(T.tm_year+1900,0,1),T.tm_yday),ce=new Date(H.getFullYear(),0,4),ee=new Date(H.getFullYear()+1,0,4),Re=q(ce),ke=q(ee);return B(Re,H)<=0?B(ke,H)<=0?H.getFullYear()+1:H.getFullYear():H.getFullYear()-1}var Ae={"%a":function(T){return D[T.tm_wday].substring(0,3)},"%A":function(T){return D[T.tm_wday]},"%b":function(T){return M[T.tm_mon].substring(0,3)},"%B":function(T){return M[T.tm_mon]},"%C":function(T){var H=T.tm_year+1900;return I(H/100|0,2)},"%d":function(T){return I(T.tm_mday,2)},"%e":function(T){return K(T.tm_mday,2," ")},"%g":function(T){return fe(T).toString().substring(2)},"%G":function(T){return fe(T)},"%H":function(T){return I(T.tm_hour,2)},"%I":function(T){var H=T.tm_hour;return H==0?H=12:H>12&&(H-=12),I(H,2)},"%j":function(T){return I(T.tm_mday+Ed(er(T.tm_year+1900)?vo:Eo,T.tm_mon-1),3)},"%m":function(T){return I(T.tm_mon+1,2)},"%M":function(T){return I(T.tm_min,2)},"%n":function(){return`
`},"%p":function(T){return T.tm_hour>=0&&T.tm_hour<12?"AM":"PM"},"%S":function(T){return I(T.tm_sec,2)},"%t":function(){return"	"},"%u":function(T){return T.tm_wday||7},"%U":function(T){var H=T.tm_yday+7-T.tm_wday;return I(Math.floor(H/7),2)},"%V":function(T){var H=Math.floor((T.tm_yday+7-(T.tm_wday+6)%7)/7);if((T.tm_wday+371-T.tm_yday-2)%7<=2&&H++,H){if(H==53){var ee=(T.tm_wday+371-T.tm_yday)%7;ee!=4&&(ee!=3||!er(T.tm_year))&&(H=1)}}else{H=52;var ce=(T.tm_wday+7-T.tm_yday-1)%7;(ce==4||ce==5&&er(T.tm_year%400-1))&&H++}return I(H,2)},"%w":function(T){return T.tm_wday},"%W":function(T){var H=T.tm_yday+7-(T.tm_wday+6)%7;return I(Math.floor(H/7),2)},"%y":function(T){return(T.tm_year+1900).toString().substring(2)},"%Y":function(T){return T.tm_year+1900},"%z":function(T){var H=T.tm_gmtoff,ce=H>=0;return H=Math.abs(H)/60,H=H/60*100+H%60,(ce?"+":"-")+("0000"+H).slice(-4)},"%Z":function(T){return T.tm_zone},"%%":function(){return"%"}};_=_.replace(/%%/g,"\0\0");for(var k in Ae)_.includes(k)&&(_=_.replace(new RegExp(k,"g"),Ae[k](h)));_=_.replace(/\0\0/g,"%");var Pe=wr(_,!1);return Pe.length>s?0:(So(Pe,n),Pe.length-1)}function kd(n,s,o,u,f){return wd(n,s,o,u)}function Rd(){O("missing function: unzClose"),de(-1)}function Td(){O("missing function: unzCloseCurrentFile"),de(-1)}function Ad(){O("missing function: unzGetCurrentFileInfo"),de(-1)}function Pd(){O("missing function: unzGetCurrentFileInfo64"),de(-1)}function Dd(){O("missing function: unzGetGlobalInfo"),de(-1)}function xd(){O("missing function: unzGoToFirstFile"),de(-1)}function Cd(){O("missing function: unzGoToNextFile"),de(-1)}function Od(){O("missing function: unzLocateFile"),de(-1)}function Fd(){O("missing function: unzOpen2"),de(-1)}function Md(){O("missing function: unzOpenCurrentFile"),de(-1)}function Id(){O("missing function: unzReadCurrentFile"),de(-1)}function Ld(n){ae=n,On()||(t.onExit&&t.onExit(n),L=!0),v(n,new ao(n))}function Nd(n,s){ae=n,Ld(n)}function Bd(n){if(n instanceof ao||n=="unwind")return ae;v(1,n)}function Ud(n){var s=t["_"+n];return s}function Hd(n){var s=Sr(n)+1,o=Or(s);return Zt(n,o,s),o}function $d(n,s,o,u,f){var h={string:q=>{var fe=0;return q!=null&&q!==0&&(fe=Hd(q)),fe},array:q=>{var fe=Or(q.length);return So(q,fe),fe}};function _(q){return s==="string"?Ut(q):s==="boolean"?!!q:q}var m=Ud(n),k=[],D=0;if(u)for(var M=0;M<u.length;M++){var K=h[o[M]];K?(D===0&&(D=jn()),k[M]=K(u[M])):k[M]=u[M]}var I=m.apply(null,k);function B(q){return D!==0&&Gn(D),_(q)}return I=B(I),I}var wo=function(n,s,o,u){n||(n=this),this.parent=n,this.mount=n.mount,this.mounted=null,this.id=l.nextInode++,this.name=s,this.mode=o,this.node_ops={},this.stream_ops={},this.rdev=u},Ar=365,Pr=146;Object.defineProperties(wo.prototype,{read:{get:function(){return(this.mode&Ar)===Ar},set:function(n){n?this.mode|=Ar:this.mode&=~Ar}},write:{get:function(){return(this.mode&Pr)===Pr},set:function(n){n?this.mode|=Pr:this.mode&=~Pr}},isFolder:{get:function(){return l.isDir(this.mode)}},isDevice:{get:function(){return l.isChrdev(this.mode)}}}),l.FSNode=wo,l.createPreloadedFile=nf,l.staticInit();var qd={g:Nl,T:Bl,U:Ul,m:Hl,o:$l,c:ql,z:Wl,f:jl,b:Gl,n:Vl,h:zl,a:Xl,Aa:Ql,ua:of,ya:uf,xa:cf,qa:lf,d:ff,pa:df,N:hf,ka:_f,sa:pf,ta:mf,I:gf,ma:yf,la:bf,na:vf,J:Ef,va:Sf,ia:wf,D:kf,wa:Rf,F:Tf,oa:Af,E:Pf,Ca:xf,W:If,X:Lf,e:Nf,Ba:Bf,ba:Uf,ca:Hf,$:$f,aa:qf,B:Wf,Z:jf,M:Gf,_:Vf,ea:zf,p:Kf,da:Yf,C:Xf,fa:Qf,Y:Jf,A:Zf,ga:ed,K:td,Da:rd,i:go,za:nd,Fa:id,L:ud,R:cd,k:ld,V:fd,P:dd,O:hd,H:_d,Q:pd,ja:md,u:gd,G:yd,ha:bd,ra:vd,Ea:kd,j:Rd,t:Td,x:Ad,q:Pd,S:Dd,y:xd,w:Cd,s:Od,v:Fd,r:Md,l:Id},cb=Ll(),Wd=function(){return(Wd=t.asm.Ha).apply(null,arguments)},ko=t._main=function(){return(ko=t._main=t.asm.Ia).apply(null,arguments)},jd=t._duckdb_web_fs_glob_add_path=function(){return(jd=t._duckdb_web_fs_glob_add_path=t.asm.Ka).apply(null,arguments)},Gd=t._duckdb_web_clear_response=function(){return(Gd=t._duckdb_web_clear_response=t.asm.La).apply(null,arguments)},Vd=t._duckdb_web_fail_with=function(){return(Vd=t._duckdb_web_fail_with=t.asm.Ma).apply(null,arguments)},zd=t._duckdb_web_reset=function(){return(zd=t._duckdb_web_reset=t.asm.Na).apply(null,arguments)},Kd=t._duckdb_web_connect=function(){return(Kd=t._duckdb_web_connect=t.asm.Oa).apply(null,arguments)},Yd=t._duckdb_web_disconnect=function(){return(Yd=t._duckdb_web_disconnect=t.asm.Pa).apply(null,arguments)},Xd=t._duckdb_web_flush_files=function(){return(Xd=t._duckdb_web_flush_files=t.asm.Qa).apply(null,arguments)},Qd=t._duckdb_web_flush_file=function(){return(Qd=t._duckdb_web_flush_file=t.asm.Ra).apply(null,arguments)},Jd=t._duckdb_web_open=function(){return(Jd=t._duckdb_web_open=t.asm.Sa).apply(null,arguments)},Zd=t._duckdb_web_get_global_file_info=function(){return(Zd=t._duckdb_web_get_global_file_info=t.asm.Ta).apply(null,arguments)},eh=t._duckdb_web_collect_file_stats=function(){return(eh=t._duckdb_web_collect_file_stats=t.asm.Ua).apply(null,arguments)},th=t._duckdb_web_export_file_stats=function(){return(th=t._duckdb_web_export_file_stats=t.asm.Va).apply(null,arguments)},rh=t._duckdb_web_fs_drop_file=function(){return(rh=t._duckdb_web_fs_drop_file=t.asm.Wa).apply(null,arguments)},nh=t._duckdb_web_fs_drop_files=function(){return(nh=t._duckdb_web_fs_drop_files=t.asm.Xa).apply(null,arguments)},sh=t._duckdb_web_fs_glob_file_infos=function(){return(sh=t._duckdb_web_fs_glob_file_infos=t.asm.Ya).apply(null,arguments)},ih=t._duckdb_web_fs_get_file_info_by_id=function(){return(ih=t._duckdb_web_fs_get_file_info_by_id=t.asm.Za).apply(null,arguments)},oh=t._duckdb_web_fs_get_file_info_by_name=function(){return(oh=t._duckdb_web_fs_get_file_info_by_name=t.asm._a).apply(null,arguments)},ah=t._duckdb_web_fs_register_file_url=function(){return(ah=t._duckdb_web_fs_register_file_url=t.asm.$a).apply(null,arguments)},uh=t._duckdb_web_fs_register_file_buffer=function(){return(uh=t._duckdb_web_fs_register_file_buffer=t.asm.ab).apply(null,arguments)},ch=t._duckdb_web_copy_file_to_buffer=function(){return(ch=t._duckdb_web_copy_file_to_buffer=t.asm.bb).apply(null,arguments)},lh=t._duckdb_web_copy_file_to_path=function(){return(lh=t._duckdb_web_copy_file_to_path=t.asm.cb).apply(null,arguments)},fh=t._duckdb_web_get_version=function(){return(fh=t._duckdb_web_get_version=t.asm.db).apply(null,arguments)},dh=t._duckdb_web_get_feature_flags=function(){return(dh=t._duckdb_web_get_feature_flags=t.asm.eb).apply(null,arguments)},hh=t._duckdb_web_tokenize=function(){return(hh=t._duckdb_web_tokenize=t.asm.fb).apply(null,arguments)},_h=t._duckdb_web_udf_scalar_create=function(){return(_h=t._duckdb_web_udf_scalar_create=t.asm.gb).apply(null,arguments)},ph=t._duckdb_web_prepared_create=function(){return(ph=t._duckdb_web_prepared_create=t.asm.hb).apply(null,arguments)},mh=t._duckdb_web_prepared_close=function(){return(mh=t._duckdb_web_prepared_close=t.asm.ib).apply(null,arguments)},gh=t._duckdb_web_prepared_run=function(){return(gh=t._duckdb_web_prepared_run=t.asm.jb).apply(null,arguments)},yh=t._duckdb_web_prepared_send=function(){return(yh=t._duckdb_web_prepared_send=t.asm.kb).apply(null,arguments)},bh=t._duckdb_web_query_run=function(){return(bh=t._duckdb_web_query_run=t.asm.lb).apply(null,arguments)},vh=t._duckdb_web_pending_query_start=function(){return(vh=t._duckdb_web_pending_query_start=t.asm.mb).apply(null,arguments)},Eh=t._duckdb_web_pending_query_poll=function(){return(Eh=t._duckdb_web_pending_query_poll=t.asm.nb).apply(null,arguments)},Sh=t._duckdb_web_pending_query_cancel=function(){return(Sh=t._duckdb_web_pending_query_cancel=t.asm.ob).apply(null,arguments)},wh=t._duckdb_web_query_fetch_results=function(){return(wh=t._duckdb_web_query_fetch_results=t.asm.pb).apply(null,arguments)},kh=t._duckdb_web_get_tablenames=function(){return(kh=t._duckdb_web_get_tablenames=t.asm.qb).apply(null,arguments)},Rh=t._duckdb_web_insert_arrow_from_ipc_stream=function(){return(Rh=t._duckdb_web_insert_arrow_from_ipc_stream=t.asm.rb).apply(null,arguments)},Th=t._duckdb_web_insert_csv_from_path=function(){return(Th=t._duckdb_web_insert_csv_from_path=t.asm.sb).apply(null,arguments)},Ah=t._duckdb_web_insert_json_from_path=function(){return(Ah=t._duckdb_web_insert_json_from_path=t.asm.tb).apply(null,arguments)},Ro=function(){return(Ro=t.asm.ub).apply(null,arguments)},Dr=function(){return(Dr=t.asm.vb).apply(null,arguments)},xr=function(){return(xr=t.asm.wb).apply(null,arguments)},Wn=function(){return(Wn=t.asm.xb).apply(null,arguments)},Cr=t._malloc=function(){return(Cr=t._malloc=t.asm.yb).apply(null,arguments)},Ph=t._free=function(){return(Ph=t._free=t.asm.zb).apply(null,arguments)},To=function(){return(To=t.asm.Ab).apply(null,arguments)},jn=function(){return(jn=t.asm.Bb).apply(null,arguments)},Gn=function(){return(Gn=t.asm.Cb).apply(null,arguments)},Or=function(){return(Or=t.asm.Db).apply(null,arguments)},Ao=function(){return(Ao=t.asm.Eb).apply(null,arguments)};t.stackAlloc=Or,t.stackSave=jn,t.stackRestore=Gn,t.ccall=$d;var Fr;Jt=function n(){Fr||Po(),Fr||(Jt=n)};function Dh(){var n=ko,s=0,o=0;try{var u=n(s,o);return Nd(u,!0),u}catch(f){return Bd(f)}}function Po(){if(Ye>0||(F(),Ye>0))return;function n(){Fr||(Fr=!0,t.calledRun=!0,!L&&(ge(),C(),i(t),t.onRuntimeInitialized&&t.onRuntimeInitialized(),Do&&Dh(),Z()))}t.setStatus?(t.setStatus("Running..."),setTimeout(function(){setTimeout(function(){t.setStatus("")},1),n()},1)):n()}if(t.preInit)for(typeof t.preInit=="function"&&(t.preInit=[t.preInit]);t.preInit.length>0;)t.preInit.pop()();var Do=!0;return t.noInitialRun&&(Do=!1),Po(),e.ready}})();typeof Yr=="object"&&typeof _s=="object"?_s.exports=hs:typeof define=="function"&&define.amd?define([],function(){return hs}):typeof Yr=="object"&&(Yr.DuckDB=hs)});var qa=x(Gt=>{"use strict";Object.defineProperty(Gt,"__esModule",{value:!0});Gt.splitWhen=Gt.flatten=void 0;function rp(r){return r.reduce((e,t)=>[].concat(e,t),[])}Gt.flatten=rp;function np(r,e){let t=[[]],i=0;for(let a of r)e(a)?(i++,t[i]=[]):t[i].push(a);return t}Gt.splitWhen=np});var Wa=x(nn=>{"use strict";Object.defineProperty(nn,"__esModule",{value:!0});nn.isEnoentCodeError=void 0;function sp(r){return r.code==="ENOENT"}nn.isEnoentCodeError=sp});var ja=x(sn=>{"use strict";Object.defineProperty(sn,"__esModule",{value:!0});sn.createDirentFromStats=void 0;var vs=class{constructor(e,t){this.name=e,this.isBlockDevice=t.isBlockDevice.bind(t),this.isCharacterDevice=t.isCharacterDevice.bind(t),this.isDirectory=t.isDirectory.bind(t),this.isFIFO=t.isFIFO.bind(t),this.isFile=t.isFile.bind(t),this.isSocket=t.isSocket.bind(t),this.isSymbolicLink=t.isSymbolicLink.bind(t)}};function ip(r,e){return new vs(r,e)}sn.createDirentFromStats=ip});var Ka=x(Ce=>{"use strict";Object.defineProperty(Ce,"__esModule",{value:!0});Ce.convertPosixPathToPattern=Ce.convertWindowsPathToPattern=Ce.convertPathToPattern=Ce.escapePosixPath=Ce.escapeWindowsPath=Ce.escape=Ce.removeLeadingDotSegment=Ce.makeAbsolute=Ce.unixify=void 0;var op=require("os"),ap=require("path"),Ga=op.platform()==="win32",up=2,cp=/(\\?)([()*?[\]{|}]|^!|[!+@](?=\()|\\(?![!()*+?@[\]{|}]))/g,lp=/(\\?)([(){}]|^!|[!+@](?=\())/g,fp=/^\\\\([.?])/,dp=/\\(?![!()+@{}])/g;function hp(r){return r.replace(/\\/g,"/")}Ce.unixify=hp;function _p(r,e){return ap.resolve(r,e)}Ce.makeAbsolute=_p;function pp(r){if(r.charAt(0)==="."){let e=r.charAt(1);if(e==="/"||e==="\\")return r.slice(up)}return r}Ce.removeLeadingDotSegment=pp;Ce.escape=Ga?Es:Ss;function Es(r){return r.replace(lp,"\\$2")}Ce.escapeWindowsPath=Es;function Ss(r){return r.replace(cp,"\\$2")}Ce.escapePosixPath=Ss;Ce.convertPathToPattern=Ga?Va:za;function Va(r){return Es(r).replace(fp,"//$1").replace(dp,"/")}Ce.convertWindowsPathToPattern=Va;function za(r){return Ss(r)}Ce.convertPosixPathToPattern=za});var Xa=x((Jb,Ya)=>{Ya.exports=function(e){if(typeof e!="string"||e==="")return!1;for(var t;t=/(\\).|([@?!+*]\(.*\))/g.exec(e);){if(t[2])return!0;e=e.slice(t.index+t[0].length)}return!1}});var Za=x((Zb,Ja)=>{var mp=Xa(),Qa={"{":"}","(":")","[":"]"},gp=function(r){if(r[0]==="!")return!0;for(var e=0,t=-2,i=-2,a=-2,c=-2,d=-2;e<r.length;){if(r[e]==="*"||r[e+1]==="?"&&/[\].+)]/.test(r[e])||i!==-1&&r[e]==="["&&r[e+1]!=="]"&&(i<e&&(i=r.indexOf("]",e)),i>e&&(d===-1||d>i||(d=r.indexOf("\\",e),d===-1||d>i)))||a!==-1&&r[e]==="{"&&r[e+1]!=="}"&&(a=r.indexOf("}",e),a>e&&(d=r.indexOf("\\",e),d===-1||d>a))||c!==-1&&r[e]==="("&&r[e+1]==="?"&&/[:!=]/.test(r[e+2])&&r[e+3]!==")"&&(c=r.indexOf(")",e),c>e&&(d=r.indexOf("\\",e),d===-1||d>c))||t!==-1&&r[e]==="("&&r[e+1]!=="|"&&(t<e&&(t=r.indexOf("|",e)),t!==-1&&r[t+1]!==")"&&(c=r.indexOf(")",t),c>t&&(d=r.indexOf("\\",t),d===-1||d>c))))return!0;if(r[e]==="\\"){var p=r[e+1];e+=2;var v=Qa[p];if(v){var b=r.indexOf(v,e);b!==-1&&(e=b+1)}if(r[e]==="!")return!0}else e++}return!1},yp=function(r){if(r[0]==="!")return!0;for(var e=0;e<r.length;){if(/[*?{}()[\]]/.test(r[e]))return!0;if(r[e]==="\\"){var t=r[e+1];e+=2;var i=Qa[t];if(i){var a=r.indexOf(i,e);a!==-1&&(e=a+1)}if(r[e]==="!")return!0}else e++}return!1};Ja.exports=function(e,t){if(typeof e!="string"||e==="")return!1;if(mp(e))return!0;var i=gp;return t&&t.strict===!1&&(i=yp),i(e)}});var tu=x((ev,eu)=>{"use strict";var bp=Za(),vp=require("path").posix.dirname,Ep=require("os").platform()==="win32",ws="/",Sp=/\\/g,wp=/[\{\[].*[\}\]]$/,kp=/(^|[^\\])([\{\[]|\([^\)]+$)/,Rp=/\\([\!\*\?\|\[\]\(\)\{\}])/g;eu.exports=function(e,t){var i=Object.assign({flipBackslashes:!0},t);i.flipBackslashes&&Ep&&e.indexOf(ws)<0&&(e=e.replace(Sp,ws)),wp.test(e)&&(e+=ws),e+="a";do e=vp(e);while(bp(e)||kp.test(e));return e.replace(Rp,"$1")}});var on=x(Ve=>{"use strict";Ve.isInteger=r=>typeof r=="number"?Number.isInteger(r):typeof r=="string"&&r.trim()!==""?Number.isInteger(Number(r)):!1;Ve.find=(r,e)=>r.nodes.find(t=>t.type===e);Ve.exceedsLimit=(r,e,t=1,i)=>i===!1||!Ve.isInteger(r)||!Ve.isInteger(e)?!1:(Number(e)-Number(r))/Number(t)>=i;Ve.escapeNode=(r,e=0,t)=>{let i=r.nodes[e];i&&(t&&i.type===t||i.type==="open"||i.type==="close")&&i.escaped!==!0&&(i.value="\\"+i.value,i.escaped=!0)};Ve.encloseBrace=r=>r.type!=="brace"||r.commas>>0+r.ranges>>0?!1:(r.invalid=!0,!0);Ve.isInvalidBrace=r=>r.type!=="brace"?!1:r.invalid===!0||r.dollar?!0:!(r.commas>>0+r.ranges>>0)||r.open!==!0||r.close!==!0?(r.invalid=!0,!0):!1;Ve.isOpenOrClose=r=>r.type==="open"||r.type==="close"?!0:r.open===!0||r.close===!0;Ve.reduce=r=>r.reduce((e,t)=>(t.type==="text"&&e.push(t.value),t.type==="range"&&(t.type="text"),e),[]);Ve.flatten=(...r)=>{let e=[],t=i=>{for(let a=0;a<i.length;a++){let c=i[a];Array.isArray(c)?t(c,e):c!==void 0&&e.push(c)}return e};return t(r),e}});var an=x((rv,nu)=>{"use strict";var ru=on();nu.exports=(r,e={})=>{let t=(i,a={})=>{let c=e.escapeInvalid&&ru.isInvalidBrace(a),d=i.invalid===!0&&e.escapeInvalid===!0,p="";if(i.value)return(c||d)&&ru.isOpenOrClose(i)?"\\"+i.value:i.value;if(i.value)return i.value;if(i.nodes)for(let v of i.nodes)p+=t(v);return p};return t(r)}});var iu=x((nv,su)=>{"use strict";su.exports=function(r){return typeof r=="number"?r-r===0:typeof r=="string"&&r.trim()!==""?Number.isFinite?Number.isFinite(+r):isFinite(+r):!1}});var _u=x((sv,hu)=>{"use strict";var ou=iu(),Ct=(r,e,t)=>{if(ou(r)===!1)throw new TypeError("toRegexRange: expected the first argument to be a number");if(e===void 0||r===e)return String(r);if(ou(e)===!1)throw new TypeError("toRegexRange: expected the second argument to be a number.");let i={relaxZeros:!0,...t};typeof i.strictZeros=="boolean"&&(i.relaxZeros=i.strictZeros===!1);let a=String(i.relaxZeros),c=String(i.shorthand),d=String(i.capture),p=String(i.wrap),v=r+":"+e+"="+a+c+d+p;if(Ct.cache.hasOwnProperty(v))return Ct.cache[v].result;let b=Math.min(r,e),y=Math.max(r,e);if(Math.abs(b-y)===1){let A=r+"|"+e;return i.capture?`(${A})`:i.wrap===!1?A:`(?:${A})`}let E=du(r)||du(e),S={min:r,max:e,a:b,b:y},G=[],P=[];if(E&&(S.isPadded=E,S.maxLen=String(S.max).length),b<0){let A=y<0?Math.abs(y):1;P=au(A,Math.abs(b),S,i),b=S.a=0}return y>=0&&(G=au(b,y,S,i)),S.negatives=P,S.positives=G,S.result=Tp(P,G,i),i.capture===!0?S.result=`(${S.result})`:i.wrap!==!1&&G.length+P.length>1&&(S.result=`(?:${S.result})`),Ct.cache[v]=S,S.result};function Tp(r,e,t){let i=ks(r,e,"-",!1,t)||[],a=ks(e,r,"",!1,t)||[],c=ks(r,e,"-?",!0,t)||[];return i.concat(c).concat(a).join("|")}function Ap(r,e){let t=1,i=1,a=cu(r,t),c=new Set([e]);for(;r<=a&&a<=e;)c.add(a),t+=1,a=cu(r,t);for(a=lu(e+1,i)-1;r<a&&a<=e;)c.add(a),i+=1,a=lu(e+1,i)-1;return c=[...c],c.sort(xp),c}function Pp(r,e,t){if(r===e)return{pattern:r,count:[],digits:0};let i=Dp(r,e),a=i.length,c="",d=0;for(let p=0;p<a;p++){let[v,b]=i[p];v===b?c+=v:v!=="0"||b!=="9"?c+=Cp(v,b,t):d++}return d&&(c+=t.shorthand===!0?"\\d":"[0-9]"),{pattern:c,count:[d],digits:a}}function au(r,e,t,i){let a=Ap(r,e),c=[],d=r,p;for(let v=0;v<a.length;v++){let b=a[v],y=Pp(String(d),String(b),i),E="";if(!t.isPadded&&p&&p.pattern===y.pattern){p.count.length>1&&p.count.pop(),p.count.push(y.count[0]),p.string=p.pattern+fu(p.count),d=b+1;continue}t.isPadded&&(E=Op(b,t,i)),y.string=E+y.pattern+fu(y.count),c.push(y),d=b+1,p=y}return c}function ks(r,e,t,i,a){let c=[];for(let d of r){let{string:p}=d;!i&&!uu(e,"string",p)&&c.push(t+p),i&&uu(e,"string",p)&&c.push(t+p)}return c}function Dp(r,e){let t=[];for(let i=0;i<r.length;i++)t.push([r[i],e[i]]);return t}function xp(r,e){return r>e?1:e>r?-1:0}function uu(r,e,t){return r.some(i=>i[e]===t)}function cu(r,e){return Number(String(r).slice(0,-e)+"9".repeat(e))}function lu(r,e){return r-r%Math.pow(10,e)}function fu(r){let[e=0,t=""]=r;return t||e>1?`{${e+(t?","+t:"")}}`:""}function Cp(r,e,t){return`[${r}${e-r===1?"":"-"}${e}]`}function du(r){return/^-?(0+)\d/.test(r)}function Op(r,e,t){if(!e.isPadded)return r;let i=Math.abs(e.maxLen-String(r).length),a=t.relaxZeros!==!1;switch(i){case 0:return"";case 1:return a?"0?":"0";case 2:return a?"0{0,2}":"00";default:return a?`0{0,${i}}`:`0{${i}}`}}Ct.cache={};Ct.clearCache=()=>Ct.cache={};hu.exports=Ct});var As=x((iv,Su)=>{"use strict";var Fp=require("util"),gu=_u(),pu=r=>r!==null&&typeof r=="object"&&!Array.isArray(r),Mp=r=>e=>r===!0?Number(e):String(e),Rs=r=>typeof r=="number"||typeof r=="string"&&r!=="",_r=r=>Number.isInteger(+r),Ts=r=>{let e=`${r}`,t=-1;if(e[0]==="-"&&(e=e.slice(1)),e==="0")return!1;for(;e[++t]==="0";);return t>0},Ip=(r,e,t)=>typeof r=="string"||typeof e=="string"?!0:t.stringify===!0,Lp=(r,e,t)=>{if(e>0){let i=r[0]==="-"?"-":"";i&&(r=r.slice(1)),r=i+r.padStart(i?e-1:e,"0")}return t===!1?String(r):r},mu=(r,e)=>{let t=r[0]==="-"?"-":"";for(t&&(r=r.slice(1),e--);r.length<e;)r="0"+r;return t?"-"+r:r},Np=(r,e)=>{r.negatives.sort((d,p)=>d<p?-1:d>p?1:0),r.positives.sort((d,p)=>d<p?-1:d>p?1:0);let t=e.capture?"":"?:",i="",a="",c;return r.positives.length&&(i=r.positives.join("|")),r.negatives.length&&(a=`-(${t}${r.negatives.join("|")})`),i&&a?c=`${i}|${a}`:c=i||a,e.wrap?`(${t}${c})`:c},yu=(r,e,t,i)=>{if(t)return gu(r,e,{wrap:!1,...i});let a=String.fromCharCode(r);if(r===e)return a;let c=String.fromCharCode(e);return`[${a}-${c}]`},bu=(r,e,t)=>{if(Array.isArray(r)){let i=t.wrap===!0,a=t.capture?"":"?:";return i?`(${a}${r.join("|")})`:r.join("|")}return gu(r,e,t)},vu=(...r)=>new RangeError("Invalid range arguments: "+Fp.inspect(...r)),Eu=(r,e,t)=>{if(t.strictRanges===!0)throw vu([r,e]);return[]},Bp=(r,e)=>{if(e.strictRanges===!0)throw new TypeError(`Expected step "${r}" to be a number`);return[]},Up=(r,e,t=1,i={})=>{let a=Number(r),c=Number(e);if(!Number.isInteger(a)||!Number.isInteger(c)){if(i.strictRanges===!0)throw vu([r,e]);return[]}a===0&&(a=0),c===0&&(c=0);let d=a>c,p=String(r),v=String(e),b=String(t);t=Math.max(Math.abs(t),1);let y=Ts(p)||Ts(v)||Ts(b),E=y?Math.max(p.length,v.length,b.length):0,S=y===!1&&Ip(r,e,i)===!1,G=i.transform||Mp(S);if(i.toRegex&&t===1)return yu(mu(r,E),mu(e,E),!0,i);let P={negatives:[],positives:[]},A=se=>P[se<0?"negatives":"positives"].push(Math.abs(se)),N=[],V=0;for(;d?a>=c:a<=c;)i.toRegex===!0&&t>1?A(a):N.push(Lp(G(a,V),E,S)),a=d?a-t:a+t,V++;return i.toRegex===!0?t>1?Np(P,i):bu(N,null,{wrap:!1,...i}):N},Hp=(r,e,t=1,i={})=>{if(!_r(r)&&r.length>1||!_r(e)&&e.length>1)return Eu(r,e,i);let a=i.transform||(S=>String.fromCharCode(S)),c=`${r}`.charCodeAt(0),d=`${e}`.charCodeAt(0),p=c>d,v=Math.min(c,d),b=Math.max(c,d);if(i.toRegex&&t===1)return yu(v,b,!1,i);let y=[],E=0;for(;p?c>=d:c<=d;)y.push(a(c,E)),c=p?c-t:c+t,E++;return i.toRegex===!0?bu(y,null,{wrap:!1,options:i}):y},un=(r,e,t,i={})=>{if(e==null&&Rs(r))return[r];if(!Rs(r)||!Rs(e))return Eu(r,e,i);if(typeof t=="function")return un(r,e,1,{transform:t});if(pu(t))return un(r,e,0,t);let a={...i};return a.capture===!0&&(a.wrap=!0),t=t||a.step||1,_r(t)?_r(r)&&_r(e)?Up(r,e,t,a):Hp(r,e,Math.max(Math.abs(t),1),a):t!=null&&!pu(t)?Bp(t,a):un(r,e,1,t)};Su.exports=un});var Ru=x((ov,ku)=>{"use strict";var $p=As(),wu=on(),qp=(r,e={})=>{let t=(i,a={})=>{let c=wu.isInvalidBrace(a),d=i.invalid===!0&&e.escapeInvalid===!0,p=c===!0||d===!0,v=e.escapeInvalid===!0?"\\":"",b="";if(i.isOpen===!0||i.isClose===!0)return v+i.value;if(i.type==="open")return p?v+i.value:"(";if(i.type==="close")return p?v+i.value:")";if(i.type==="comma")return i.prev.type==="comma"?"":p?i.value:"|";if(i.value)return i.value;if(i.nodes&&i.ranges>0){let y=wu.reduce(i.nodes),E=$p(...y,{...e,wrap:!1,toRegex:!0});if(E.length!==0)return y.length>1&&E.length>1?`(${E})`:E}if(i.nodes)for(let y of i.nodes)b+=t(y,i);return b};return t(r)};ku.exports=qp});var Pu=x((av,Au)=>{"use strict";var Wp=As(),Tu=an(),Vt=on(),Ot=(r="",e="",t=!1)=>{let i=[];if(r=[].concat(r),e=[].concat(e),!e.length)return r;if(!r.length)return t?Vt.flatten(e).map(a=>`{${a}}`):e;for(let a of r)if(Array.isArray(a))for(let c of a)i.push(Ot(c,e,t));else for(let c of e)t===!0&&typeof c=="string"&&(c=`{${c}}`),i.push(Array.isArray(c)?Ot(a,c,t):a+c);return Vt.flatten(i)},jp=(r,e={})=>{let t=e.rangeLimit===void 0?1e3:e.rangeLimit,i=(a,c={})=>{a.queue=[];let d=c,p=c.queue;for(;d.type!=="brace"&&d.type!=="root"&&d.parent;)d=d.parent,p=d.queue;if(a.invalid||a.dollar){p.push(Ot(p.pop(),Tu(a,e)));return}if(a.type==="brace"&&a.invalid!==!0&&a.nodes.length===2){p.push(Ot(p.pop(),["{}"]));return}if(a.nodes&&a.ranges>0){let E=Vt.reduce(a.nodes);if(Vt.exceedsLimit(...E,e.step,t))throw new RangeError("expanded array length exceeds range limit. Use options.rangeLimit to increase or disable the limit.");let S=Wp(...E,e);S.length===0&&(S=Tu(a,e)),p.push(Ot(p.pop(),S)),a.nodes=[];return}let v=Vt.encloseBrace(a),b=a.queue,y=a;for(;y.type!=="brace"&&y.type!=="root"&&y.parent;)y=y.parent,b=y.queue;for(let E=0;E<a.nodes.length;E++){let S=a.nodes[E];if(S.type==="comma"&&a.type==="brace"){E===1&&b.push(""),b.push("");continue}if(S.type==="close"){p.push(Ot(p.pop(),b,v));continue}if(S.value&&S.type!=="open"){b.push(Ot(b.pop(),S.value));continue}S.nodes&&i(S,a)}return b};return Vt.flatten(i(r))};Au.exports=jp});var xu=x((uv,Du)=>{"use strict";Du.exports={MAX_LENGTH:1024*64,CHAR_0:"0",CHAR_9:"9",CHAR_UPPERCASE_A:"A",CHAR_LOWERCASE_A:"a",CHAR_UPPERCASE_Z:"Z",CHAR_LOWERCASE_Z:"z",CHAR_LEFT_PARENTHESES:"(",CHAR_RIGHT_PARENTHESES:")",CHAR_ASTERISK:"*",CHAR_AMPERSAND:"&",CHAR_AT:"@",CHAR_BACKSLASH:"\\",CHAR_BACKTICK:"`",CHAR_CARRIAGE_RETURN:"\r",CHAR_CIRCUMFLEX_ACCENT:"^",CHAR_COLON:":",CHAR_COMMA:",",CHAR_DOLLAR:"$",CHAR_DOT:".",CHAR_DOUBLE_QUOTE:'"',CHAR_EQUAL:"=",CHAR_EXCLAMATION_MARK:"!",CHAR_FORM_FEED:"\f",CHAR_FORWARD_SLASH:"/",CHAR_HASH:"#",CHAR_HYPHEN_MINUS:"-",CHAR_LEFT_ANGLE_BRACKET:"<",CHAR_LEFT_CURLY_BRACE:"{",CHAR_LEFT_SQUARE_BRACKET:"[",CHAR_LINE_FEED:`
`,CHAR_NO_BREAK_SPACE:"\xA0",CHAR_PERCENT:"%",CHAR_PLUS:"+",CHAR_QUESTION_MARK:"?",CHAR_RIGHT_ANGLE_BRACKET:">",CHAR_RIGHT_CURLY_BRACE:"}",CHAR_RIGHT_SQUARE_BRACKET:"]",CHAR_SEMICOLON:";",CHAR_SINGLE_QUOTE:"'",CHAR_SPACE:" ",CHAR_TAB:"	",CHAR_UNDERSCORE:"_",CHAR_VERTICAL_LINE:"|",CHAR_ZERO_WIDTH_NOBREAK_SPACE:"\uFEFF"}});var Iu=x((cv,Mu)=>{"use strict";var Gp=an(),{MAX_LENGTH:Cu,CHAR_BACKSLASH:Ps,CHAR_BACKTICK:Vp,CHAR_COMMA:zp,CHAR_DOT:Kp,CHAR_LEFT_PARENTHESES:Yp,CHAR_RIGHT_PARENTHESES:Xp,CHAR_LEFT_CURLY_BRACE:Qp,CHAR_RIGHT_CURLY_BRACE:Jp,CHAR_LEFT_SQUARE_BRACKET:Ou,CHAR_RIGHT_SQUARE_BRACKET:Fu,CHAR_DOUBLE_QUOTE:Zp,CHAR_SINGLE_QUOTE:em,CHAR_NO_BREAK_SPACE:tm,CHAR_ZERO_WIDTH_NOBREAK_SPACE:rm}=xu(),nm=(r,e={})=>{if(typeof r!="string")throw new TypeError("Expected a string");let t=e||{},i=typeof t.maxLength=="number"?Math.min(Cu,t.maxLength):Cu;if(r.length>i)throw new SyntaxError(`Input length (${r.length}), exceeds max characters (${i})`);let a={type:"root",input:r,nodes:[]},c=[a],d=a,p=a,v=0,b=r.length,y=0,E=0,S,G={},P=()=>r[y++],A=N=>{if(N.type==="text"&&p.type==="dot"&&(p.type="text"),p&&p.type==="text"&&N.type==="text"){p.value+=N.value;return}return d.nodes.push(N),N.parent=d,N.prev=p,p=N,N};for(A({type:"bos"});y<b;)if(d=c[c.length-1],S=P(),!(S===rm||S===tm)){if(S===Ps){A({type:"text",value:(e.keepEscaping?S:"")+P()});continue}if(S===Fu){A({type:"text",value:"\\"+S});continue}if(S===Ou){v++;let N=!0,V;for(;y<b&&(V=P());){if(S+=V,V===Ou){v++;continue}if(V===Ps){S+=P();continue}if(V===Fu&&(v--,v===0))break}A({type:"text",value:S});continue}if(S===Yp){d=A({type:"paren",nodes:[]}),c.push(d),A({type:"text",value:S});continue}if(S===Xp){if(d.type!=="paren"){A({type:"text",value:S});continue}d=c.pop(),A({type:"text",value:S}),d=c[c.length-1];continue}if(S===Zp||S===em||S===Vp){let N=S,V;for(e.keepQuotes!==!0&&(S="");y<b&&(V=P());){if(V===Ps){S+=V+P();continue}if(V===N){e.keepQuotes===!0&&(S+=V);break}S+=V}A({type:"text",value:S});continue}if(S===Qp){E++;let V={type:"brace",open:!0,close:!1,dollar:p.value&&p.value.slice(-1)==="$"||d.dollar===!0,depth:E,commas:0,ranges:0,nodes:[]};d=A(V),c.push(d),A({type:"open",value:S});continue}if(S===Jp){if(d.type!=="brace"){A({type:"text",value:S});continue}let N="close";d=c.pop(),d.close=!0,A({type:N,value:S}),E--,d=c[c.length-1];continue}if(S===zp&&E>0){if(d.ranges>0){d.ranges=0;let N=d.nodes.shift();d.nodes=[N,{type:"text",value:Gp(d)}]}A({type:"comma",value:S}),d.commas++;continue}if(S===Kp&&E>0&&d.commas===0){let N=d.nodes;if(E===0||N.length===0){A({type:"text",value:S});continue}if(p.type==="dot"){if(d.range=[],p.value+=S,p.type="range",d.nodes.length!==3&&d.nodes.length!==5){d.invalid=!0,d.ranges=0,p.type="text";continue}d.ranges++,d.args=[];continue}if(p.type==="range"){N.pop();let V=N[N.length-1];V.value+=p.value+S,p=V,d.ranges--;continue}A({type:"dot",value:S});continue}A({type:"text",value:S})}do if(d=c.pop(),d.type!=="root"){d.nodes.forEach(se=>{se.nodes||(se.type==="open"&&(se.isOpen=!0),se.type==="close"&&(se.isClose=!0),se.nodes||(se.type="text"),se.invalid=!0)});let N=c[c.length-1],V=N.nodes.indexOf(d);N.nodes.splice(V,1,...d.nodes)}while(c.length>0);return A({type:"eos"}),a};Mu.exports=nm});var Bu=x((lv,Nu)=>{"use strict";var Lu=an(),sm=Ru(),im=Pu(),om=Iu(),qe=(r,e={})=>{let t=[];if(Array.isArray(r))for(let i of r){let a=qe.create(i,e);Array.isArray(a)?t.push(...a):t.push(a)}else t=[].concat(qe.create(r,e));return e&&e.expand===!0&&e.nodupes===!0&&(t=[...new Set(t)]),t};qe.parse=(r,e={})=>om(r,e);qe.stringify=(r,e={})=>Lu(typeof r=="string"?qe.parse(r,e):r,e);qe.compile=(r,e={})=>(typeof r=="string"&&(r=qe.parse(r,e)),sm(r,e));qe.expand=(r,e={})=>{typeof r=="string"&&(r=qe.parse(r,e));let t=im(r,e);return e.noempty===!0&&(t=t.filter(Boolean)),e.nodupes===!0&&(t=[...new Set(t)]),t};qe.create=(r,e={})=>r===""||r.length<3?[r]:e.expand!==!0?qe.compile(r,e):qe.expand(r,e);Nu.exports=qe});var pr=x((fv,Wu)=>{"use strict";var am=require("path"),rt="\\\\/",Uu=`[^${rt}]`,ft="\\.",um="\\+",cm="\\?",cn="\\/",lm="(?=.)",Hu="[^/]",Ds=`(?:${cn}|$)`,$u=`(?:^|${cn})`,xs=`${ft}{1,2}${Ds}`,fm=`(?!${ft})`,dm=`(?!${$u}${xs})`,hm=`(?!${ft}{0,1}${Ds})`,_m=`(?!${xs})`,pm=`[^.${cn}]`,mm=`${Hu}*?`,qu={DOT_LITERAL:ft,PLUS_LITERAL:um,QMARK_LITERAL:cm,SLASH_LITERAL:cn,ONE_CHAR:lm,QMARK:Hu,END_ANCHOR:Ds,DOTS_SLASH:xs,NO_DOT:fm,NO_DOTS:dm,NO_DOT_SLASH:hm,NO_DOTS_SLASH:_m,QMARK_NO_DOT:pm,STAR:mm,START_ANCHOR:$u},gm={...qu,SLASH_LITERAL:`[${rt}]`,QMARK:Uu,STAR:`${Uu}*?`,DOTS_SLASH:`${ft}{1,2}(?:[${rt}]|$)`,NO_DOT:`(?!${ft})`,NO_DOTS:`(?!(?:^|[${rt}])${ft}{1,2}(?:[${rt}]|$))`,NO_DOT_SLASH:`(?!${ft}{0,1}(?:[${rt}]|$))`,NO_DOTS_SLASH:`(?!${ft}{1,2}(?:[${rt}]|$))`,QMARK_NO_DOT:`[^.${rt}]`,START_ANCHOR:`(?:^|[${rt}])`,END_ANCHOR:`(?:[${rt}]|$)`},ym={alnum:"a-zA-Z0-9",alpha:"a-zA-Z",ascii:"\\x00-\\x7F",blank:" \\t",cntrl:"\\x00-\\x1F\\x7F",digit:"0-9",graph:"\\x21-\\x7E",lower:"a-z",print:"\\x20-\\x7E ",punct:"\\-!\"#$%&'()\\*+,./:;<=>?@[\\]^_`{|}~",space:" \\t\\r\\n\\v\\f",upper:"A-Z",word:"A-Za-z0-9_",xdigit:"A-Fa-f0-9"};Wu.exports={MAX_LENGTH:1024*64,POSIX_REGEX_SOURCE:ym,REGEX_BACKSLASH:/\\(?![*+?^${}(|)[\]])/g,REGEX_NON_SPECIAL_CHARS:/^[^@![\].,$*+?^{}()|\\/]+/,REGEX_SPECIAL_CHARS:/[-*+?.^${}(|)[\]]/,REGEX_SPECIAL_CHARS_BACKREF:/(\\?)((\W)(\3*))/g,REGEX_SPECIAL_CHARS_GLOBAL:/([-*+?.^${}(|)[\]])/g,REGEX_REMOVE_BACKSLASH:/(?:\[.*?[^\\]\]|\\(?=.))/g,REPLACEMENTS:{"***":"*","**/**":"**","**/**/**":"**"},CHAR_0:48,CHAR_9:57,CHAR_UPPERCASE_A:65,CHAR_LOWERCASE_A:97,CHAR_UPPERCASE_Z:90,CHAR_LOWERCASE_Z:122,CHAR_LEFT_PARENTHESES:40,CHAR_RIGHT_PARENTHESES:41,CHAR_ASTERISK:42,CHAR_AMPERSAND:38,CHAR_AT:64,CHAR_BACKWARD_SLASH:92,CHAR_CARRIAGE_RETURN:13,CHAR_CIRCUMFLEX_ACCENT:94,CHAR_COLON:58,CHAR_COMMA:44,CHAR_DOT:46,CHAR_DOUBLE_QUOTE:34,CHAR_EQUAL:61,CHAR_EXCLAMATION_MARK:33,CHAR_FORM_FEED:12,CHAR_FORWARD_SLASH:47,CHAR_GRAVE_ACCENT:96,CHAR_HASH:35,CHAR_HYPHEN_MINUS:45,CHAR_LEFT_ANGLE_BRACKET:60,CHAR_LEFT_CURLY_BRACE:123,CHAR_LEFT_SQUARE_BRACKET:91,CHAR_LINE_FEED:10,CHAR_NO_BREAK_SPACE:160,CHAR_PERCENT:37,CHAR_PLUS:43,CHAR_QUESTION_MARK:63,CHAR_RIGHT_ANGLE_BRACKET:62,CHAR_RIGHT_CURLY_BRACE:125,CHAR_RIGHT_SQUARE_BRACKET:93,CHAR_SEMICOLON:59,CHAR_SINGLE_QUOTE:39,CHAR_SPACE:32,CHAR_TAB:9,CHAR_UNDERSCORE:95,CHAR_VERTICAL_LINE:124,CHAR_ZERO_WIDTH_NOBREAK_SPACE:65279,SEP:am.sep,extglobChars(r){return{"!":{type:"negate",open:"(?:(?!(?:",close:`))${r.STAR})`},"?":{type:"qmark",open:"(?:",close:")?"},"+":{type:"plus",open:"(?:",close:")+"},"*":{type:"star",open:"(?:",close:")*"},"@":{type:"at",open:"(?:",close:")"}}},globChars(r){return r===!0?gm:qu}}});var mr=x(Ue=>{"use strict";var bm=require("path"),vm=process.platform==="win32",{REGEX_BACKSLASH:Em,REGEX_REMOVE_BACKSLASH:Sm,REGEX_SPECIAL_CHARS:wm,REGEX_SPECIAL_CHARS_GLOBAL:km}=pr();Ue.isObject=r=>r!==null&&typeof r=="object"&&!Array.isArray(r);Ue.hasRegexChars=r=>wm.test(r);Ue.isRegexChar=r=>r.length===1&&Ue.hasRegexChars(r);Ue.escapeRegex=r=>r.replace(km,"\\$1");Ue.toPosixSlashes=r=>r.replace(Em,"/");Ue.removeBackslashes=r=>r.replace(Sm,e=>e==="\\"?"":e);Ue.supportsLookbehinds=()=>{let r=process.version.slice(1).split(".").map(Number);return r.length===3&&r[0]>=9||r[0]===8&&r[1]>=10};Ue.isWindows=r=>r&&typeof r.windows=="boolean"?r.windows:vm===!0||bm.sep==="\\";Ue.escapeLast=(r,e,t)=>{let i=r.lastIndexOf(e,t);return i===-1?r:r[i-1]==="\\"?Ue.escapeLast(r,e,i-1):`${r.slice(0,i)}\\${r.slice(i)}`};Ue.removePrefix=(r,e={})=>{let t=r;return t.startsWith("./")&&(t=t.slice(2),e.prefix="./"),t};Ue.wrapOutput=(r,e={},t={})=>{let i=t.contains?"":"^",a=t.contains?"":"$",c=`${i}(?:${r})${a}`;return e.negated===!0&&(c=`(?:^(?!${c}).*$)`),c}});var Qu=x((hv,Xu)=>{"use strict";var ju=mr(),{CHAR_ASTERISK:Cs,CHAR_AT:Rm,CHAR_BACKWARD_SLASH:gr,CHAR_COMMA:Tm,CHAR_DOT:Os,CHAR_EXCLAMATION_MARK:Fs,CHAR_FORWARD_SLASH:Yu,CHAR_LEFT_CURLY_BRACE:Ms,CHAR_LEFT_PARENTHESES:Is,CHAR_LEFT_SQUARE_BRACKET:Am,CHAR_PLUS:Pm,CHAR_QUESTION_MARK:Gu,CHAR_RIGHT_CURLY_BRACE:Dm,CHAR_RIGHT_PARENTHESES:Vu,CHAR_RIGHT_SQUARE_BRACKET:xm}=pr(),zu=r=>r===Yu||r===gr,Ku=r=>{r.isPrefix!==!0&&(r.depth=r.isGlobstar?1/0:1)},Cm=(r,e)=>{let t=e||{},i=r.length-1,a=t.parts===!0||t.scanToEnd===!0,c=[],d=[],p=[],v=r,b=-1,y=0,E=0,S=!1,G=!1,P=!1,A=!1,N=!1,V=!1,se=!1,te=!1,me=!1,O=!1,oe=0,X,$,L={value:"",depth:0,isGlob:!1},ae=()=>b>=i,R=()=>v.charCodeAt(b+1),W=()=>(X=$,v.charCodeAt(++b));for(;b<i;){$=W();let j;if($===gr){se=L.backslashes=!0,$=W(),$===Ms&&(V=!0);continue}if(V===!0||$===Ms){for(oe++;ae()!==!0&&($=W());){if($===gr){se=L.backslashes=!0,W();continue}if($===Ms){oe++;continue}if(V!==!0&&$===Os&&($=W())===Os){if(S=L.isBrace=!0,P=L.isGlob=!0,O=!0,a===!0)continue;break}if(V!==!0&&$===Tm){if(S=L.isBrace=!0,P=L.isGlob=!0,O=!0,a===!0)continue;break}if($===Dm&&(oe--,oe===0)){V=!1,S=L.isBrace=!0,O=!0;break}}if(a===!0)continue;break}if($===Yu){if(c.push(b),d.push(L),L={value:"",depth:0,isGlob:!1},O===!0)continue;if(X===Os&&b===y+1){y+=2;continue}E=b+1;continue}if(t.noext!==!0&&($===Pm||$===Rm||$===Cs||$===Gu||$===Fs)===!0&&R()===Is){if(P=L.isGlob=!0,A=L.isExtglob=!0,O=!0,$===Fs&&b===y&&(me=!0),a===!0){for(;ae()!==!0&&($=W());){if($===gr){se=L.backslashes=!0,$=W();continue}if($===Vu){P=L.isGlob=!0,O=!0;break}}continue}break}if($===Cs){if(X===Cs&&(N=L.isGlobstar=!0),P=L.isGlob=!0,O=!0,a===!0)continue;break}if($===Gu){if(P=L.isGlob=!0,O=!0,a===!0)continue;break}if($===Am){for(;ae()!==!0&&(j=W());){if(j===gr){se=L.backslashes=!0,W();continue}if(j===xm){G=L.isBracket=!0,P=L.isGlob=!0,O=!0;break}}if(a===!0)continue;break}if(t.nonegate!==!0&&$===Fs&&b===y){te=L.negated=!0,y++;continue}if(t.noparen!==!0&&$===Is){if(P=L.isGlob=!0,a===!0){for(;ae()!==!0&&($=W());){if($===Is){se=L.backslashes=!0,$=W();continue}if($===Vu){O=!0;break}}continue}break}if(P===!0){if(O=!0,a===!0)continue;break}}t.noext===!0&&(A=!1,P=!1);let z=v,le="",w="";y>0&&(le=v.slice(0,y),v=v.slice(y),E-=y),z&&P===!0&&E>0?(z=v.slice(0,E),w=v.slice(E)):P===!0?(z="",w=v):z=v,z&&z!==""&&z!=="/"&&z!==v&&zu(z.charCodeAt(z.length-1))&&(z=z.slice(0,-1)),t.unescape===!0&&(w&&(w=ju.removeBackslashes(w)),z&&se===!0&&(z=ju.removeBackslashes(z)));let g={prefix:le,input:r,start:y,base:z,glob:w,isBrace:S,isBracket:G,isGlob:P,isExtglob:A,isGlobstar:N,negated:te,negatedExtglob:me};if(t.tokens===!0&&(g.maxDepth=0,zu($)||d.push(L),g.tokens=d),t.parts===!0||t.tokens===!0){let j;for(let ue=0;ue<c.length;ue++){let je=j?j+1:y,He=c[ue],Be=r.slice(je,He);t.tokens&&(ue===0&&y!==0?(d[ue].isPrefix=!0,d[ue].value=le):d[ue].value=Be,Ku(d[ue]),g.maxDepth+=d[ue].depth),(ue!==0||Be!=="")&&p.push(Be),j=He}if(j&&j+1<r.length){let ue=r.slice(j+1);p.push(ue),t.tokens&&(d[d.length-1].value=ue,Ku(d[d.length-1]),g.maxDepth+=d[d.length-1].depth)}g.slashes=c,g.parts=p}return g};Xu.exports=Cm});var tc=x((_v,ec)=>{"use strict";var ln=pr(),We=mr(),{MAX_LENGTH:fn,POSIX_REGEX_SOURCE:Om,REGEX_NON_SPECIAL_CHARS:Fm,REGEX_SPECIAL_CHARS_BACKREF:Mm,REPLACEMENTS:Ju}=ln,Im=(r,e)=>{if(typeof e.expandRange=="function")return e.expandRange(...r,e);r.sort();let t=`[${r.join("-")}]`;try{new RegExp(t)}catch{return r.map(a=>We.escapeRegex(a)).join("..")}return t},zt=(r,e)=>`Missing ${r}: "${e}" - use "\\\\${e}" to match literal characters`,Zu=(r,e)=>{if(typeof r!="string")throw new TypeError("Expected a string");r=Ju[r]||r;let t={...e},i=typeof t.maxLength=="number"?Math.min(fn,t.maxLength):fn,a=r.length;if(a>i)throw new SyntaxError(`Input length: ${a}, exceeds maximum allowed length: ${i}`);let c={type:"bos",value:"",output:t.prepend||""},d=[c],p=t.capture?"":"?:",v=We.isWindows(e),b=ln.globChars(v),y=ln.extglobChars(b),{DOT_LITERAL:E,PLUS_LITERAL:S,SLASH_LITERAL:G,ONE_CHAR:P,DOTS_SLASH:A,NO_DOT:N,NO_DOT_SLASH:V,NO_DOTS_SLASH:se,QMARK:te,QMARK_NO_DOT:me,STAR:O,START_ANCHOR:oe}=b,X=F=>`(${p}(?:(?!${oe}${F.dot?A:E}).)*?)`,$=t.dot?"":N,L=t.dot?te:me,ae=t.bash===!0?X(t):O;t.capture&&(ae=`(${ae})`),typeof t.noext=="boolean"&&(t.noextglob=t.noext);let R={input:r,index:-1,start:0,dot:t.dot===!0,consumed:"",output:"",prefix:"",backtrack:!1,negated:!1,brackets:0,braces:0,parens:0,quotes:0,globstar:!1,tokens:d};r=We.removePrefix(r,R),a=r.length;let W=[],z=[],le=[],w=c,g,j=()=>R.index===a-1,ue=R.peek=(F=1)=>r[R.index+F],je=R.advance=()=>r[++R.index]||"",He=()=>r.slice(R.index+1),Be=(F="",ge=0)=>{R.consumed+=F,R.index+=ge},kt=F=>{R.output+=F.output!=null?F.output:F.value,Be(F.value)},br=()=>{let F=1;for(;ue()==="!"&&(ue(2)!=="("||ue(3)==="?");)je(),R.start++,F++;return F%2===0?!1:(R.negated=!0,R.start++,!0)},It=F=>{R[F]++,le.push(F)},Ze=F=>{R[F]--,le.pop()},re=F=>{if(w.type==="globstar"){let ge=R.braces>0&&(F.type==="comma"||F.type==="brace"),C=F.extglob===!0||W.length&&(F.type==="pipe"||F.type==="paren");F.type!=="slash"&&F.type!=="paren"&&!ge&&!C&&(R.output=R.output.slice(0,-w.output.length),w.type="star",w.value="*",w.output=ae,R.output+=w.output)}if(W.length&&F.type!=="paren"&&(W[W.length-1].inner+=F.value),(F.value||F.output)&&kt(F),w&&w.type==="text"&&F.type==="text"){w.value+=F.value,w.output=(w.output||"")+F.value;return}F.prev=w,d.push(F),w=F},Lt=(F,ge)=>{let C={...y[ge],conditions:1,inner:""};C.prev=w,C.parens=R.parens,C.output=R.output;let Z=(t.capture?"(":"")+C.open;It("parens"),re({type:F,value:ge,output:R.output?"":P}),re({type:"paren",extglob:!0,value:je(),output:Z}),W.push(C)},On=F=>{let ge=F.close+(t.capture?")":""),C;if(F.type==="negate"){let Z=ae;F.inner&&F.inner.length>1&&F.inner.includes("/")&&(Z=X(t)),(Z!==ae||j()||/^\)+$/.test(He()))&&(ge=F.close=`)$))${Z}`),F.inner.includes("*")&&(C=He())&&/^\.[^\\/.]+$/.test(C)&&(ge=F.close=`)${C})${Z})`),F.prev.type==="bos"&&(R.negatedExtglob=!0)}re({type:"paren",extglob:!0,value:g,output:ge}),Ze("parens")};if(t.fastpaths!==!1&&!/(^[*!]|[/()[\]{}"])/.test(r)){let F=!1,ge=r.replace(Mm,(C,Z,we,Fe,Te,Ye)=>Fe==="\\"?(F=!0,C):Fe==="?"?Z?Z+Fe+(Te?te.repeat(Te.length):""):Ye===0?L+(Te?te.repeat(Te.length):""):te.repeat(we.length):Fe==="."?E.repeat(we.length):Fe==="*"?Z?Z+Fe+(Te?ae:""):ae:Z?C:`\\${C}`);return F===!0&&(t.unescape===!0?ge=ge.replace(/\\/g,""):ge=ge.replace(/\\+/g,C=>C.length%2===0?"\\\\":C?"\\":"")),ge===r&&t.contains===!0?(R.output=r,R):(R.output=We.wrapOutput(ge,R,e),R)}for(;!j();){if(g=je(),g==="\0")continue;if(g==="\\"){let C=ue();if(C==="/"&&t.bash!==!0||C==="."||C===";")continue;if(!C){g+="\\",re({type:"text",value:g});continue}let Z=/^\\+/.exec(He()),we=0;if(Z&&Z[0].length>2&&(we=Z[0].length,R.index+=we,we%2!==0&&(g+="\\")),t.unescape===!0?g=je():g+=je(),R.brackets===0){re({type:"text",value:g});continue}}if(R.brackets>0&&(g!=="]"||w.value==="["||w.value==="[^")){if(t.posix!==!1&&g===":"){let C=w.value.slice(1);if(C.includes("[")&&(w.posix=!0,C.includes(":"))){let Z=w.value.lastIndexOf("["),we=w.value.slice(0,Z),Fe=w.value.slice(Z+2),Te=Om[Fe];if(Te){w.value=we+Te,R.backtrack=!0,je(),!c.output&&d.indexOf(w)===1&&(c.output=P);continue}}}(g==="["&&ue()!==":"||g==="-"&&ue()==="]")&&(g=`\\${g}`),g==="]"&&(w.value==="["||w.value==="[^")&&(g=`\\${g}`),t.posix===!0&&g==="!"&&w.value==="["&&(g="^"),w.value+=g,kt({value:g});continue}if(R.quotes===1&&g!=='"'){g=We.escapeRegex(g),w.value+=g,kt({value:g});continue}if(g==='"'){R.quotes=R.quotes===1?0:1,t.keepQuotes===!0&&re({type:"text",value:g});continue}if(g==="("){It("parens"),re({type:"paren",value:g});continue}if(g===")"){if(R.parens===0&&t.strictBrackets===!0)throw new SyntaxError(zt("opening","("));let C=W[W.length-1];if(C&&R.parens===C.parens+1){On(W.pop());continue}re({type:"paren",value:g,output:R.parens?")":"\\)"}),Ze("parens");continue}if(g==="["){if(t.nobracket===!0||!He().includes("]")){if(t.nobracket!==!0&&t.strictBrackets===!0)throw new SyntaxError(zt("closing","]"));g=`\\${g}`}else It("brackets");re({type:"bracket",value:g});continue}if(g==="]"){if(t.nobracket===!0||w&&w.type==="bracket"&&w.value.length===1){re({type:"text",value:g,output:`\\${g}`});continue}if(R.brackets===0){if(t.strictBrackets===!0)throw new SyntaxError(zt("opening","["));re({type:"text",value:g,output:`\\${g}`});continue}Ze("brackets");let C=w.value.slice(1);if(w.posix!==!0&&C[0]==="^"&&!C.includes("/")&&(g=`/${g}`),w.value+=g,kt({value:g}),t.literalBrackets===!1||We.hasRegexChars(C))continue;let Z=We.escapeRegex(w.value);if(R.output=R.output.slice(0,-w.value.length),t.literalBrackets===!0){R.output+=Z,w.value=Z;continue}w.value=`(${p}${Z}|${w.value})`,R.output+=w.value;continue}if(g==="{"&&t.nobrace!==!0){It("braces");let C={type:"brace",value:g,output:"(",outputIndex:R.output.length,tokensIndex:R.tokens.length};z.push(C),re(C);continue}if(g==="}"){let C=z[z.length-1];if(t.nobrace===!0||!C){re({type:"text",value:g,output:g});continue}let Z=")";if(C.dots===!0){let we=d.slice(),Fe=[];for(let Te=we.length-1;Te>=0&&(d.pop(),we[Te].type!=="brace");Te--)we[Te].type!=="dots"&&Fe.unshift(we[Te].value);Z=Im(Fe,t),R.backtrack=!0}if(C.comma!==!0&&C.dots!==!0){let we=R.output.slice(0,C.outputIndex),Fe=R.tokens.slice(C.tokensIndex);C.value=C.output="\\{",g=Z="\\}",R.output=we;for(let Te of Fe)R.output+=Te.output||Te.value}re({type:"brace",value:g,output:Z}),Ze("braces"),z.pop();continue}if(g==="|"){W.length>0&&W[W.length-1].conditions++,re({type:"text",value:g});continue}if(g===","){let C=g,Z=z[z.length-1];Z&&le[le.length-1]==="braces"&&(Z.comma=!0,C="|"),re({type:"comma",value:g,output:C});continue}if(g==="/"){if(w.type==="dot"&&R.index===R.start+1){R.start=R.index+1,R.consumed="",R.output="",d.pop(),w=c;continue}re({type:"slash",value:g,output:G});continue}if(g==="."){if(R.braces>0&&w.type==="dot"){w.value==="."&&(w.output=E);let C=z[z.length-1];w.type="dots",w.output+=g,w.value+=g,C.dots=!0;continue}if(R.braces+R.parens===0&&w.type!=="bos"&&w.type!=="slash"){re({type:"text",value:g,output:E});continue}re({type:"dot",value:g,output:E});continue}if(g==="?"){if(!(w&&w.value==="(")&&t.noextglob!==!0&&ue()==="("&&ue(2)!=="?"){Lt("qmark",g);continue}if(w&&w.type==="paren"){let Z=ue(),we=g;if(Z==="<"&&!We.supportsLookbehinds())throw new Error("Node.js v10 or higher is required for regex lookbehinds");(w.value==="("&&!/[!=<:]/.test(Z)||Z==="<"&&!/<([!=]|\w+>)/.test(He()))&&(we=`\\${g}`),re({type:"text",value:g,output:we});continue}if(t.dot!==!0&&(w.type==="slash"||w.type==="bos")){re({type:"qmark",value:g,output:me});continue}re({type:"qmark",value:g,output:te});continue}if(g==="!"){if(t.noextglob!==!0&&ue()==="("&&(ue(2)!=="?"||!/[!=<:]/.test(ue(3)))){Lt("negate",g);continue}if(t.nonegate!==!0&&R.index===0){br();continue}}if(g==="+"){if(t.noextglob!==!0&&ue()==="("&&ue(2)!=="?"){Lt("plus",g);continue}if(w&&w.value==="("||t.regex===!1){re({type:"plus",value:g,output:S});continue}if(w&&(w.type==="bracket"||w.type==="paren"||w.type==="brace")||R.parens>0){re({type:"plus",value:g});continue}re({type:"plus",value:S});continue}if(g==="@"){if(t.noextglob!==!0&&ue()==="("&&ue(2)!=="?"){re({type:"at",extglob:!0,value:g,output:""});continue}re({type:"text",value:g});continue}if(g!=="*"){(g==="$"||g==="^")&&(g=`\\${g}`);let C=Fm.exec(He());C&&(g+=C[0],R.index+=C[0].length),re({type:"text",value:g});continue}if(w&&(w.type==="globstar"||w.star===!0)){w.type="star",w.star=!0,w.value+=g,w.output=ae,R.backtrack=!0,R.globstar=!0,Be(g);continue}let F=He();if(t.noextglob!==!0&&/^\([^?]/.test(F)){Lt("star",g);continue}if(w.type==="star"){if(t.noglobstar===!0){Be(g);continue}let C=w.prev,Z=C.prev,we=C.type==="slash"||C.type==="bos",Fe=Z&&(Z.type==="star"||Z.type==="globstar");if(t.bash===!0&&(!we||F[0]&&F[0]!=="/")){re({type:"star",value:g,output:""});continue}let Te=R.braces>0&&(C.type==="comma"||C.type==="brace"),Ye=W.length&&(C.type==="pipe"||C.type==="paren");if(!we&&C.type!=="paren"&&!Te&&!Ye){re({type:"star",value:g,output:""});continue}for(;F.slice(0,3)==="/**";){let ht=r[R.index+4];if(ht&&ht!=="/")break;F=F.slice(3),Be("/**",3)}if(C.type==="bos"&&j()){w.type="globstar",w.value+=g,w.output=X(t),R.output=w.output,R.globstar=!0,Be(g);continue}if(C.type==="slash"&&C.prev.type!=="bos"&&!Fe&&j()){R.output=R.output.slice(0,-(C.output+w.output).length),C.output=`(?:${C.output}`,w.type="globstar",w.output=X(t)+(t.strictSlashes?")":"|$)"),w.value+=g,R.globstar=!0,R.output+=C.output+w.output,Be(g);continue}if(C.type==="slash"&&C.prev.type!=="bos"&&F[0]==="/"){let ht=F[1]!==void 0?"|$":"";R.output=R.output.slice(0,-(C.output+w.output).length),C.output=`(?:${C.output}`,w.type="globstar",w.output=`${X(t)}${G}|${G}${ht})`,w.value+=g,R.output+=C.output+w.output,R.globstar=!0,Be(g+je()),re({type:"slash",value:"/",output:""});continue}if(C.type==="bos"&&F[0]==="/"){w.type="globstar",w.value+=g,w.output=`(?:^|${G}|${X(t)}${G})`,R.output=w.output,R.globstar=!0,Be(g+je()),re({type:"slash",value:"/",output:""});continue}R.output=R.output.slice(0,-w.output.length),w.type="globstar",w.output=X(t),w.value+=g,R.output+=w.output,R.globstar=!0,Be(g);continue}let ge={type:"star",value:g,output:ae};if(t.bash===!0){ge.output=".*?",(w.type==="bos"||w.type==="slash")&&(ge.output=$+ge.output),re(ge);continue}if(w&&(w.type==="bracket"||w.type==="paren")&&t.regex===!0){ge.output=g,re(ge);continue}(R.index===R.start||w.type==="slash"||w.type==="dot")&&(w.type==="dot"?(R.output+=V,w.output+=V):t.dot===!0?(R.output+=se,w.output+=se):(R.output+=$,w.output+=$),ue()!=="*"&&(R.output+=P,w.output+=P)),re(ge)}for(;R.brackets>0;){if(t.strictBrackets===!0)throw new SyntaxError(zt("closing","]"));R.output=We.escapeLast(R.output,"["),Ze("brackets")}for(;R.parens>0;){if(t.strictBrackets===!0)throw new SyntaxError(zt("closing",")"));R.output=We.escapeLast(R.output,"("),Ze("parens")}for(;R.braces>0;){if(t.strictBrackets===!0)throw new SyntaxError(zt("closing","}"));R.output=We.escapeLast(R.output,"{"),Ze("braces")}if(t.strictSlashes!==!0&&(w.type==="star"||w.type==="bracket")&&re({type:"maybe_slash",value:"",output:`${G}?`}),R.backtrack===!0){R.output="";for(let F of R.tokens)R.output+=F.output!=null?F.output:F.value,F.suffix&&(R.output+=F.suffix)}return R};Zu.fastpaths=(r,e)=>{let t={...e},i=typeof t.maxLength=="number"?Math.min(fn,t.maxLength):fn,a=r.length;if(a>i)throw new SyntaxError(`Input length: ${a}, exceeds maximum allowed length: ${i}`);r=Ju[r]||r;let c=We.isWindows(e),{DOT_LITERAL:d,SLASH_LITERAL:p,ONE_CHAR:v,DOTS_SLASH:b,NO_DOT:y,NO_DOTS:E,NO_DOTS_SLASH:S,STAR:G,START_ANCHOR:P}=ln.globChars(c),A=t.dot?E:y,N=t.dot?S:y,V=t.capture?"":"?:",se={negated:!1,prefix:""},te=t.bash===!0?".*?":G;t.capture&&(te=`(${te})`);let me=$=>$.noglobstar===!0?te:`(${V}(?:(?!${P}${$.dot?b:d}).)*?)`,O=$=>{switch($){case"*":return`${A}${v}${te}`;case".*":return`${d}${v}${te}`;case"*.*":return`${A}${te}${d}${v}${te}`;case"*/*":return`${A}${te}${p}${v}${N}${te}`;case"**":return A+me(t);case"**/*":return`(?:${A}${me(t)}${p})?${N}${v}${te}`;case"**/*.*":return`(?:${A}${me(t)}${p})?${N}${te}${d}${v}${te}`;case"**/.*":return`(?:${A}${me(t)}${p})?${d}${v}${te}`;default:{let L=/^(.*?)\.(\w+)$/.exec($);if(!L)return;let ae=O(L[1]);return ae?ae+d+L[2]:void 0}}},oe=We.removePrefix(r,se),X=O(oe);return X&&t.strictSlashes!==!0&&(X+=`${p}?`),X};ec.exports=Zu});var nc=x((pv,rc)=>{"use strict";var Lm=require("path"),Nm=Qu(),Ls=tc(),Ns=mr(),Bm=pr(),Um=r=>r&&typeof r=="object"&&!Array.isArray(r),xe=(r,e,t=!1)=>{if(Array.isArray(r)){let y=r.map(S=>xe(S,e,t));return S=>{for(let G of y){let P=G(S);if(P)return P}return!1}}let i=Um(r)&&r.tokens&&r.input;if(r===""||typeof r!="string"&&!i)throw new TypeError("Expected pattern to be a non-empty string");let a=e||{},c=Ns.isWindows(e),d=i?xe.compileRe(r,e):xe.makeRe(r,e,!1,!0),p=d.state;delete d.state;let v=()=>!1;if(a.ignore){let y={...e,ignore:null,onMatch:null,onResult:null};v=xe(a.ignore,y,t)}let b=(y,E=!1)=>{let{isMatch:S,match:G,output:P}=xe.test(y,d,e,{glob:r,posix:c}),A={glob:r,state:p,regex:d,posix:c,input:y,output:P,match:G,isMatch:S};return typeof a.onResult=="function"&&a.onResult(A),S===!1?(A.isMatch=!1,E?A:!1):v(y)?(typeof a.onIgnore=="function"&&a.onIgnore(A),A.isMatch=!1,E?A:!1):(typeof a.onMatch=="function"&&a.onMatch(A),E?A:!0)};return t&&(b.state=p),b};xe.test=(r,e,t,{glob:i,posix:a}={})=>{if(typeof r!="string")throw new TypeError("Expected input to be a string");if(r==="")return{isMatch:!1,output:""};let c=t||{},d=c.format||(a?Ns.toPosixSlashes:null),p=r===i,v=p&&d?d(r):r;return p===!1&&(v=d?d(r):r,p=v===i),(p===!1||c.capture===!0)&&(c.matchBase===!0||c.basename===!0?p=xe.matchBase(r,e,t,a):p=e.exec(v)),{isMatch:!!p,match:p,output:v}};xe.matchBase=(r,e,t,i=Ns.isWindows(t))=>(e instanceof RegExp?e:xe.makeRe(e,t)).test(Lm.basename(r));xe.isMatch=(r,e,t)=>xe(e,t)(r);xe.parse=(r,e)=>Array.isArray(r)?r.map(t=>xe.parse(t,e)):Ls(r,{...e,fastpaths:!1});xe.scan=(r,e)=>Nm(r,e);xe.compileRe=(r,e,t=!1,i=!1)=>{if(t===!0)return r.output;let a=e||{},c=a.contains?"":"^",d=a.contains?"":"$",p=`${c}(?:${r.output})${d}`;r&&r.negated===!0&&(p=`^(?!${p}).*$`);let v=xe.toRegex(p,e);return i===!0&&(v.state=r),v};xe.makeRe=(r,e={},t=!1,i=!1)=>{if(!r||typeof r!="string")throw new TypeError("Expected a non-empty string");let a={negated:!1,fastpaths:!0};return e.fastpaths!==!1&&(r[0]==="."||r[0]==="*")&&(a.output=Ls.fastpaths(r,e)),a.output||(a=Ls(r,e)),xe.compileRe(a,e,t,i)};xe.toRegex=(r,e)=>{try{let t=e||{};return new RegExp(r,t.flags||(t.nocase?"i":""))}catch(t){if(e&&e.debug===!0)throw t;return/$^/}};xe.constants=Bm;rc.exports=xe});var ic=x((mv,sc)=>{"use strict";sc.exports=nc()});var lc=x((gv,cc)=>{"use strict";var ac=require("util"),uc=Bu(),nt=ic(),Bs=mr(),oc=r=>r===""||r==="./",Se=(r,e,t)=>{e=[].concat(e),r=[].concat(r);let i=new Set,a=new Set,c=new Set,d=0,p=y=>{c.add(y.output),t&&t.onResult&&t.onResult(y)};for(let y=0;y<e.length;y++){let E=nt(String(e[y]),{...t,onResult:p},!0),S=E.state.negated||E.state.negatedExtglob;S&&d++;for(let G of r){let P=E(G,!0);(S?!P.isMatch:P.isMatch)&&(S?i.add(P.output):(i.delete(P.output),a.add(P.output)))}}let b=(d===e.length?[...c]:[...a]).filter(y=>!i.has(y));if(t&&b.length===0){if(t.failglob===!0)throw new Error(`No matches found for "${e.join(", ")}"`);if(t.nonull===!0||t.nullglob===!0)return t.unescape?e.map(y=>y.replace(/\\/g,"")):e}return b};Se.match=Se;Se.matcher=(r,e)=>nt(r,e);Se.isMatch=(r,e,t)=>nt(e,t)(r);Se.any=Se.isMatch;Se.not=(r,e,t={})=>{e=[].concat(e).map(String);let i=new Set,a=[],d=Se(r,e,{...t,onResult:p=>{t.onResult&&t.onResult(p),a.push(p.output)}});for(let p of a)d.includes(p)||i.add(p);return[...i]};Se.contains=(r,e,t)=>{if(typeof r!="string")throw new TypeError(`Expected a string: "${ac.inspect(r)}"`);if(Array.isArray(e))return e.some(i=>Se.contains(r,i,t));if(typeof e=="string"){if(oc(r)||oc(e))return!1;if(r.includes(e)||r.startsWith("./")&&r.slice(2).includes(e))return!0}return Se.isMatch(r,e,{...t,contains:!0})};Se.matchKeys=(r,e,t)=>{if(!Bs.isObject(r))throw new TypeError("Expected the first argument to be an object");let i=Se(Object.keys(r),e,t),a={};for(let c of i)a[c]=r[c];return a};Se.some=(r,e,t)=>{let i=[].concat(r);for(let a of[].concat(e)){let c=nt(String(a),t);if(i.some(d=>c(d)))return!0}return!1};Se.every=(r,e,t)=>{let i=[].concat(r);for(let a of[].concat(e)){let c=nt(String(a),t);if(!i.every(d=>c(d)))return!1}return!0};Se.all=(r,e,t)=>{if(typeof r!="string")throw new TypeError(`Expected a string: "${ac.inspect(r)}"`);return[].concat(e).every(i=>nt(i,t)(r))};Se.capture=(r,e,t)=>{let i=Bs.isWindows(t),c=nt.makeRe(String(r),{...t,capture:!0}).exec(i?Bs.toPosixSlashes(e):e);if(c)return c.slice(1).map(d=>d===void 0?"":d)};Se.makeRe=(...r)=>nt.makeRe(...r);Se.scan=(...r)=>nt.scan(...r);Se.parse=(r,e)=>{let t=[];for(let i of[].concat(r||[]))for(let a of uc(String(i),e))t.push(nt.parse(a,e));return t};Se.braces=(r,e)=>{if(typeof r!="string")throw new TypeError("Expected a string");return e&&e.nobrace===!0||!/\{.*\}/.test(r)?[r]:uc(r,e)};Se.braceExpand=(r,e)=>{if(typeof r!="string")throw new TypeError("Expected a string");return Se.braces(r,{...e,expand:!0})};cc.exports=Se});var yc=x(Q=>{"use strict";Object.defineProperty(Q,"__esModule",{value:!0});Q.removeDuplicateSlashes=Q.matchAny=Q.convertPatternsToRe=Q.makeRe=Q.getPatternParts=Q.expandBraceExpansion=Q.expandPatternsWithBraceExpansion=Q.isAffectDepthOfReadingPattern=Q.endsWithSlashGlobStar=Q.hasGlobStar=Q.getBaseDirectory=Q.isPatternRelatedToParentDirectory=Q.getPatternsOutsideCurrentDirectory=Q.getPatternsInsideCurrentDirectory=Q.getPositivePatterns=Q.getNegativePatterns=Q.isPositivePattern=Q.isNegativePattern=Q.convertToNegativePattern=Q.convertToPositivePattern=Q.isDynamicPattern=Q.isStaticPattern=void 0;var Hm=require("path"),$m=tu(),Us=lc(),fc="**",qm="\\",Wm=/[*?]|^!/,jm=/\[[^[]*]/,Gm=/(?:^|[^!*+?@])\([^(]*\|[^|]*\)/,Vm=/[!*+?@]\([^(]*\)/,zm=/,|\.\./,Km=/(?!^)\/{2,}/g;function dc(r,e={}){return!hc(r,e)}Q.isStaticPattern=dc;function hc(r,e={}){return r===""?!1:!!(e.caseSensitiveMatch===!1||r.includes(qm)||Wm.test(r)||jm.test(r)||Gm.test(r)||e.extglob!==!1&&Vm.test(r)||e.braceExpansion!==!1&&Ym(r))}Q.isDynamicPattern=hc;function Ym(r){let e=r.indexOf("{");if(e===-1)return!1;let t=r.indexOf("}",e+1);if(t===-1)return!1;let i=r.slice(e,t);return zm.test(i)}function Xm(r){return dn(r)?r.slice(1):r}Q.convertToPositivePattern=Xm;function Qm(r){return"!"+r}Q.convertToNegativePattern=Qm;function dn(r){return r.startsWith("!")&&r[1]!=="("}Q.isNegativePattern=dn;function _c(r){return!dn(r)}Q.isPositivePattern=_c;function Jm(r){return r.filter(dn)}Q.getNegativePatterns=Jm;function Zm(r){return r.filter(_c)}Q.getPositivePatterns=Zm;function eg(r){return r.filter(e=>!Hs(e))}Q.getPatternsInsideCurrentDirectory=eg;function tg(r){return r.filter(Hs)}Q.getPatternsOutsideCurrentDirectory=tg;function Hs(r){return r.startsWith("..")||r.startsWith("./..")}Q.isPatternRelatedToParentDirectory=Hs;function rg(r){return $m(r,{flipBackslashes:!1})}Q.getBaseDirectory=rg;function ng(r){return r.includes(fc)}Q.hasGlobStar=ng;function pc(r){return r.endsWith("/"+fc)}Q.endsWithSlashGlobStar=pc;function sg(r){let e=Hm.basename(r);return pc(r)||dc(e)}Q.isAffectDepthOfReadingPattern=sg;function ig(r){return r.reduce((e,t)=>e.concat(mc(t)),[])}Q.expandPatternsWithBraceExpansion=ig;function mc(r){let e=Us.braces(r,{expand:!0,nodupes:!0});return e.sort((t,i)=>t.length-i.length),e.filter(t=>t!=="")}Q.expandBraceExpansion=mc;function og(r,e){let{parts:t}=Us.scan(r,Object.assign(Object.assign({},e),{parts:!0}));return t.length===0&&(t=[r]),t[0].startsWith("/")&&(t[0]=t[0].slice(1),t.unshift("")),t}Q.getPatternParts=og;function gc(r,e){return Us.makeRe(r,e)}Q.makeRe=gc;function ag(r,e){return r.map(t=>gc(t,e))}Q.convertPatternsToRe=ag;function ug(r,e){return e.some(t=>t.test(r))}Q.matchAny=ug;function cg(r){return r.replace(Km,"/")}Q.removeDuplicateSlashes=cg});var Sc=x((bv,Ec)=>{"use strict";var lg=require("stream"),bc=lg.PassThrough,fg=Array.prototype.slice;Ec.exports=dg;function dg(){let r=[],e=fg.call(arguments),t=!1,i=e[e.length-1];i&&!Array.isArray(i)&&i.pipe==null?e.pop():i={};let a=i.end!==!1,c=i.pipeError===!0;i.objectMode==null&&(i.objectMode=!0),i.highWaterMark==null&&(i.highWaterMark=64*1024);let d=bc(i);function p(){for(let y=0,E=arguments.length;y<E;y++)r.push(vc(arguments[y],i));return v(),this}function v(){if(t)return;t=!0;let y=r.shift();if(!y){process.nextTick(b);return}Array.isArray(y)||(y=[y]);let E=y.length+1;function S(){--E>0||(t=!1,v())}function G(P){function A(){P.removeListener("merge2UnpipeEnd",A),P.removeListener("end",A),c&&P.removeListener("error",N),S()}function N(V){d.emit("error",V)}if(P._readableState.endEmitted)return S();P.on("merge2UnpipeEnd",A),P.on("end",A),c&&P.on("error",N),P.pipe(d,{end:!1}),P.resume()}for(let P=0;P<y.length;P++)G(y[P]);S()}function b(){t=!1,d.emit("queueDrain"),a&&d.end()}return d.setMaxListeners(0),d.add=p,d.on("unpipe",function(y){y.emit("merge2UnpipeEnd")}),e.length&&p.apply(null,e),d}function vc(r,e){if(Array.isArray(r))for(let t=0,i=r.length;t<i;t++)r[t]=vc(r[t],e);else{if(!r._readableState&&r.pipe&&(r=r.pipe(bc(e))),!r._readableState||!r.pause||!r.pipe)throw new Error("Only readable stream can be merged.");r.pause()}return r}});var kc=x(hn=>{"use strict";Object.defineProperty(hn,"__esModule",{value:!0});hn.merge=void 0;var hg=Sc();function _g(r){let e=hg(r);return r.forEach(t=>{t.once("error",i=>e.emit("error",i))}),e.once("close",()=>wc(r)),e.once("end",()=>wc(r)),e}hn.merge=_g;function wc(r){r.forEach(e=>e.emit("close"))}});var Rc=x(Kt=>{"use strict";Object.defineProperty(Kt,"__esModule",{value:!0});Kt.isEmpty=Kt.isString=void 0;function pg(r){return typeof r=="string"}Kt.isString=pg;function mg(r){return r===""}Kt.isEmpty=mg});var dt=x(Le=>{"use strict";Object.defineProperty(Le,"__esModule",{value:!0});Le.string=Le.stream=Le.pattern=Le.path=Le.fs=Le.errno=Le.array=void 0;var gg=qa();Le.array=gg;var yg=Wa();Le.errno=yg;var bg=ja();Le.fs=bg;var vg=Ka();Le.path=vg;var Eg=yc();Le.pattern=Eg;var Sg=kc();Le.stream=Sg;var wg=Rc();Le.string=wg});var Dc=x(Ne=>{"use strict";Object.defineProperty(Ne,"__esModule",{value:!0});Ne.convertPatternGroupToTask=Ne.convertPatternGroupsToTasks=Ne.groupPatternsByBaseDirectory=Ne.getNegativePatternsAsPositive=Ne.getPositivePatterns=Ne.convertPatternsToTasks=Ne.generate=void 0;var Qe=dt();function kg(r,e){let t=Tc(r,e),i=Tc(e.ignore,e),a=Ac(t),c=Pc(t,i),d=a.filter(y=>Qe.pattern.isStaticPattern(y,e)),p=a.filter(y=>Qe.pattern.isDynamicPattern(y,e)),v=$s(d,c,!1),b=$s(p,c,!0);return v.concat(b)}Ne.generate=kg;function Tc(r,e){let t=r;return e.braceExpansion&&(t=Qe.pattern.expandPatternsWithBraceExpansion(t)),e.baseNameMatch&&(t=t.map(i=>i.includes("/")?i:`**/${i}`)),t.map(i=>Qe.pattern.removeDuplicateSlashes(i))}function $s(r,e,t){let i=[],a=Qe.pattern.getPatternsOutsideCurrentDirectory(r),c=Qe.pattern.getPatternsInsideCurrentDirectory(r),d=qs(a),p=qs(c);return i.push(...Ws(d,e,t)),"."in p?i.push(js(".",c,e,t)):i.push(...Ws(p,e,t)),i}Ne.convertPatternsToTasks=$s;function Ac(r){return Qe.pattern.getPositivePatterns(r)}Ne.getPositivePatterns=Ac;function Pc(r,e){return Qe.pattern.getNegativePatterns(r).concat(e).map(Qe.pattern.convertToPositivePattern)}Ne.getNegativePatternsAsPositive=Pc;function qs(r){let e={};return r.reduce((t,i)=>{let a=Qe.pattern.getBaseDirectory(i);return a in t?t[a].push(i):t[a]=[i],t},e)}Ne.groupPatternsByBaseDirectory=qs;function Ws(r,e,t){return Object.keys(r).map(i=>js(i,r[i],e,t))}Ne.convertPatternGroupsToTasks=Ws;function js(r,e,t,i){return{dynamic:i,positive:e,negative:t,base:r,patterns:[].concat(e,t.map(Qe.pattern.convertToNegativePattern))}}Ne.convertPatternGroupToTask=js});var Cc=x(_n=>{"use strict";Object.defineProperty(_n,"__esModule",{value:!0});_n.read=void 0;function Rg(r,e,t){e.fs.lstat(r,(i,a)=>{if(i!==null){xc(t,i);return}if(!a.isSymbolicLink()||!e.followSymbolicLink){Gs(t,a);return}e.fs.stat(r,(c,d)=>{if(c!==null){if(e.throwErrorOnBrokenSymbolicLink){xc(t,c);return}Gs(t,a);return}e.markSymbolicLink&&(d.isSymbolicLink=()=>!0),Gs(t,d)})})}_n.read=Rg;function xc(r,e){r(e)}function Gs(r,e){r(null,e)}});var Oc=x(pn=>{"use strict";Object.defineProperty(pn,"__esModule",{value:!0});pn.read=void 0;function Tg(r,e){let t=e.fs.lstatSync(r);if(!t.isSymbolicLink()||!e.followSymbolicLink)return t;try{let i=e.fs.statSync(r);return e.markSymbolicLink&&(i.isSymbolicLink=()=>!0),i}catch(i){if(!e.throwErrorOnBrokenSymbolicLink)return t;throw i}}pn.read=Tg});var Fc=x(yt=>{"use strict";Object.defineProperty(yt,"__esModule",{value:!0});yt.createFileSystemAdapter=yt.FILE_SYSTEM_ADAPTER=void 0;var mn=require("fs");yt.FILE_SYSTEM_ADAPTER={lstat:mn.lstat,stat:mn.stat,lstatSync:mn.lstatSync,statSync:mn.statSync};function Ag(r){return r===void 0?yt.FILE_SYSTEM_ADAPTER:Object.assign(Object.assign({},yt.FILE_SYSTEM_ADAPTER),r)}yt.createFileSystemAdapter=Ag});var Mc=x(zs=>{"use strict";Object.defineProperty(zs,"__esModule",{value:!0});var Pg=Fc(),Vs=class{constructor(e={}){this._options=e,this.followSymbolicLink=this._getValue(this._options.followSymbolicLink,!0),this.fs=Pg.createFileSystemAdapter(this._options.fs),this.markSymbolicLink=this._getValue(this._options.markSymbolicLink,!1),this.throwErrorOnBrokenSymbolicLink=this._getValue(this._options.throwErrorOnBrokenSymbolicLink,!0)}_getValue(e,t){return e??t}};zs.default=Vs});var Ft=x(bt=>{"use strict";Object.defineProperty(bt,"__esModule",{value:!0});bt.statSync=bt.stat=bt.Settings=void 0;var Ic=Cc(),Dg=Oc(),Ks=Mc();bt.Settings=Ks.default;function xg(r,e,t){if(typeof e=="function"){Ic.read(r,Ys(),e);return}Ic.read(r,Ys(e),t)}bt.stat=xg;function Cg(r,e){let t=Ys(e);return Dg.read(r,t)}bt.statSync=Cg;function Ys(r={}){return r instanceof Ks.default?r:new Ks.default(r)}});var Bc=x((Dv,Nc)=>{var Lc;Nc.exports=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window<"u"?window:global):r=>(Lc||(Lc=Promise.resolve())).then(r).catch(e=>setTimeout(()=>{throw e},0))});var Hc=x((xv,Uc)=>{Uc.exports=Fg;var Og=Bc();function Fg(r,e){let t,i,a,c=!0;Array.isArray(r)?(t=[],i=r.length):(a=Object.keys(r),t={},i=a.length);function d(v){function b(){e&&e(v,t),e=null}c?Og(b):b()}function p(v,b,y){t[v]=y,(--i===0||b)&&d(b)}i?a?a.forEach(function(v){r[v](function(b,y){p(v,b,y)})}):r.forEach(function(v,b){v(function(y,E){p(b,y,E)})}):d(null),c=!1}});var Xs=x(yn=>{"use strict";Object.defineProperty(yn,"__esModule",{value:!0});yn.IS_SUPPORT_READDIR_WITH_FILE_TYPES=void 0;var gn=process.versions.node.split(".");if(gn[0]===void 0||gn[1]===void 0)throw new Error(`Unexpected behavior. The 'process.versions.node' variable has invalid value: ${process.versions.node}`);var $c=Number.parseInt(gn[0],10),Mg=Number.parseInt(gn[1],10),qc=10,Ig=10,Lg=$c>qc,Ng=$c===qc&&Mg>=Ig;yn.IS_SUPPORT_READDIR_WITH_FILE_TYPES=Lg||Ng});var Wc=x(bn=>{"use strict";Object.defineProperty(bn,"__esModule",{value:!0});bn.createDirentFromStats=void 0;var Qs=class{constructor(e,t){this.name=e,this.isBlockDevice=t.isBlockDevice.bind(t),this.isCharacterDevice=t.isCharacterDevice.bind(t),this.isDirectory=t.isDirectory.bind(t),this.isFIFO=t.isFIFO.bind(t),this.isFile=t.isFile.bind(t),this.isSocket=t.isSocket.bind(t),this.isSymbolicLink=t.isSymbolicLink.bind(t)}};function Bg(r,e){return new Qs(r,e)}bn.createDirentFromStats=Bg});var Js=x(vn=>{"use strict";Object.defineProperty(vn,"__esModule",{value:!0});vn.fs=void 0;var Ug=Wc();vn.fs=Ug});var Zs=x(En=>{"use strict";Object.defineProperty(En,"__esModule",{value:!0});En.joinPathSegments=void 0;function Hg(r,e,t){return r.endsWith(t)?r+e:r+t+e}En.joinPathSegments=Hg});var Yc=x(vt=>{"use strict";Object.defineProperty(vt,"__esModule",{value:!0});vt.readdir=vt.readdirWithFileTypes=vt.read=void 0;var $g=Ft(),jc=Hc(),qg=Xs(),Gc=Js(),Vc=Zs();function Wg(r,e,t){if(!e.stats&&qg.IS_SUPPORT_READDIR_WITH_FILE_TYPES){zc(r,e,t);return}Kc(r,e,t)}vt.read=Wg;function zc(r,e,t){e.fs.readdir(r,{withFileTypes:!0},(i,a)=>{if(i!==null){Sn(t,i);return}let c=a.map(p=>({dirent:p,name:p.name,path:Vc.joinPathSegments(r,p.name,e.pathSegmentSeparator)}));if(!e.followSymbolicLinks){ei(t,c);return}let d=c.map(p=>jg(p,e));jc(d,(p,v)=>{if(p!==null){Sn(t,p);return}ei(t,v)})})}vt.readdirWithFileTypes=zc;function jg(r,e){return t=>{if(!r.dirent.isSymbolicLink()){t(null,r);return}e.fs.stat(r.path,(i,a)=>{if(i!==null){if(e.throwErrorOnBrokenSymbolicLink){t(i);return}t(null,r);return}r.dirent=Gc.fs.createDirentFromStats(r.name,a),t(null,r)})}}function Kc(r,e,t){e.fs.readdir(r,(i,a)=>{if(i!==null){Sn(t,i);return}let c=a.map(d=>{let p=Vc.joinPathSegments(r,d,e.pathSegmentSeparator);return v=>{$g.stat(p,e.fsStatSettings,(b,y)=>{if(b!==null){v(b);return}let E={name:d,path:p,dirent:Gc.fs.createDirentFromStats(d,y)};e.stats&&(E.stats=y),v(null,E)})}});jc(c,(d,p)=>{if(d!==null){Sn(t,d);return}ei(t,p)})})}vt.readdir=Kc;function Sn(r,e){r(e)}function ei(r,e){r(null,e)}});var el=x(Et=>{"use strict";Object.defineProperty(Et,"__esModule",{value:!0});Et.readdir=Et.readdirWithFileTypes=Et.read=void 0;var Gg=Ft(),Vg=Xs(),Xc=Js(),Qc=Zs();function zg(r,e){return!e.stats&&Vg.IS_SUPPORT_READDIR_WITH_FILE_TYPES?Jc(r,e):Zc(r,e)}Et.read=zg;function Jc(r,e){return e.fs.readdirSync(r,{withFileTypes:!0}).map(i=>{let a={dirent:i,name:i.name,path:Qc.joinPathSegments(r,i.name,e.pathSegmentSeparator)};if(a.dirent.isSymbolicLink()&&e.followSymbolicLinks)try{let c=e.fs.statSync(a.path);a.dirent=Xc.fs.createDirentFromStats(a.name,c)}catch(c){if(e.throwErrorOnBrokenSymbolicLink)throw c}return a})}Et.readdirWithFileTypes=Jc;function Zc(r,e){return e.fs.readdirSync(r).map(i=>{let a=Qc.joinPathSegments(r,i,e.pathSegmentSeparator),c=Gg.statSync(a,e.fsStatSettings),d={name:i,path:a,dirent:Xc.fs.createDirentFromStats(i,c)};return e.stats&&(d.stats=c),d})}Et.readdir=Zc});var tl=x(St=>{"use strict";Object.defineProperty(St,"__esModule",{value:!0});St.createFileSystemAdapter=St.FILE_SYSTEM_ADAPTER=void 0;var Yt=require("fs");St.FILE_SYSTEM_ADAPTER={lstat:Yt.lstat,stat:Yt.stat,lstatSync:Yt.lstatSync,statSync:Yt.statSync,readdir:Yt.readdir,readdirSync:Yt.readdirSync};function Kg(r){return r===void 0?St.FILE_SYSTEM_ADAPTER:Object.assign(Object.assign({},St.FILE_SYSTEM_ADAPTER),r)}St.createFileSystemAdapter=Kg});var rl=x(ri=>{"use strict";Object.defineProperty(ri,"__esModule",{value:!0});var Yg=require("path"),Xg=Ft(),Qg=tl(),ti=class{constructor(e={}){this._options=e,this.followSymbolicLinks=this._getValue(this._options.followSymbolicLinks,!1),this.fs=Qg.createFileSystemAdapter(this._options.fs),this.pathSegmentSeparator=this._getValue(this._options.pathSegmentSeparator,Yg.sep),this.stats=this._getValue(this._options.stats,!1),this.throwErrorOnBrokenSymbolicLink=this._getValue(this._options.throwErrorOnBrokenSymbolicLink,!0),this.fsStatSettings=new Xg.Settings({followSymbolicLink:this.followSymbolicLinks,fs:this.fs,throwErrorOnBrokenSymbolicLink:this.throwErrorOnBrokenSymbolicLink})}_getValue(e,t){return e??t}};ri.default=ti});var wn=x(wt=>{"use strict";Object.defineProperty(wt,"__esModule",{value:!0});wt.Settings=wt.scandirSync=wt.scandir=void 0;var nl=Yc(),Jg=el(),ni=rl();wt.Settings=ni.default;function Zg(r,e,t){if(typeof e=="function"){nl.read(r,si(),e);return}nl.read(r,si(e),t)}wt.scandir=Zg;function ey(r,e){let t=si(e);return Jg.read(r,t)}wt.scandirSync=ey;function si(r={}){return r instanceof ni.default?r:new ni.default(r)}});var il=x((Hv,sl)=>{"use strict";function ty(r){var e=new r,t=e;function i(){var c=e;return c.next?e=c.next:(e=new r,t=e),c.next=null,c}function a(c){t.next=c,t=c}return{get:i,release:a}}sl.exports=ty});var al=x(($v,ii)=>{"use strict";var ry=il();function ol(r,e,t){if(typeof r=="function"&&(t=e,e=r,r=null),t<1)throw new Error("fastqueue concurrency must be greater than 1");var i=ry(ny),a=null,c=null,d=0,p=null,v={push:A,drain:ze,saturated:ze,pause:y,paused:!1,concurrency:t,running:b,resume:G,idle:P,length:E,getQueue:S,unshift:N,empty:ze,kill:se,killAndDrain:te,error:me};return v;function b(){return d}function y(){v.paused=!0}function E(){for(var O=a,oe=0;O;)O=O.next,oe++;return oe}function S(){for(var O=a,oe=[];O;)oe.push(O.value),O=O.next;return oe}function G(){if(v.paused){v.paused=!1;for(var O=0;O<v.concurrency;O++)d++,V()}}function P(){return d===0&&v.length()===0}function A(O,oe){var X=i.get();X.context=r,X.release=V,X.value=O,X.callback=oe||ze,X.errorHandler=p,d===v.concurrency||v.paused?c?(c.next=X,c=X):(a=X,c=X,v.saturated()):(d++,e.call(r,X.value,X.worked))}function N(O,oe){var X=i.get();X.context=r,X.release=V,X.value=O,X.callback=oe||ze,d===v.concurrency||v.paused?a?(X.next=a,a=X):(a=X,c=X,v.saturated()):(d++,e.call(r,X.value,X.worked))}function V(O){O&&i.release(O);var oe=a;oe?v.paused?d--:(c===a&&(c=null),a=oe.next,oe.next=null,e.call(r,oe.value,oe.worked),c===null&&v.empty()):--d===0&&v.drain()}function se(){a=null,c=null,v.drain=ze}function te(){a=null,c=null,v.drain(),v.drain=ze}function me(O){p=O}}function ze(){}function ny(){this.value=null,this.callback=ze,this.next=null,this.release=ze,this.context=null,this.errorHandler=null;var r=this;this.worked=function(t,i){var a=r.callback,c=r.errorHandler,d=r.value;r.value=null,r.callback=ze,r.errorHandler&&c(t,d),a.call(r.context,t,i),r.release(r)}}function sy(r,e,t){typeof r=="function"&&(t=e,e=r,r=null);function i(y,E){e.call(this,y).then(function(S){E(null,S)},E)}var a=ol(r,i,t),c=a.push,d=a.unshift;return a.push=p,a.unshift=v,a.drained=b,a;function p(y){var E=new Promise(function(S,G){c(y,function(P,A){if(P){G(P);return}S(A)})});return E.catch(ze),E}function v(y){var E=new Promise(function(S,G){d(y,function(P,A){if(P){G(P);return}S(A)})});return E.catch(ze),E}function b(){var y=a.drain,E=new Promise(function(S){a.drain=function(){y(),S()}});return E}}ii.exports=ol;ii.exports.promise=sy});var kn=x(st=>{"use strict";Object.defineProperty(st,"__esModule",{value:!0});st.joinPathSegments=st.replacePathSegmentSeparator=st.isAppliedFilter=st.isFatalError=void 0;function iy(r,e){return r.errorFilter===null?!0:!r.errorFilter(e)}st.isFatalError=iy;function oy(r,e){return r===null||r(e)}st.isAppliedFilter=oy;function ay(r,e){return r.split(/[/\\]/).join(e)}st.replacePathSegmentSeparator=ay;function uy(r,e,t){return r===""?e:r.endsWith(t)?r+e:r+t+e}st.joinPathSegments=uy});var ui=x(ai=>{"use strict";Object.defineProperty(ai,"__esModule",{value:!0});var cy=kn(),oi=class{constructor(e,t){this._root=e,this._settings=t,this._root=cy.replacePathSegmentSeparator(e,t.pathSegmentSeparator)}};ai.default=oi});var fi=x(li=>{"use strict";Object.defineProperty(li,"__esModule",{value:!0});var ly=require("events"),fy=wn(),dy=al(),Rn=kn(),hy=ui(),ci=class extends hy.default{constructor(e,t){super(e,t),this._settings=t,this._scandir=fy.scandir,this._emitter=new ly.EventEmitter,this._queue=dy(this._worker.bind(this),this._settings.concurrency),this._isFatalError=!1,this._isDestroyed=!1,this._queue.drain=()=>{this._isFatalError||this._emitter.emit("end")}}read(){return this._isFatalError=!1,this._isDestroyed=!1,setImmediate(()=>{this._pushToQueue(this._root,this._settings.basePath)}),this._emitter}get isDestroyed(){return this._isDestroyed}destroy(){if(this._isDestroyed)throw new Error("The reader is already destroyed");this._isDestroyed=!0,this._queue.killAndDrain()}onEntry(e){this._emitter.on("entry",e)}onError(e){this._emitter.once("error",e)}onEnd(e){this._emitter.once("end",e)}_pushToQueue(e,t){let i={directory:e,base:t};this._queue.push(i,a=>{a!==null&&this._handleError(a)})}_worker(e,t){this._scandir(e.directory,this._settings.fsScandirSettings,(i,a)=>{if(i!==null){t(i,void 0);return}for(let c of a)this._handleEntry(c,e.base);t(null,void 0)})}_handleError(e){this._isDestroyed||!Rn.isFatalError(this._settings,e)||(this._isFatalError=!0,this._isDestroyed=!0,this._emitter.emit("error",e))}_handleEntry(e,t){if(this._isDestroyed||this._isFatalError)return;let i=e.path;t!==void 0&&(e.path=Rn.joinPathSegments(t,e.name,this._settings.pathSegmentSeparator)),Rn.isAppliedFilter(this._settings.entryFilter,e)&&this._emitEntry(e),e.dirent.isDirectory()&&Rn.isAppliedFilter(this._settings.deepFilter,e)&&this._pushToQueue(i,t===void 0?void 0:e.path)}_emitEntry(e){this._emitter.emit("entry",e)}};li.default=ci});var ul=x(hi=>{"use strict";Object.defineProperty(hi,"__esModule",{value:!0});var _y=fi(),di=class{constructor(e,t){this._root=e,this._settings=t,this._reader=new _y.default(this._root,this._settings),this._storage=[]}read(e){this._reader.onError(t=>{py(e,t)}),this._reader.onEntry(t=>{this._storage.push(t)}),this._reader.onEnd(()=>{my(e,this._storage)}),this._reader.read()}};hi.default=di;function py(r,e){r(e)}function my(r,e){r(null,e)}});var cl=x(pi=>{"use strict";Object.defineProperty(pi,"__esModule",{value:!0});var gy=require("stream"),yy=fi(),_i=class{constructor(e,t){this._root=e,this._settings=t,this._reader=new yy.default(this._root,this._settings),this._stream=new gy.Readable({objectMode:!0,read:()=>{},destroy:()=>{this._reader.isDestroyed||this._reader.destroy()}})}read(){return this._reader.onError(e=>{this._stream.emit("error",e)}),this._reader.onEntry(e=>{this._stream.push(e)}),this._reader.onEnd(()=>{this._stream.push(null)}),this._reader.read(),this._stream}};pi.default=_i});var ll=x(gi=>{"use strict";Object.defineProperty(gi,"__esModule",{value:!0});var by=wn(),Tn=kn(),vy=ui(),mi=class extends vy.default{constructor(){super(...arguments),this._scandir=by.scandirSync,this._storage=[],this._queue=new Set}read(){return this._pushToQueue(this._root,this._settings.basePath),this._handleQueue(),this._storage}_pushToQueue(e,t){this._queue.add({directory:e,base:t})}_handleQueue(){for(let e of this._queue.values())this._handleDirectory(e.directory,e.base)}_handleDirectory(e,t){try{let i=this._scandir(e,this._settings.fsScandirSettings);for(let a of i)this._handleEntry(a,t)}catch(i){this._handleError(i)}}_handleError(e){if(Tn.isFatalError(this._settings,e))throw e}_handleEntry(e,t){let i=e.path;t!==void 0&&(e.path=Tn.joinPathSegments(t,e.name,this._settings.pathSegmentSeparator)),Tn.isAppliedFilter(this._settings.entryFilter,e)&&this._pushToStorage(e),e.dirent.isDirectory()&&Tn.isAppliedFilter(this._settings.deepFilter,e)&&this._pushToQueue(i,t===void 0?void 0:e.path)}_pushToStorage(e){this._storage.push(e)}};gi.default=mi});var fl=x(bi=>{"use strict";Object.defineProperty(bi,"__esModule",{value:!0});var Ey=ll(),yi=class{constructor(e,t){this._root=e,this._settings=t,this._reader=new Ey.default(this._root,this._settings)}read(){return this._reader.read()}};bi.default=yi});var dl=x(Ei=>{"use strict";Object.defineProperty(Ei,"__esModule",{value:!0});var Sy=require("path"),wy=wn(),vi=class{constructor(e={}){this._options=e,this.basePath=this._getValue(this._options.basePath,void 0),this.concurrency=this._getValue(this._options.concurrency,Number.POSITIVE_INFINITY),this.deepFilter=this._getValue(this._options.deepFilter,null),this.entryFilter=this._getValue(this._options.entryFilter,null),this.errorFilter=this._getValue(this._options.errorFilter,null),this.pathSegmentSeparator=this._getValue(this._options.pathSegmentSeparator,Sy.sep),this.fsScandirSettings=new wy.Settings({followSymbolicLinks:this._options.followSymbolicLinks,fs:this._options.fs,pathSegmentSeparator:this._options.pathSegmentSeparator,stats:this._options.stats,throwErrorOnBrokenSymbolicLink:this._options.throwErrorOnBrokenSymbolicLink})}_getValue(e,t){return e??t}};Ei.default=vi});var Pn=x(it=>{"use strict";Object.defineProperty(it,"__esModule",{value:!0});it.Settings=it.walkStream=it.walkSync=it.walk=void 0;var hl=ul(),ky=cl(),Ry=fl(),Si=dl();it.Settings=Si.default;function Ty(r,e,t){if(typeof e=="function"){new hl.default(r,An()).read(e);return}new hl.default(r,An(e)).read(t)}it.walk=Ty;function Ay(r,e){let t=An(e);return new Ry.default(r,t).read()}it.walkSync=Ay;function Py(r,e){let t=An(e);return new ky.default(r,t).read()}it.walkStream=Py;function An(r={}){return r instanceof Si.default?r:new Si.default(r)}});var Dn=x(ki=>{"use strict";Object.defineProperty(ki,"__esModule",{value:!0});var Dy=require("path"),xy=Ft(),_l=dt(),wi=class{constructor(e){this._settings=e,this._fsStatSettings=new xy.Settings({followSymbolicLink:this._settings.followSymbolicLinks,fs:this._settings.fs,throwErrorOnBrokenSymbolicLink:this._settings.followSymbolicLinks})}_getFullEntryPath(e){return Dy.resolve(this._settings.cwd,e)}_makeEntry(e,t){let i={name:t,path:t,dirent:_l.fs.createDirentFromStats(t,e)};return this._settings.stats&&(i.stats=e),i}_isFatalError(e){return!_l.errno.isEnoentCodeError(e)&&!this._settings.suppressErrors}};ki.default=wi});var Ai=x(Ti=>{"use strict";Object.defineProperty(Ti,"__esModule",{value:!0});var Cy=require("stream"),Oy=Ft(),Fy=Pn(),My=Dn(),Ri=class extends My.default{constructor(){super(...arguments),this._walkStream=Fy.walkStream,this._stat=Oy.stat}dynamic(e,t){return this._walkStream(e,t)}static(e,t){let i=e.map(this._getFullEntryPath,this),a=new Cy.PassThrough({objectMode:!0});a._write=(c,d,p)=>this._getEntry(i[c],e[c],t).then(v=>{v!==null&&t.entryFilter(v)&&a.push(v),c===i.length-1&&a.end(),p()}).catch(p);for(let c=0;c<i.length;c++)a.write(c);return a}_getEntry(e,t,i){return this._getStat(e).then(a=>this._makeEntry(a,t)).catch(a=>{if(i.errorFilter(a))return null;throw a})}_getStat(e){return new Promise((t,i)=>{this._stat(e,this._fsStatSettings,(a,c)=>a===null?t(c):i(a))})}};Ti.default=Ri});var pl=x(Di=>{"use strict";Object.defineProperty(Di,"__esModule",{value:!0});var Iy=Pn(),Ly=Dn(),Ny=Ai(),Pi=class extends Ly.default{constructor(){super(...arguments),this._walkAsync=Iy.walk,this._readerStream=new Ny.default(this._settings)}dynamic(e,t){return new Promise((i,a)=>{this._walkAsync(e,t,(c,d)=>{c===null?i(d):a(c)})})}async static(e,t){let i=[],a=this._readerStream.static(e,t);return new Promise((c,d)=>{a.once("error",d),a.on("data",p=>i.push(p)),a.once("end",()=>c(i))})}};Di.default=Pi});var ml=x(Ci=>{"use strict";Object.defineProperty(Ci,"__esModule",{value:!0});var yr=dt(),xi=class{constructor(e,t,i){this._patterns=e,this._settings=t,this._micromatchOptions=i,this._storage=[],this._fillStorage()}_fillStorage(){for(let e of this._patterns){let t=this._getPatternSegments(e),i=this._splitSegmentsIntoSections(t);this._storage.push({complete:i.length<=1,pattern:e,segments:t,sections:i})}}_getPatternSegments(e){return yr.pattern.getPatternParts(e,this._micromatchOptions).map(i=>yr.pattern.isDynamicPattern(i,this._settings)?{dynamic:!0,pattern:i,patternRe:yr.pattern.makeRe(i,this._micromatchOptions)}:{dynamic:!1,pattern:i})}_splitSegmentsIntoSections(e){return yr.array.splitWhen(e,t=>t.dynamic&&yr.pattern.hasGlobStar(t.pattern))}};Ci.default=xi});var gl=x(Fi=>{"use strict";Object.defineProperty(Fi,"__esModule",{value:!0});var By=ml(),Oi=class extends By.default{match(e){let t=e.split("/"),i=t.length,a=this._storage.filter(c=>!c.complete||c.segments.length>i);for(let c of a){let d=c.sections[0];if(!c.complete&&i>d.length||t.every((v,b)=>{let y=c.segments[b];return!!(y.dynamic&&y.patternRe.test(v)||!y.dynamic&&y.pattern===v)}))return!0}return!1}};Fi.default=Oi});var yl=x(Ii=>{"use strict";Object.defineProperty(Ii,"__esModule",{value:!0});var xn=dt(),Uy=gl(),Mi=class{constructor(e,t){this._settings=e,this._micromatchOptions=t}getFilter(e,t,i){let a=this._getMatcher(t),c=this._getNegativePatternsRe(i);return d=>this._filter(e,d,a,c)}_getMatcher(e){return new Uy.default(e,this._settings,this._micromatchOptions)}_getNegativePatternsRe(e){let t=e.filter(xn.pattern.isAffectDepthOfReadingPattern);return xn.pattern.convertPatternsToRe(t,this._micromatchOptions)}_filter(e,t,i,a){if(this._isSkippedByDeep(e,t.path)||this._isSkippedSymbolicLink(t))return!1;let c=xn.path.removeLeadingDotSegment(t.path);return this._isSkippedByPositivePatterns(c,i)?!1:this._isSkippedByNegativePatterns(c,a)}_isSkippedByDeep(e,t){return this._settings.deep===1/0?!1:this._getEntryLevel(e,t)>=this._settings.deep}_getEntryLevel(e,t){let i=t.split("/").length;if(e==="")return i;let a=e.split("/").length;return i-a}_isSkippedSymbolicLink(e){return!this._settings.followSymbolicLinks&&e.dirent.isSymbolicLink()}_isSkippedByPositivePatterns(e,t){return!this._settings.baseNameMatch&&!t.match(e)}_isSkippedByNegativePatterns(e,t){return!xn.pattern.matchAny(e,t)}};Ii.default=Mi});var bl=x(Ni=>{"use strict";Object.defineProperty(Ni,"__esModule",{value:!0});var Mt=dt(),Li=class{constructor(e,t){this._settings=e,this._micromatchOptions=t,this.index=new Map}getFilter(e,t){let i=Mt.pattern.convertPatternsToRe(e,this._micromatchOptions),a=Mt.pattern.convertPatternsToRe(t,Object.assign(Object.assign({},this._micromatchOptions),{dot:!0}));return c=>this._filter(c,i,a)}_filter(e,t,i){let a=Mt.path.removeLeadingDotSegment(e.path);if(this._settings.unique&&this._isDuplicateEntry(a)||this._onlyFileFilter(e)||this._onlyDirectoryFilter(e)||this._isSkippedByAbsoluteNegativePatterns(a,i))return!1;let c=e.dirent.isDirectory(),d=this._isMatchToPatterns(a,t,c)&&!this._isMatchToPatterns(a,i,c);return this._settings.unique&&d&&this._createIndexRecord(a),d}_isDuplicateEntry(e){return this.index.has(e)}_createIndexRecord(e){this.index.set(e,void 0)}_onlyFileFilter(e){return this._settings.onlyFiles&&!e.dirent.isFile()}_onlyDirectoryFilter(e){return this._settings.onlyDirectories&&!e.dirent.isDirectory()}_isSkippedByAbsoluteNegativePatterns(e,t){if(!this._settings.absolute)return!1;let i=Mt.path.makeAbsolute(this._settings.cwd,e);return Mt.pattern.matchAny(i,t)}_isMatchToPatterns(e,t,i){let a=Mt.pattern.matchAny(e,t);return!a&&i?Mt.pattern.matchAny(e+"/",t):a}};Ni.default=Li});var vl=x(Ui=>{"use strict";Object.defineProperty(Ui,"__esModule",{value:!0});var Hy=dt(),Bi=class{constructor(e){this._settings=e}getFilter(){return e=>this._isNonFatalError(e)}_isNonFatalError(e){return Hy.errno.isEnoentCodeError(e)||this._settings.suppressErrors}};Ui.default=Bi});var Sl=x($i=>{"use strict";Object.defineProperty($i,"__esModule",{value:!0});var El=dt(),Hi=class{constructor(e){this._settings=e}getTransformer(){return e=>this._transform(e)}_transform(e){let t=e.path;return this._settings.absolute&&(t=El.path.makeAbsolute(this._settings.cwd,t),t=El.path.unixify(t)),this._settings.markDirectories&&e.dirent.isDirectory()&&(t+="/"),this._settings.objectMode?Object.assign(Object.assign({},e),{path:t}):t}};$i.default=Hi});var Cn=x(Wi=>{"use strict";Object.defineProperty(Wi,"__esModule",{value:!0});var $y=require("path"),qy=yl(),Wy=bl(),jy=vl(),Gy=Sl(),qi=class{constructor(e){this._settings=e,this.errorFilter=new jy.default(this._settings),this.entryFilter=new Wy.default(this._settings,this._getMicromatchOptions()),this.deepFilter=new qy.default(this._settings,this._getMicromatchOptions()),this.entryTransformer=new Gy.default(this._settings)}_getRootDirectory(e){return $y.resolve(this._settings.cwd,e.base)}_getReaderOptions(e){let t=e.base==="."?"":e.base;return{basePath:t,pathSegmentSeparator:"/",concurrency:this._settings.concurrency,deepFilter:this.deepFilter.getFilter(t,e.positive,e.negative),entryFilter:this.entryFilter.getFilter(e.positive,e.negative),errorFilter:this.errorFilter.getFilter(),followSymbolicLinks:this._settings.followSymbolicLinks,fs:this._settings.fs,stats:this._settings.stats,throwErrorOnBrokenSymbolicLink:this._settings.throwErrorOnBrokenSymbolicLink,transform:this.entryTransformer.getTransformer()}}_getMicromatchOptions(){return{dot:this._settings.dot,matchBase:this._settings.baseNameMatch,nobrace:!this._settings.braceExpansion,nocase:!this._settings.caseSensitiveMatch,noext:!this._settings.extglob,noglobstar:!this._settings.globstar,posix:!0,strictSlashes:!1}}};Wi.default=qi});var wl=x(Gi=>{"use strict";Object.defineProperty(Gi,"__esModule",{value:!0});var Vy=pl(),zy=Cn(),ji=class extends zy.default{constructor(){super(...arguments),this._reader=new Vy.default(this._settings)}async read(e){let t=this._getRootDirectory(e),i=this._getReaderOptions(e);return(await this.api(t,e,i)).map(c=>i.transform(c))}api(e,t,i){return t.dynamic?this._reader.dynamic(e,i):this._reader.static(t.patterns,i)}};Gi.default=ji});var kl=x(zi=>{"use strict";Object.defineProperty(zi,"__esModule",{value:!0});var Ky=require("stream"),Yy=Ai(),Xy=Cn(),Vi=class extends Xy.default{constructor(){super(...arguments),this._reader=new Yy.default(this._settings)}read(e){let t=this._getRootDirectory(e),i=this._getReaderOptions(e),a=this.api(t,e,i),c=new Ky.Readable({objectMode:!0,read:()=>{}});return a.once("error",d=>c.emit("error",d)).on("data",d=>c.emit("data",i.transform(d))).once("end",()=>c.emit("end")),c.once("close",()=>a.destroy()),c}api(e,t,i){return t.dynamic?this._reader.dynamic(e,i):this._reader.static(t.patterns,i)}};zi.default=Vi});var Rl=x(Yi=>{"use strict";Object.defineProperty(Yi,"__esModule",{value:!0});var Qy=Ft(),Jy=Pn(),Zy=Dn(),Ki=class extends Zy.default{constructor(){super(...arguments),this._walkSync=Jy.walkSync,this._statSync=Qy.statSync}dynamic(e,t){return this._walkSync(e,t)}static(e,t){let i=[];for(let a of e){let c=this._getFullEntryPath(a),d=this._getEntry(c,a,t);d===null||!t.entryFilter(d)||i.push(d)}return i}_getEntry(e,t,i){try{let a=this._getStat(e);return this._makeEntry(a,t)}catch(a){if(i.errorFilter(a))return null;throw a}}_getStat(e){return this._statSync(e,this._fsStatSettings)}};Yi.default=Ki});var Tl=x(Qi=>{"use strict";Object.defineProperty(Qi,"__esModule",{value:!0});var eb=Rl(),tb=Cn(),Xi=class extends tb.default{constructor(){super(...arguments),this._reader=new eb.default(this._settings)}read(e){let t=this._getRootDirectory(e),i=this._getReaderOptions(e);return this.api(t,e,i).map(i.transform)}api(e,t,i){return t.dynamic?this._reader.dynamic(e,i):this._reader.static(t.patterns,i)}};Qi.default=Xi});var Al=x(Qt=>{"use strict";Object.defineProperty(Qt,"__esModule",{value:!0});Qt.DEFAULT_FILE_SYSTEM_ADAPTER=void 0;var Xt=require("fs"),rb=require("os"),nb=Math.max(rb.cpus().length,1);Qt.DEFAULT_FILE_SYSTEM_ADAPTER={lstat:Xt.lstat,lstatSync:Xt.lstatSync,stat:Xt.stat,statSync:Xt.statSync,readdir:Xt.readdir,readdirSync:Xt.readdirSync};var Ji=class{constructor(e={}){this._options=e,this.absolute=this._getValue(this._options.absolute,!1),this.baseNameMatch=this._getValue(this._options.baseNameMatch,!1),this.braceExpansion=this._getValue(this._options.braceExpansion,!0),this.caseSensitiveMatch=this._getValue(this._options.caseSensitiveMatch,!0),this.concurrency=this._getValue(this._options.concurrency,nb),this.cwd=this._getValue(this._options.cwd,process.cwd()),this.deep=this._getValue(this._options.deep,1/0),this.dot=this._getValue(this._options.dot,!1),this.extglob=this._getValue(this._options.extglob,!0),this.followSymbolicLinks=this._getValue(this._options.followSymbolicLinks,!0),this.fs=this._getFileSystemMethods(this._options.fs),this.globstar=this._getValue(this._options.globstar,!0),this.ignore=this._getValue(this._options.ignore,[]),this.markDirectories=this._getValue(this._options.markDirectories,!1),this.objectMode=this._getValue(this._options.objectMode,!1),this.onlyDirectories=this._getValue(this._options.onlyDirectories,!1),this.onlyFiles=this._getValue(this._options.onlyFiles,!0),this.stats=this._getValue(this._options.stats,!1),this.suppressErrors=this._getValue(this._options.suppressErrors,!1),this.throwErrorOnBrokenSymbolicLink=this._getValue(this._options.throwErrorOnBrokenSymbolicLink,!1),this.unique=this._getValue(this._options.unique,!0),this.onlyDirectories&&(this.onlyFiles=!1),this.stats&&(this.objectMode=!0),this.ignore=[].concat(this.ignore)}_getValue(e,t){return e===void 0?t:e}_getFileSystemMethods(e={}){return Object.assign(Object.assign({},Qt.DEFAULT_FILE_SYSTEM_ADAPTER),e)}};Qt.default=Ji});var xl=x((dE,Dl)=>{"use strict";var Pl=Dc(),sb=wl(),ib=kl(),ob=Tl(),Zi=Al(),Ke=dt();async function eo(r,e){Je(r);let t=to(r,sb.default,e),i=await Promise.all(t);return Ke.array.flatten(i)}(function(r){r.glob=r,r.globSync=e,r.globStream=t,r.async=r;function e(b,y){Je(b);let E=to(b,ob.default,y);return Ke.array.flatten(E)}r.sync=e;function t(b,y){Je(b);let E=to(b,ib.default,y);return Ke.stream.merge(E)}r.stream=t;function i(b,y){Je(b);let E=[].concat(b),S=new Zi.default(y);return Pl.generate(E,S)}r.generateTasks=i;function a(b,y){Je(b);let E=new Zi.default(y);return Ke.pattern.isDynamicPattern(b,E)}r.isDynamicPattern=a;function c(b){return Je(b),Ke.path.escape(b)}r.escapePath=c;function d(b){return Je(b),Ke.path.convertPathToPattern(b)}r.convertPathToPattern=d;let p;(function(b){function y(S){return Je(S),Ke.path.escapePosixPath(S)}b.escapePath=y;function E(S){return Je(S),Ke.path.convertPosixPathToPattern(S)}b.convertPathToPattern=E})(p=r.posix||(r.posix={}));let v;(function(b){function y(S){return Je(S),Ke.path.escapeWindowsPath(S)}b.escapePath=y;function E(S){return Je(S),Ke.path.convertWindowsPathToPattern(S)}b.convertPathToPattern=E})(v=r.win32||(r.win32={}))})(eo||(eo={}));function to(r,e,t){let i=[].concat(r),a=new Zi.default(t),c=Pl.generate(i,a),d=new e(a);return c.map(d.read,d)}function Je(r){if(![].concat(r).every(i=>Ke.string.isString(i)&&!Ke.string.isEmpty(i)))throw new TypeError("Patterns must be a string (non empty) or an array of strings")}Dl.exports=eo});var ab={};Nh(ab,{registerWorker:()=>Ol});module.exports=Bh(ab);var ie=Rt(require("apache-arrow"));function $t(r){switch(r.typeId){case ie.Type.Binary:return{sqlType:"binary"};case ie.Type.Bool:return{sqlType:"bool"};case ie.Type.Date:return{sqlType:"date"};case ie.Type.DateDay:return{sqlType:"date32[d]"};case ie.Type.DateMillisecond:return{sqlType:"date64[ms]"};case ie.Type.Decimal:{let e=r;return{sqlType:"decimal",precision:e.precision,scale:e.scale}}case ie.Type.Float:return{sqlType:"float"};case ie.Type.Float16:return{sqlType:"float16"};case ie.Type.Float32:return{sqlType:"float32"};case ie.Type.Float64:return{sqlType:"float64"};case ie.Type.Int:return{sqlType:"int32"};case ie.Type.Int16:return{sqlType:"int16"};case ie.Type.Int32:return{sqlType:"int32"};case ie.Type.Int64:return{sqlType:"int64"};case ie.Type.Uint16:return{sqlType:"uint16"};case ie.Type.Uint32:return{sqlType:"uint32"};case ie.Type.Uint64:return{sqlType:"uint64"};case ie.Type.Uint8:return{sqlType:"uint8"};case ie.Type.IntervalDayTime:return{sqlType:"interval[dt]"};case ie.Type.IntervalYearMonth:return{sqlType:"interval[m]"};case ie.Type.List:return{sqlType:"list",valueType:$t(r.valueType)};case ie.Type.FixedSizeBinary:return{sqlType:"fixedsizebinary",byteWidth:r.byteWidth};case ie.Type.Null:return{sqlType:"null"};case ie.Type.Utf8:return{sqlType:"utf8"};case ie.Type.Struct:return{sqlType:"struct",fields:r.children.map(t=>Lr(t.name,t.type))};case ie.Type.Map:{let e=r;return{sqlType:"map",keyType:$t(e.keyType),valueType:$t(e.valueType)}}case ie.Type.Time:return{sqlType:"time[s]"};case ie.Type.TimeMicrosecond:return{sqlType:"time[us]"};case ie.Type.TimeMillisecond:return{sqlType:"time[ms]"};case ie.Type.TimeNanosecond:return{sqlType:"time[ns]"};case ie.Type.TimeSecond:return{sqlType:"time[s]"};case ie.Type.Timestamp:return{sqlType:"timestamp",timezone:r.timezone||void 0};case ie.Type.TimestampSecond:return{sqlType:"timestamp[s]",timezone:r.timezone||void 0};case ie.Type.TimestampMicrosecond:return{sqlType:"timestamp[us]",timezone:r.timezone||void 0};case ie.Type.TimestampNanosecond:return{sqlType:"timestamp[ns]",timezone:r.timezone||void 0};case ie.Type.TimestampMillisecond:return{sqlType:"timestamp[ms]",timezone:r.timezone||void 0}}throw new Error(`unsupported arrow type: ${r.toString()}`)}function Lr(r,e){let t=$t(e);return t.name=r,t}var Nr=class{constructor(){this._bindings=null;this._nextMessageId=0}log(e){this.postMessage({messageId:this._nextMessageId++,requestId:0,type:"LOG",data:e},[])}sendOK(e){this.postMessage({messageId:this._nextMessageId++,requestId:e.messageId,type:"OK",data:null},[])}failWith(e,t){let i={name:t.name,message:t.message,stack:t.stack||void 0};this.postMessage({messageId:this._nextMessageId++,requestId:e.messageId,type:"ERROR",data:i},[])}sendRaw(e,t,i){let a={messageId:this._nextMessageId++,requestId:e.messageId,type:t,data:i};this.postMessage(a,[])}async onMessage(e){switch(e.type){case"PING":this.sendOK(e);return;case"INSTANTIATE":this._bindings!=null&&this.failWith(e,new Error("duckdb already initialized"));try{this._bindings=await this.instantiate(e.data[0],e.data[1],t=>{this.postMessage({messageId:this._nextMessageId++,requestId:e.messageId,type:"INSTANTIATE_PROGRESS",data:t},[])}),this.sendOK(e)}catch(t){console.log(t),this._bindings=null,this.failWith(e,t)}return;default:break}if(!this._bindings)return this.failWith(e,new Error("duckdb is not initialized"));try{switch(e.type){case"GET_VERSION":this.postMessage({messageId:this._nextMessageId++,requestId:e.messageId,type:"VERSION_STRING",data:this._bindings.getVersion()},[]);break;case"GET_FEATURE_FLAGS":this.postMessage({messageId:this._nextMessageId++,requestId:e.messageId,type:"FEATURE_FLAGS",data:this._bindings.getFeatureFlags()},[]);break;case"RESET":this._bindings.reset(),this.sendOK(e);break;case"OPEN":this._bindings.open(e.data),this.sendOK(e);break;case"DROP_FILE":this._bindings.dropFile(e.data),this.sendOK(e);break;case"DROP_FILES":this._bindings.dropFiles(),this.sendOK(e);break;case"FLUSH_FILES":this._bindings.flushFiles(),this.sendOK(e);break;case"CLOSE_FILE":{let t=this._bindings.closeFile(e.data);this.sendRaw(e,"SUCCESS",t);break}case"CONNECT":{let t=this._bindings.connect();this.postMessage({messageId:this._nextMessageId++,requestId:e.messageId,type:"CONNECTION_INFO",data:t.useUnsafe((i,a)=>a)},[]);break}case"DISCONNECT":this._bindings.disconnect(e.data),this.sendOK(e);break;case"CREATE_PREPARED":{let t=this._bindings.createPrepared(e.data[0],e.data[1]);this.postMessage({messageId:this._nextMessageId++,requestId:e.messageId,type:"PREPARED_STATEMENT_ID",data:t},[]);break}case"CLOSE_PREPARED":{this._bindings.closePrepared(e.data[0],e.data[1]),this.sendOK(e);break}case"RUN_PREPARED":{let t=this._bindings.runPrepared(e.data[0],e.data[1],e.data[2]);this.postMessage({messageId:this._nextMessageId++,requestId:e.messageId,type:"QUERY_RESULT",data:t},[t.buffer]);break}case"RUN_QUERY":{let t=this._bindings.runQuery(e.data[0],e.data[1]);this.postMessage({messageId:this._nextMessageId++,requestId:e.messageId,type:"QUERY_RESULT",data:t},[t.buffer]);break}case"SEND_PREPARED":{let t=this._bindings.sendPrepared(e.data[0],e.data[1],e.data[2]);this.postMessage({messageId:this._nextMessageId++,requestId:e.messageId,type:"QUERY_RESULT_HEADER",data:t},[t.buffer]);break}case"START_PENDING_QUERY":{let t=this._bindings.startPendingQuery(e.data[0],e.data[1]),i=[];t&&i.push(t.buffer),this.postMessage({messageId:this._nextMessageId++,requestId:e.messageId,type:"QUERY_RESULT_HEADER_OR_NULL",data:t},i);break}case"POLL_PENDING_QUERY":{let t=this._bindings.pollPendingQuery(e.data),i=[];t&&i.push(t.buffer),this.postMessage({messageId:this._nextMessageId++,requestId:e.messageId,type:"QUERY_RESULT_HEADER_OR_NULL",data:t},i);break}case"CANCEL_PENDING_QUERY":{let t=this._bindings.cancelPendingQuery(e.data);this.postMessage({messageId:this._nextMessageId++,requestId:e.messageId,type:"SUCCESS",data:t},[]);break}case"FETCH_QUERY_RESULTS":{let t=this._bindings.fetchQueryResults(e.data);this.postMessage({messageId:this._nextMessageId++,requestId:e.messageId,type:"QUERY_RESULT_CHUNK",data:t},[t.buffer]);break}case"GET_TABLE_NAMES":{let t=this._bindings.getTableNames(e.data[0],e.data[1]);this.postMessage({messageId:this._nextMessageId++,requestId:e.messageId,type:"TABLE_NAMES",data:t},[]);break}case"GLOB_FILE_INFOS":{let t=this._bindings.globFiles(e.data);this.postMessage({messageId:this._nextMessageId++,requestId:e.messageId,type:"FILE_INFOS",data:t},[]);break}case"REGISTER_FILE_URL":this._bindings.registerFileURL(e.data[0],e.data[1],e.data[2],e.data[3]),this.sendOK(e);break;case"REGISTER_FILE_BUFFER":this._bindings.registerFileBuffer(e.data[0],e.data[1]),this.sendOK(e);break;case"REGISTER_FILE_HANDLE":await this._bindings.registerFileHandle(e.data[0],e.data[1],e.data[2],e.data[3]),this.sendOK(e);break;case"COPY_FILE_TO_PATH":this._bindings.copyFileToPath(e.data[0],e.data[1]),this.sendOK(e);break;case"COPY_FILE_TO_BUFFER":{let t=this._bindings.copyFileToBuffer(e.data);this.postMessage({messageId:this._nextMessageId++,requestId:e.messageId,type:"FILE_BUFFER",data:t},[]);break}case"COLLECT_FILE_STATISTICS":this._bindings.collectFileStatistics(e.data[0],e.data[1]),this.sendOK(e);break;case"EXPORT_FILE_STATISTICS":{this.postMessage({messageId:this._nextMessageId++,requestId:e.messageId,type:"FILE_STATISTICS",data:this._bindings.exportFileStatistics(e.data)},[]);break}case"INSERT_ARROW_FROM_IPC_STREAM":{this._bindings.insertArrowFromIPCStream(e.data[0],e.data[1],e.data[2]),this.sendOK(e);break}case"IMPORT_CSV_FROM_PATH":{this._bindings.insertCSVFromPath(e.data[0],e.data[1],e.data[2]),this.sendOK(e);break}case"IMPORT_JSON_FROM_PATH":{this._bindings.insertJSONFromPath(e.data[0],e.data[1],e.data[2]),this.sendOK(e);break}case"TOKENIZE":{let t=this._bindings.tokenize(e.data);this.postMessage({messageId:this._nextMessageId++,requestId:e.messageId,type:"SCRIPT_TOKENS",data:t},[]);break}}}catch(t){return console.log(t),this.failWith(e,t)}}};var $a=Rt(ps());var Ua=Rt(ps());var tt=Rt(require("apache-arrow")),Xr=class{constructor(e,t){this._bindings=e,this._conn=t}close(){this._bindings.disconnect(this._conn)}useUnsafe(e){return e(this._bindings,this._conn)}query(e){let t=this._bindings.runQuery(this._conn,e),i=tt.RecordBatchReader.from(t);return console.assert(i.isSync()),console.assert(i.isFile()),new tt.Table(i)}async send(e){let t=this._bindings.startPendingQuery(this._conn,e);for(;t==null;)t=await new Promise((c,d)=>{try{c(this._bindings.pollPendingQuery(this._conn))}catch(p){console.log(p),d(p)}});let i=new Qr(this._bindings,this._conn,t),a=tt.RecordBatchReader.from(i);return console.assert(a.isSync()),console.assert(a.isStream()),a}cancelSent(){return this._bindings.cancelPendingQuery(this._conn)}getTableNames(e){return this._bindings.getTableNames(this._conn,e)}prepare(e){let t=this._bindings.createPrepared(this._conn,e);return new ms(this._bindings,this._conn,t)}createScalarFunction(e,t,i){this._bindings.createScalarFunction(this._conn,e,t,i)}insertArrowTable(e,t){let i=tt.tableToIPC(e,"stream");this.insertArrowFromIPCStream(i,t)}insertArrowFromIPCStream(e,t){this._bindings.insertArrowFromIPCStream(this._conn,e,t)}insertCSVFromPath(e,t){this._bindings.insertCSVFromPath(this._conn,e,t)}insertJSONFromPath(e,t){this._bindings.insertJSONFromPath(this._conn,e,t)}},Qr=class{constructor(e,t,i){this.bindings=e;this.conn=t;this.header=i;this._first=!0,this._depleted=!1}next(){if(this._first)return this._first=!1,{done:!1,value:this.header};if(this._depleted)return{done:!0,value:null};let e=this.bindings.fetchQueryResults(this.conn);return this._depleted=e.length==0,{done:this._depleted,value:e}}[Symbol.iterator](){return this}},ms=class{constructor(e,t,i){this.bindings=e,this.connectionId=t,this.statementId=i}close(){this.bindings.closePrepared(this.connectionId,this.statementId)}query(...e){let t=this.bindings.runPrepared(this.connectionId,this.statementId,e),i=tt.RecordBatchReader.from(t);return console.assert(i.isSync()),console.assert(i.isFile()),new tt.Table(i)}send(...e){let t=this.bindings.sendPrepared(this.connectionId,this.statementId,e),i=new Qr(this.bindings,this.connectionId,t),a=tt.RecordBatchReader.from(i);return console.assert(a.isSync()),console.assert(a.isStream()),a}};var La=new TextEncoder,Ma=new TextDecoder("utf-8");function gs(r,e,t){let i=La.encode(t),a=r._malloc(i.byteLength),c=r.HEAPU8.subarray(a,a+i.byteLength);c.set(i),r.HEAPF64[(e>>3)+0]=1,r.HEAPF64[(e>>3)+1]=a,r.HEAPF64[(e>>3)+2]=c.byteLength}function bs(r){switch(r){case"UINT8":case"INT8":return 1;case"INT32":case"FLOAT":return 4;case"INT64":case"UINT64":case"DOUBLE":case"VARCHAR":return 8;default:return 0}}function ys(r,e,t,i){let a=r.HEAPU8.subarray(e,e+i*bs(t));switch(t){case"UINT8":return new Uint8Array(a.buffer,a.byteOffset,i);case"INT8":return new Int8Array(a.buffer,a.byteOffset,i);case"INT32":return new Int32Array(a.buffer,a.byteOffset,i);case"FLOAT":return new Float32Array(a.buffer,a.byteOffset,i);case"DOUBLE":return new Float64Array(a.buffer,a.byteOffset,i);case"VARCHAR":return new Float64Array(a.buffer,a.byteOffset,i);default:return new Array(0)}}function Ia(r,e,t){let i=r.HEAPU8.subarray(e,e+t);return new Uint8Array(i.buffer,i.byteOffset,t)}function Jr(r,e,t){let i=r.HEAPU8.subarray(e,e+t*8);return new Float64Array(i.buffer,i.byteOffset,t)}function Na(r,e,t,i,a,c,d,p){try{let v=r._udfFunctions.get(i);if(!v){gs(e,t,"Unknown UDF with id: "+i);return}let b=Ma.decode(e.HEAPU8.subarray(a,a+c)),y=JSON.parse(b),E=Jr(e,d,p/8),S=L=>{var R;let ae=null;switch(L.validityBuffer!==void 0&&(ae=Ia(e,E[L.validityBuffer],y.rows)),L.physicalType){case"VARCHAR":{if(L.dataBuffer===null||L.dataBuffer===void 0)throw new Error("malformed data view, expected data buffer for VARCHAR argument");if(L.lengthBuffer===null||L.lengthBuffer===void 0)throw new Error("malformed data view, expected data length buffer for VARCHAR argument");let W=ys(e,E[L.dataBuffer],L.physicalType,y.rows),z=[],le=Jr(e,E[L.lengthBuffer],y.rows);for(let w=0;w<y.rows;++w){if(ae!=null&&!ae[w]){z.push(null);continue}let g=e.HEAPU8.subarray(W[w],W[w]+le[w]),j=Ma.decode(g);z.push(j)}return w=>z[w]}case"STRUCT":{let W={},z=[];for(let le=0;le<(((R=L.children)==null?void 0:R.length)||0);++le){let w=L.children[le],g=S(w);z.push(j=>{W[w.name]=g(j)})}return ae!=null?le=>{if(!ae[le])return null;for(let w of z)w(le);return W}:le=>{for(let w of z)w(le);return W}}default:{if(L.dataBuffer===void 0)throw new Error("malformed data view, expected data buffer for argument of type: "+L.physicalType);let W=ys(e,E[L.dataBuffer],L.physicalType,y.rows);return ae!=null?z=>ae[z]?W[z]:null:z=>W[z]}}},G=[];for(let L=0;L<y.args.length;++L)G.push(S(y.args[L]));let P=y.rows*bs(y.ret.physicalType),A=e._malloc(P),N=ys(e,A,y.ret.physicalType,y.rows),V=e._malloc(y.rows),se=Ia(e,V,y.rows);if(N.length==0||se.length==0){gs(e,t,"Can't create physical arrays for result");return}let te=N;y.ret.physicalType=="VARCHAR"&&(te=new Array(y.rows));let me=[];for(let L=0;L<y.args.length;++L)me.push(null);for(let L=0;L<y.rows;++L){for(let R=0;R<y.args.length;++R)me[R]=G[R](L);let ae=v.func(...me);te[L]=ae,se[L]=ae==null?0:1}let O=0;switch(y.ret.physicalType){case"VARCHAR":{let L=new Array(0);O=e._malloc(y.rows*bs("DOUBLE"));let ae=Jr(e,O,y.rows),R=0;for(let w=0;w<y.rows;++w){let g=La.encode(te[w]||"");L.push(g),ae[w]=g.length,R+=g.length}let W=e._malloc(R),z=e.HEAPU8.subarray(W,W+R),le=0;for(let w=0;w<y.rows;++w){N[w]=le;let g=L[w];z.subarray(le,le+g.length).set(g),le+=g.length}}}let oe=3*8,X=e._malloc(oe),$=Jr(e,X,3);$[0]=A,$[1]=V,$[2]=O,e.HEAPF64[(t>>3)+0]=0,e.HEAPF64[(t>>3)+1]=X,e.HEAPF64[(t>>3)+2]=0}catch(v){gs(e,t,v.toString())}}function X_(){let r=new TextDecoder;return e=>(typeof SharedArrayBuffer<"u"&&e.buffer instanceof SharedArrayBuffer&&(e=new Uint8Array(e)),r.decode(e))}var Dt=X_();function Ee(r,e){console.error(`FAIL WITH: ${e}`),r.ccall("duckdb_web_fail_with",null,["string"],[e])}function xt(r,e,t){let i=r.HEAPU8.subarray(e,e+t),a=new Uint8Array(new ArrayBuffer(i.byteLength));return a.set(i),a}function ne(r,e,t){return Dt(r.HEAPU8.subarray(e,e+t))}function pe(r,e,t,i){let a=r.stackSave(),c=r.stackAlloc(3*8);t.unshift("number"),i.unshift(c),r.ccall(e,null,t,i);let d=r.HEAPF64[(c>>3)+0],p=r.HEAPF64[(c>>3)+1],v=r.HEAPF64[(c>>3)+2];return r.stackRestore(a),[d,p,v]}function ye(r){r.ccall("duckdb_web_clear_response",null,[],[])}var Q_="opfs",J_="default";function Ba(r,e,t){let i=`${Q_}://${t||J_}`.replace(/\/*$/,"/"),a=r.replace(/^\/*/,"");if(!e&&!a)throw new Error(`Invalid OPFS file path "${r}"`);return i+a.replace(/\/*$/,e?"/":"")}var Zr=class{constructor(e){let t=new Float64Array(e.buffer,e.byteOffset,e.byteLength/8),i=new Uint8Array(new ArrayBuffer(e.byteLength));i.set(e.subarray(7*8)),this.totalFileReadsCold=t[0],this.totalFileReadsAhead=t[1],this.totalFileReadsCached=t[2],this.totalFileWrites=t[3],this.totalPageAccesses=t[4],this.totalPageLoads=t[5],this.blockSize=t[6],this.blockStats=i}getBlockStats(e,t){return t=t||{file_reads_cold:0,file_reads_ahead:0,file_reads_cached:0,file_writes:0,page_accesses:0,page_loads:0},t.file_writes=this.blockStats[e*3+0]&15,t.file_reads_cold=this.blockStats[e*3+0]>>4,t.file_reads_ahead=this.blockStats[e*3+1]&15,t.file_reads_cached=this.blockStats[e*3+1]>>4,t.page_accesses=this.blockStats[e*3+1]&15,t.page_loads=this.blockStats[e*3+1]>>4,t}};var ep=!!process.env.KEEP_DEBUG_LOGS,tp=new TextEncoder;var en=class{constructor(e,t){this._instance=null;this._initPromise=null;this._initPromiseResolver=()=>{};this.onInstantiationProgress=[];this._logger=e,this._runtime=t,this._nextUDFId=1}get logger(){return this._logger}get mod(){return this._instance}get pthread(){return this.mod.PThread||null}async instantiate(e=t=>{}){return this._instance!=null?this:(this._initPromise!=null&&(this.onInstantiationProgress.push(e),await this._initPromise),this._initPromise=new Promise(t=>{this._initPromiseResolver=t}),this.onInstantiationProgress=[e],this._instance=await this.instantiateImpl({print:console.log.bind(console),printErr:console.log.bind(console),onRuntimeInitialized:this._initPromiseResolver}),await this._initPromise,this._initPromise=null,this.onInstantiationProgress=this.onInstantiationProgress.filter(t=>t!=e),this)}open(e){let[t,i,a]=pe(this.mod,"duckdb_web_open",["string"],[JSON.stringify(e)]);if(t!==0)throw new Error(ne(this.mod,i,a));ye(this.mod)}reset(){let[e,t,i]=pe(this.mod,"duckdb_web_reset",[],[]);if(e!==0)throw new Error(ne(this.mod,t,i));ye(this.mod)}getVersion(){let[e,t,i]=pe(this.mod,"duckdb_web_get_version",[],[]);if(e!==0)throw new Error(ne(this.mod,t,i));let a=ne(this.mod,t,i);return ye(this.mod),a}getFeatureFlags(){return this.mod.ccall("duckdb_web_get_feature_flags","number",[],[])}tokenize(e){let[t,i,a]=pe(this.mod,"duckdb_web_tokenize",["string"],[e]);if(t!==0)throw new Error(ne(this.mod,i,a));let c=ne(this.mod,i,a);return ye(this.mod),JSON.parse(c)}connect(){let e=this.mod.ccall("duckdb_web_connect","number",[],[]);return new Xr(this,e)}disconnect(e){if(this.mod.ccall("duckdb_web_disconnect",null,["number"],[e]),this.pthread)for(let t of[...this.pthread.runningWorkers,...this.pthread.unusedWorkers])t.postMessage({cmd:"dropUDFFunctions",connectionId:e})}runQuery(e,t){let[i,a,c]=pe(this.mod,"duckdb_web_query_run",["number","string"],[e,t]);if(i!==0)throw new Error(ne(this.mod,a,c));let d=xt(this.mod,a,c);return ye(this.mod),d}startPendingQuery(e,t){let[i,a,c]=pe(this.mod,"duckdb_web_pending_query_start",["number","string"],[e,t]);if(i!==0)throw new Error(ne(this.mod,a,c));if(a==0)return null;let d=xt(this.mod,a,c);return ye(this.mod),d}pollPendingQuery(e){let[t,i,a]=pe(this.mod,"duckdb_web_pending_query_poll",["number"],[e]);if(t!==0)throw new Error(ne(this.mod,i,a));if(i==0)return null;let c=xt(this.mod,i,a);return ye(this.mod),c}cancelPendingQuery(e){return this.mod.ccall("duckdb_web_pending_query_cancel","boolean",["number"],[e])}fetchQueryResults(e){let[t,i,a]=pe(this.mod,"duckdb_web_query_fetch_results",["number"],[e]);if(t!==0)throw new Error(ne(this.mod,i,a));let c=xt(this.mod,i,a);return ye(this.mod),c}getTableNames(e,t){let[i,a,c]=pe(this.mod,"duckdb_web_get_tablenames",["number","string"],[e,t]);if(i!==0)throw new Error(ne(this.mod,a,c));let d=ne(this.mod,a,c);return ye(this.mod),JSON.parse(d)}createScalarFunction(e,t,i,a){let c={functionId:this._nextUDFId,name:t,returnType:$t(i)},d={functionId:c.functionId,connectionId:e,name:t,returnType:i,func:a};this._nextUDFId+=1;let[p,v,b]=pe(this.mod,"duckdb_web_udf_scalar_create",["number","string"],[e,JSON.stringify(c)]);if(p!==0)throw new Error(ne(this.mod,v,b));if(ye(this.mod),globalThis.DUCKDB_RUNTIME._udfFunctions=(globalThis.DUCKDB_RUNTIME._udfFunctions||new Map).set(d.functionId,d),this.pthread)for(let y of[...this.pthread.runningWorkers,...this.pthread.unusedWorkers])y.postMessage({cmd:"registerUDFFunction",udf:d})}createPrepared(e,t){let[i,a,c]=pe(this.mod,"duckdb_web_prepared_create",["number","string"],[e,t]);if(i!==0)throw new Error(ne(this.mod,a,c));return ye(this.mod),a}closePrepared(e,t){let[i,a,c]=pe(this.mod,"duckdb_web_prepared_close",["number","number"],[e,t]);if(i!==0)throw new Error(ne(this.mod,a,c));ye(this.mod)}runPrepared(e,t,i){let[a,c,d]=pe(this.mod,"duckdb_web_prepared_run",["number","number","string"],[e,t,JSON.stringify(i)]);if(a!==0)throw new Error(ne(this.mod,c,d));let p=xt(this.mod,c,d);return ye(this.mod),p}sendPrepared(e,t,i){let[a,c,d]=pe(this.mod,"duckdb_web_prepared_send",["number","number","string"],[e,t,JSON.stringify(i)]);if(a!==0)throw new Error(ne(this.mod,c,d));let p=xt(this.mod,c,d);return ye(this.mod),p}insertArrowFromIPCStream(e,t,i){if(t.length==0)return;let a=this.mod._malloc(t.length);this.mod.HEAPU8.subarray(a,a+t.length).set(t);let d=i?JSON.stringify(i):"",[p,v,b]=pe(this.mod,"duckdb_web_insert_arrow_from_ipc_stream",["number","number","number","string"],[e,a,t.length,d]);if(p!==0)throw new Error(ne(this.mod,v,b))}insertCSVFromPath(e,t,i){if(i.columns!==void 0){i.columnsFlat=[];for(let b in i.columns)i.columnsFlat.push(Lr(b,i.columns[b]))}let a={...i};a.columns=a.columnsFlat,delete a.columnsFlat;let c=JSON.stringify(a),[d,p,v]=pe(this.mod,"duckdb_web_insert_csv_from_path",["number","string","string"],[e,t,c]);if(d!==0)throw new Error(ne(this.mod,p,v))}insertJSONFromPath(e,t,i){if(i.columns!==void 0){i.columnsFlat=[];for(let b in i.columns)i.columnsFlat.push(Lr(b,i.columns[b]))}let a={...i};a.columns=a.columnsFlat,delete a.columnsFlat;let c=JSON.stringify(a),[d,p,v]=pe(this.mod,"duckdb_web_insert_json_from_path",["number","string","string"],[e,t,c]);if(d!==0)throw new Error(ne(this.mod,p,v))}globFiles(e){let[t,i,a]=pe(this.mod,"duckdb_web_fs_glob_file_infos",["string"],[e]);if(t!==0)throw new Error(ne(this.mod,i,a));let c=ne(this.mod,i,a);ye(this.mod);let d=JSON.parse(c);return d??[]}registerFileURL(e,t,i,a=!1){t===void 0&&(t=e);let[c,d,p]=pe(this.mod,"duckdb_web_fs_register_file_url",["string","string"],[e,t,i,a]);if(c!==0)throw new Error(ne(this.mod,d,p));ye(this.mod)}registerFileText(e,t){let i=tp.encode(t);this.registerFileBuffer(e,i)}registerFileBuffer(e,t){let i=this.mod._malloc(t.length);this.mod.HEAPU8.subarray(i,i+t.length).set(t);let[c,d,p]=pe(this.mod,"duckdb_web_fs_register_file_buffer",["string","number","number"],[e,i,t.length]);if(c!==0)throw new Error(ne(this.mod,d,p));ye(this.mod)}async registerFileHandle(e,t,i,a){let c=e;if(i===3){let b=t;if(!(b!=null&&b.filePath))throw new Error(`Invalid OPFS file handle for "${e}"`);let{filePath:y,domain:E}=b;b._url||(b._url=Ba(y,!1,E)),c=b._url}let[d,p,v]=pe(this.mod,"duckdb_web_fs_register_file_url",["string","string","number","boolean"],[e,c,i,a]);if(d!==0)throw new Error(ne(this.mod,p,v));if(ye(this.mod),globalThis.DUCKDB_RUNTIME._files=(globalThis.DUCKDB_RUNTIME._files||new Map).set(e,t),i===3){let b=t,{fileHandle:y}=b;y?b.accessHandle||(b.accessHandle=await y.createSyncAccessHandle(),console.debug(`prepared SyncAccessHandle for OPFS file "${e}"`)):console.warn(`Invalid file handle for OPFS file "${e}"`)}if(this.pthread){for(let b of this.pthread.runningWorkers)b.postMessage({cmd:"registerFileHandle",fileName:e,fileHandle:t});for(let b of this.pthread.unusedWorkers)b.postMessage({cmd:"dropFileHandle",fileName:e})}}dropFile(e){let[t,i,a]=pe(this.mod,"duckdb_web_fs_drop_file",["string"],[e]);if(t!==0)throw new Error(ne(this.mod,i,a));ye(this.mod)}dropFiles(){let[e,t,i]=pe(this.mod,"duckdb_web_fs_drop_files",[],[]);if(e!==0)throw new Error(ne(this.mod,t,i));ye(this.mod)}flushFiles(){var t;this.mod.ccall("duckdb_web_flush_files",null,[],[]);let e=(t=this._runtime._files)==null?void 0:t.entries();if(e){for(let[i,a]of e)if(a.accessHandle){ep&&console.log(`[WASM-CALL] flushFiles() => flushFile("${i}")`);let c=a;c.accessHandle&&c.accessHandle.flush()}}}copyFileToPath(e,t){let[i,a,c]=pe(this.mod,"duckdb_web_copy_file_to_path",["string","string"],[e,t]);if(i!==0)throw new Error(ne(this.mod,a,c));ye(this.mod)}copyFileToBuffer(e){let[t,i,a]=pe(this.mod,"duckdb_web_copy_file_to_buffer",["string"],[e]);if(t!==0)throw new Error(ne(this.mod,i,a));let c=this.mod.HEAPU8.subarray(i,i+a),d=new Uint8Array(c.length);return d.set(c),ye(this.mod),d}closeFile(e){var i,a;return((a=(i=this._runtime).closeFileByName)==null?void 0:a.call(i,this.mod,e))||!1}collectFileStatistics(e,t){let[i,a,c]=pe(this.mod,"duckdb_web_collect_file_stats",["string","boolean"],[e,t]);if(i!==0)throw new Error(ne(this.mod,a,c))}exportFileStatistics(e){let[t,i,a]=pe(this.mod,"duckdb_web_export_file_stats",["string"],[e]);if(t!==0)throw new Error(ne(this.mod,i,a));return new Zr(this.mod.HEAPU8.subarray(i,i+a))}};var Ha=Rt(require("fs")),tn=class extends en{constructor(t,i,a,c){super(t,i);this.mainModulePath=a,this.pthreadWorkerPath=c}locateFile(t,i){if(t.endsWith(".wasm"))return this.mainModulePath;if(t.endsWith(".worker.js")){if(!this.pthreadWorkerPath)throw new Error("Missing DuckDB worker path!");return this.pthreadWorkerPath}throw new Error(`WASM instantiation requested unexpected file: prefix=${i} path=${t}`)}instantiateWasm(t,i){globalThis.DUCKDB_RUNTIME={};for(let c of Object.getOwnPropertyNames(this._runtime)){if(c=="constructor")continue;let d=globalThis.DUCKDB_RUNTIME;d[c]=Object.getOwnPropertyDescriptor(this._runtime,c).value}let a=Ha.default.readFileSync(this.mainModulePath);return WebAssembly.instantiate(a,t).then(c=>{i(c.instance,c.module)}),[]}instantiateImpl(t){return(0,Ua.default)({...t,instantiateWasm:this.instantiateWasm.bind(this)})}};var rn=class extends tn{constructor(e,t,i,a=null){super(e,t,i,a)}instantiateImpl(e){return(0,$a.default)({...e,instantiateWasm:this.instantiateWasm.bind(this),locateFile:this.locateFile.bind(this)})}};var Me=Rt(require("fs"));var Cl=Rt(xl());var ve={_files:new Map,_filesById:new Map,_fileInfoCache:new Map,_udfFunctions:new Map,resolveFileInfo(r,e){try{let t=ve._fileInfoCache.get(e),[i,a,c]=pe(r,"duckdb_web_fs_get_file_info_by_id",["number","number"],[e,(t==null?void 0:t.cacheEpoch)||0]);if(i!==0)return Ee(r,ne(r,a,c)),null;if(c===0)return ye(r),t;let d=ne(r,a,c);ye(r);let p=JSON.parse(d);return p==null?null:(ve._fileInfoCache.set(e,p),p)}catch(t){return console.log(t),Ee(r,t.toString()),null}},testPlatformFeature:(r,e)=>{switch(e){case 1:return typeof BigInt64Array<"u";default:return console.warn(`test for unknown feature: ${e}`),!1}},getDefaultDataProtocol(r){return 1},openFile(r,e,t){var i,a;try{ve._fileInfoCache.delete(e);let c=ve.resolveFileInfo(r,e);switch(c==null?void 0:c.dataProtocol){case 1:{let d=(i=ve._files)==null?void 0:i.get(c.dataUrl);d==null&&(d=Me.default.openSync(c.dataUrl,Me.default.constants.O_CREAT|Me.default.constants.O_RDWR,Me.default.constants.S_IRUSR|Me.default.constants.S_IWUSR),(a=ve._filesById)==null||a.set(c.fileId,d));let p=Me.default.fstatSync(d).size,v=r._malloc(2*8);return r.HEAPF64[(v>>3)+0]=+p,r.HEAPF64[(v>>3)+1]=0,v}case 2:case 3:case 4:case 5:Ee(r,"Unsupported data protocol")}}catch(c){console.log(c),Ee(r,c.toString())}return 0},syncFile:(r,e)=>{},closeFile:(r,e)=>{try{let t=ve._fileInfoCache.get(e);switch(ve._fileInfoCache.delete(e),t==null?void 0:t.dataProtocol){case 1:{let i=ve._filesById.get(e);ve._filesById.delete(e),i!=null&&Me.default.closeSync(i);break}case 2:case 3:case 4:case 5:break}}catch(t){console.log(t),Ee(r,t.toString())}return 0},truncateFile:(r,e,t)=>{try{let i=ve.resolveFileInfo(r,e);switch(i==null?void 0:i.dataProtocol){case 1:{Me.default.truncateSync(i.dataUrl,t);break}case 2:case 3:case 4:case 5:Ee(r,"Unsupported data protocol")}}catch(i){console.log(i),Ee(r,i.toString())}return 0},readFile:(r,e,t,i,a)=>{try{let c=ve.resolveFileInfo(r,e);switch(c==null?void 0:c.dataProtocol){case 1:{let d=ve._filesById.get(e);return d==null?(Ee(r,`File ${e} is missing a file descriptor`),0):Me.default.readSync(d,r.HEAPU8,t,i,a)}case 2:case 3:case 4:case 5:Ee(r,"Unsupported data protocol")}}catch(c){console.log(c),Ee(r,c.toString())}return 0},writeFile:(r,e,t,i,a)=>{try{let c=ve.resolveFileInfo(r,e);switch(c==null?void 0:c.dataProtocol){case 1:{let d=ve._filesById.get(e);if(d==null)return Ee(r,`File ${e} is missing a file descriptor`),0;let p=r.HEAPU8.subarray(t,t+i);return Me.default.writeSync(d,p,0,p.length,a)}case 2:case 3:case 4:case 5:Ee(r,"Unsupported data protocol")}}catch(c){console.log(c),Ee(r,c.toString())}return 0},getLastFileModificationTime:(r,e)=>{try{let t=ve.resolveFileInfo(r,e);switch(t==null?void 0:t.dataProtocol){case 1:{let i=ve._filesById.get(e);return i==null?(Ee(r,`File ${e} is missing a file descriptor`),0):Me.default.fstatSync(i).mtime.getTime()}case 2:case 3:case 4:case 5:Ee(r,"Unsupported data protocol")}}catch(t){console.log(t),Ee(r,t.toString())}return 0},checkDirectory:(r,e,t)=>{try{let i=Dt(r.HEAPU8.subarray(e,e+t));return Me.default.existsSync(i)}catch(i){return console.log(i),Ee(r,i.toString()),!1}},createDirectory:(r,e,t)=>{try{let i=Dt(r.HEAPU8.subarray(e,e+t));return Me.default.mkdirSync(i)}catch(i){return console.log(i),Ee(r,i.toString()),0}},removeDirectory:(r,e,t)=>{try{let i=Dt(r.HEAPU8.subarray(e,e+t));return Me.default.rmdirSync(i)}catch(i){return console.log(i),Ee(r,i.toString()),0}},listDirectoryEntries:(r,e,t)=>(Ee(r,"Not Implemented"),!1),glob:(r,e,t)=>{try{let i=ne(r,e,t),a=Cl.sync([i],{dot:!0});for(let c of a)r.ccall("duckdb_web_fs_glob_add_path",null,["string"],[c])}catch(i){return console.log(i),Ee(r,i.toString()),0}},moveFile:(r,e,t,i,a)=>{var v,b;let c=ne(r,e,t),d=ne(r,i,a),p=(v=ve._files)==null?void 0:v.get(c);p!==void 0&&(ve._files.delete(p),ve._files.set(d,p));for(let[y,E]of((b=ve._fileInfoCache)==null?void 0:b.entries())||[])if(E.dataUrl==c){ve._fileInfoCache.delete(y);break}return!0},checkFile:(r,e,t)=>{try{let i=Dt(r.HEAPU8.subarray(e,e+t));return Me.default.existsSync(i)}catch(i){return console.log(i),Ee(r,i.toString()),!1}},removeFile:(r,e,t)=>{try{let i=Dt(r.HEAPU8.subarray(e,e+t));return Me.default.rmSync(i)}catch(i){return console.log(i),Ee(r,i.toString()),0}},callScalarUDF:(r,e,t,i,a,c,d)=>{Na(ve,r,e,t,i,a,c,d)}};var ro=class extends Nr{postMessage(e,t){globalThis.postMessage(e,t)}async instantiate(e,t,i){return await new rn(this,ve,e,t).instantiate(i)}};function Ol(){let r=new ro;globalThis.onmessage=async e=>{await r.onMessage(e.data)}}Ol();0&&(module.exports={registerWorker});
/*! Bundled license information:

is-extglob/index.js:
  (*!
   * is-extglob <https://github.com/jonschlinkert/is-extglob>
   *
   * Copyright (c) 2014-2016, Jon Schlinkert.
   * Licensed under the MIT License.
   *)

is-glob/index.js:
  (*!
   * is-glob <https://github.com/jonschlinkert/is-glob>
   *
   * Copyright (c) 2014-2017, Jon Schlinkert.
   * Released under the MIT License.
   *)

is-number/index.js:
  (*!
   * is-number <https://github.com/jonschlinkert/is-number>
   *
   * Copyright (c) 2014-present, Jon Schlinkert.
   * Released under the MIT License.
   *)

to-regex-range/index.js:
  (*!
   * to-regex-range <https://github.com/micromatch/to-regex-range>
   *
   * Copyright (c) 2015-present, Jon Schlinkert.
   * Released under the MIT License.
   *)

fill-range/index.js:
  (*!
   * fill-range <https://github.com/jonschlinkert/fill-range>
   *
   * Copyright (c) 2014-present, Jon Schlinkert.
   * Licensed under the MIT License.
   *)

queue-microtask/index.js:
  (*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)

run-parallel/index.js:
  (*! run-parallel. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)
*/
//# sourceMappingURL=duckdb-node-mvp.worker.cjs.map
